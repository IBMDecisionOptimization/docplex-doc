

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>docplex.mp.model &#8212; DOcplex.MP: Mathematical Programming Modeling for Python V2.15 documentation</title>
    <link rel="stylesheet" href="../../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">DOcplex.MP: Mathematical Programming Modeling for Python V2.15 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for docplex.mp.model</h1><div class="highlight"><pre>
<span></span><span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Source file provided under Apache License, Version 2.0, January 2004,</span>
<span class="c1"># http://www.apache.org/licenses/</span>
<span class="c1"># (c) Copyright IBM Corp. 2015, 2018</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="c1"># pylint: disable=too-many-lines</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">from</span> <span class="nn">six</span> <span class="k">import</span> <span class="n">iteritems</span><span class="p">,</span> <span class="n">itervalues</span>

<span class="kn">from</span> <span class="nn">docplex.mp.aggregator</span> <span class="k">import</span> <span class="n">ModelAggregator</span>
<span class="kn">from</span> <span class="nn">docplex.mp.compat23</span> <span class="k">import</span> <span class="n">StringIO</span><span class="p">,</span> <span class="n">izip</span>
<span class="kn">from</span> <span class="nn">docplex.mp.constants</span> <span class="k">import</span> <span class="n">SOSType</span><span class="p">,</span> <span class="n">CplexScope</span><span class="p">,</span> <span class="n">ObjectiveSense</span><span class="p">,</span> <span class="n">BasisStatus</span><span class="p">,</span> <span class="n">EffortLevel</span><span class="p">,</span>\
    <span class="n">int_probtype_to_string</span>
<span class="kn">from</span> <span class="nn">docplex.mp.constr</span> <span class="k">import</span> <span class="n">AbstractConstraint</span><span class="p">,</span> <span class="n">LinearConstraint</span><span class="p">,</span> <span class="n">RangeConstraint</span><span class="p">,</span> \
    <span class="n">IndicatorConstraint</span><span class="p">,</span> <span class="n">QuadraticConstraint</span><span class="p">,</span> <span class="n">PwlConstraint</span><span class="p">,</span> <span class="n">EquivalenceConstraint</span>
<span class="kn">from</span> <span class="nn">docplex.mp.context</span> <span class="k">import</span> <span class="n">Context</span><span class="p">,</span> \
    <span class="n">is_auto_publishing_solve_details</span><span class="p">,</span> <span class="n">has_credentials</span>
<span class="kn">from</span> <span class="nn">docplex.mp.cloudutils</span> <span class="k">import</span> <span class="n">is_url_valid</span><span class="p">,</span> <span class="n">make_new_kpis_dict</span>
<span class="kn">from</span> <span class="nn">docplex.mp.publish</span> <span class="k">import</span> <span class="n">auto_publishing_result_output_names</span><span class="p">,</span> <span class="n">auto_publishing_kpis_table_names</span>

<span class="c1"># from docplex.mp.docloud_engine import DOcloudEngine</span>
<span class="kn">from</span> <span class="nn">docplex.mp.engine_factory</span> <span class="k">import</span> <span class="n">EngineFactory</span>
<span class="kn">from</span> <span class="nn">docplex.mp.environment</span> <span class="k">import</span> <span class="n">Environment</span>
<span class="kn">from</span> <span class="nn">docplex.mp.error_handler</span> <span class="k">import</span> <span class="n">DefaultErrorHandler</span><span class="p">,</span> \
    <span class="n">docplex_add_trivial_infeasible_ct</span>
<span class="kn">from</span> <span class="nn">docplex.mp.format</span> <span class="k">import</span> <span class="n">LP_format</span><span class="p">,</span> <span class="n">SAV_format</span><span class="p">,</span> <span class="n">MPS_format</span>
<span class="kn">from</span> <span class="nn">docplex.mp.mfactory</span> <span class="k">import</span> <span class="n">ModelFactory</span>
<span class="kn">from</span> <span class="nn">docplex.mp.model_stats</span> <span class="k">import</span> <span class="n">ModelStatistics</span>
<span class="kn">from</span> <span class="nn">docplex.mp.numutils</span> <span class="k">import</span> <span class="n">round_nearest_towards_infinity1</span><span class="p">,</span> <span class="n">_NumPrinter</span>
<span class="kn">from</span> <span class="nn">docplex.mp.printer_factory</span> <span class="k">import</span> <span class="n">ModelPrinterFactory</span>
<span class="kn">from</span> <span class="nn">docplex.mp.pwl</span> <span class="k">import</span> <span class="n">PwlFunction</span>
<span class="kn">from</span> <span class="nn">docplex.mp.tck</span> <span class="k">import</span> <span class="n">get_typechecker</span>
<span class="kn">from</span> <span class="nn">docplex.mp.sttck</span> <span class="k">import</span> <span class="n">StaticTypeChecker</span>
<span class="kn">from</span> <span class="nn">docplex.mp.utils</span> <span class="k">import</span> <span class="n">DOcplexException</span><span class="p">,</span> <span class="n">MultiObjective</span><span class="p">,</span>\
    <span class="n">DOcplexLimitsExceeded</span>
<span class="kn">from</span> <span class="nn">docplex.mp.utils</span> <span class="k">import</span> <span class="n">is_indexable</span><span class="p">,</span> <span class="n">is_iterable</span><span class="p">,</span> <span class="n">is_int</span><span class="p">,</span> <span class="n">is_string</span><span class="p">,</span> \
    <span class="n">make_output_path2</span><span class="p">,</span> <span class="n">generate_constant</span><span class="p">,</span> <span class="n">_AutomaticSymbolGenerator</span><span class="p">,</span> <span class="n">_IndexScope</span><span class="p">,</span> <span class="n">_to_list</span><span class="p">,</span> \
    <span class="n">compute_is_index</span><span class="p">,</span> <span class="n">is_number</span><span class="p">,</span> <span class="n">str_maxed</span><span class="p">,</span> <span class="n">normalize_basename</span><span class="p">,</span> <span class="n">izip2_filled</span>
<span class="kn">from</span> <span class="nn">docplex.mp.utils</span> <span class="k">import</span> <span class="n">apply_thread_limitations</span>
<span class="kn">from</span> <span class="nn">docplex.mp.vartype</span> <span class="k">import</span> <span class="n">VarType</span><span class="p">,</span> <span class="n">BinaryVarType</span><span class="p">,</span> <span class="n">IntegerVarType</span><span class="p">,</span> \
    <span class="n">ContinuousVarType</span><span class="p">,</span> <span class="n">SemiContinuousVarType</span><span class="p">,</span> <span class="n">SemiIntegerVarType</span>
<span class="kn">from</span> <span class="nn">docplex.util.environment</span> <span class="k">import</span> <span class="n">get_environment</span>

<span class="kn">from</span> <span class="nn">docplex.mp.cloudutils</span> <span class="k">import</span> <span class="n">context_must_use_docloud</span><span class="p">,</span> <span class="n">context_has_docloud_credentials</span><span class="p">,</span>\
    <span class="n">is_in_docplex_worker</span>

<span class="kn">from</span> <span class="nn">docplex.mp.publish</span> <span class="k">import</span> <span class="n">_KpiRecorder</span><span class="p">,</span> <span class="n">write_kpis_table</span><span class="p">,</span> <span class="n">write_result_output</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">docplex.worker.solvehook</span> <span class="k">import</span> <span class="n">get_solve_hook</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="n">get_solve_hook</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># pragma: no cover</span>




<span class="c1"># noinspection PyProtectedMember</span>
<div class="viewcode-block" id="Model"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model">[docs]</a><span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This is the main class to embed modeling objects.</span>

<span class="sd">    The :class:`Model` class acts as a factory to create optimization objects,</span>
<span class="sd">    decision variables, and constraints.</span>
<span class="sd">    It provides various accessors and iterators to the modeling objects.</span>
<span class="sd">    It also manages solving operations and solution management.</span>

<span class="sd">    The Model class is a context manager and can be used with the Python `with` statement:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       with Model() as mdl:</span>
<span class="sd">         # start modeling...</span>

<span class="sd">    When the `with` block is finished, the :func:`end` method is called automatically, and all resources</span>
<span class="sd">    allocated by the model are destroyed.</span>

<span class="sd">    When a model is created without a specified ``context``, a default</span>
<span class="sd">    ``Context`` is created and initialized as described in :func:`docplex.mp.context.Context.read_settings`.</span>

<span class="sd">    Example::</span>

<span class="sd">        # Creates a model named &#39;my model&#39; with default context</span>
<span class="sd">        model = Model(&#39;my model&#39;)</span>

<span class="sd">    In this example, we create a model to solve with just 2 threads::</span>

<span class="sd">        context = Context.make_default_context()</span>
<span class="sd">        context.cplex_parameters.threads = 2</span>
<span class="sd">        model = Model(context=context)</span>

<span class="sd">    Alternatively, this can be coded as::</span>

<span class="sd">        model = Model()</span>
<span class="sd">        model.context.cplex_parameters.threads = 2</span>

<span class="sd">    Args:</span>
<span class="sd">        name (optional): The name of the model.</span>
<span class="sd">        context (optional): The solve context to be used. If no ``context`` is</span>
<span class="sd">            passed, a default context is created.</span>
<span class="sd">        log_output (optional): If ``True``, solver logs are output to</span>
<span class="sd">            stdout. If this is a stream, solver logs are output to that</span>
<span class="sd">            stream object.</span>
<span class="sd">        checker (optional): If ``off``, then checking is disabled everywhere. Turning off checking</span>
<span class="sd">            may improve performance but should be done only with extreme caution.</span>
<span class="sd">            Possible values for the `checker` keyword argument are:</span>

<span class="sd">                - `default` (or `std`, or `on`): detects modeling errors, but doe snot check</span>
<span class="sd">                  numerical values for infinities or NaNs. This is the default value</span>
<span class="sd">                - `numerical`: checks modeling errors and also checks all number values for  infinities</span>
<span class="sd">                  or NaNs. This option should be used when data are not trusted.</span>
<span class="sd">                - `off`: no typechecking is performed. This options must be used when the model has been</span>
<span class="sd">                  thorougly tested and numerical data are trusted.</span>
<span class="sd">        cts_by_name (optional): a flag which control whether the constraint name dictionary is enabled.</span>
<span class="sd">            Default is False.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_name_generator</span> <span class="o">=</span> <span class="n">_AutomaticSymbolGenerator</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;docplex_model&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">_default_effort_level</span> <span class="o">=</span> <span class="n">EffortLevel</span><span class="o">.</span><span class="n">Repair</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">binary_vartype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns an instance of :class:`docplex.mp.vartype.BinaryVarType`.</span>

<span class="sd">        This type instance is used to build all binary decision variable collections of the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binary_vartype</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">integer_vartype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns an instance of :class:`docplex.mp.vartype.IntegerVarType`.</span>

<span class="sd">        This type instance is used to build all integer variable collections of the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_integer_vartype</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">continuous_vartype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns an instance of :class:`docplex.mp.vartype.ContinuousVarType`.</span>

<span class="sd">        This type instance is used to build all continuous variable collections of the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_continuous_vartype</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">semicontinuous_vartype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns an instance of :class:`docplex.mp.vartype.SemiContinuousVarType`.</span>

<span class="sd">        This type instance is used to build all semi-continuous variable collections of the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semicontinuous_vartype</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">semiinteger_vartype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns an instance of :class:`docplex.mp.vartype.SemiIntegerType`.</span>

<span class="sd">        This type instance is used to build all semi-integer variable collections of the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semiinteger_vartype</span>

    <span class="k">def</span> <span class="nf">_vartypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_binary_vartype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_integer_vartype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_continuous_vartype</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_semicontinuous_vartype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semiinteger_vartype</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">parse_vartype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">VarType</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">arg</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">argl</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">vt</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vartypes</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">argl</span> <span class="o">==</span> <span class="n">vt</span><span class="o">.</span><span class="n">short_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="n">argl</span> <span class="o">==</span> <span class="n">vt</span><span class="o">.</span><span class="n">cplex_typecode</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="k">return</span> <span class="n">vt</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Cannot convert as a variable type: </span><span class="si">{0!r}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_make_environment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="n">get_default_env</span><span class="p">()</span>
        <span class="c1"># rtc-28869</span>
        <span class="n">env</span><span class="o">.</span><span class="n">numpy_hook</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">init_numpy</span>
        <span class="k">return</span> <span class="n">env</span>

    <span class="k">def</span> <span class="nf">_lazy_get_environment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_environment</span><span class="p">()</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span>

    <span class="n">_saved_numpy_options</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_unknown_status</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="Model.init_numpy"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.init_numpy">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">init_numpy</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; Static method to customize `numpy` for DOcplex.</span>

<span class="sd">        This method makes `numpy` aware of DOcplex.</span>
<span class="sd">        All `numpy` arrays with DOcplex objects will be printed by their string representations</span>
<span class="sd">        as returned by `str(`) instead of `repr()` as with standard numpy behavior.</span>

<span class="sd">        All customizations can be removed by calling the :func:`restore_numpy` method.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method does nothing if `numpy` is not present.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`restore_numpy`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># noinspection PyUnresolvedReferences</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

            <span class="n">Model</span><span class="o">.</span><span class="n">_saved_numpy_options</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">get_printoptions</span><span class="p">()</span>
            <span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">formatter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;numpystr&#39;</span><span class="p">:</span> <span class="n">Model</span><span class="o">.</span><span class="n">_numpy_print_str</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="n">Model</span><span class="o">.</span><span class="n">_numpy_print_str</span><span class="p">})</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">pass</span>  <span class="c1"># pragma: no cover</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_numpy_print_str</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">if</span> <span class="n">ModelFactory</span><span class="o">.</span><span class="n">_is_operand</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">else</span> <span class="nb">repr</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

<div class="viewcode-block" id="Model.restore_numpy"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.restore_numpy">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">restore_numpy</span><span class="p">():</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot; Static method to restore `numpy` to its default state.</span>

<span class="sd">        This method is a companion method to :func:`init_numpy`. It restores `numpy` to its original state,</span>
<span class="sd">        undoing all customizations that were done for DOcplex.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method does nothing if numpy is not present.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`init_numpy`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># noinspection PyUnresolvedReferences</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

            <span class="k">if</span> <span class="n">Model</span><span class="o">.</span><span class="n">_saved_numpy_options</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">_saved_numpy_options</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">pass</span>  <span class="c1"># pragma: no cover</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">environment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># for a closed model with no CPLEX, numpy, etc return ClosedEnvironment</span>
        <span class="c1"># return get_no_graphics_env()</span>
        <span class="c1"># from docplex.environment import ClosedEnvironment</span>
        <span class="c1"># return ClosedEnvironment</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_get_environment</span><span class="p">()</span>

    <span class="c1"># ---- type checking</span>

    <span class="k">def</span> <span class="nf">typecheck_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_var</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">typecheck_num</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">caller</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">typecheck_as_denominator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">denominator</span><span class="p">,</span> <span class="n">numerator</span><span class="p">):</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_as_denominator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">denominator</span><span class="p">,</span> <span class="n">numerator</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">typecheck_as_power</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">power</span><span class="p">):</span>
        <span class="c1"># INTERNAL: checks &lt;power&gt; is 0,1,2</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_as_power</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">power</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_typecheck_optional_num_seq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">expected_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="c1"># accepting either a num an iterable, or None (if accept_none</span>
        <span class="k">if</span> <span class="n">nums</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">accept_none</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">nums</span>
        <span class="k">elif</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">accept_string</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">nums_</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num_seq</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">caller</span><span class="p">)</span>
            <span class="n">lnums</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">nums_</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">expected_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lnums</span><span class="p">)</span> <span class="o">!=</span> <span class="n">expected_size</span><span class="p">:</span>
                    <span class="n">caller_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">caller</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: &#39;</span> <span class="o">%</span> <span class="n">caller</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">Expecting a sequence of numbers of size </span><span class="si">{1}</span><span class="s1">, actual size is </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">caller_string</span><span class="p">,</span> <span class="n">expected_size</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lnums</span><span class="p">))</span>

            <span class="k">return</span> <span class="n">lnums</span>

        <span class="k">elif</span> <span class="n">is_number</span><span class="p">(</span><span class="n">nums</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">nums</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">caller_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">caller</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: &#39;</span> <span class="o">%</span> <span class="n">caller</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">Expecting a number, a sequence of numbers</span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2!r}</span><span class="s2"> was passed&quot;</span>
            <span class="n">none_msg</span> <span class="o">=</span> <span class="s1">&#39; or None&#39;</span> <span class="k">if</span> <span class="n">accept_none</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">caller_string</span><span class="p">,</span> <span class="n">none_msg</span><span class="p">,</span> <span class="n">nums</span><span class="p">)</span>

    <span class="c1"># ---</span>
    <span class="k">def</span> <span class="nf">unsupported_relational_operator_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_arg</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">right_arg</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Unsupported relational operator:  </span><span class="si">{0!s}</span><span class="s2"> </span><span class="si">{1!s}</span><span class="s2"> </span><span class="si">{2!s}</span><span class="s2">, only &lt;=, ==, &gt;= are allowed&quot;</span><span class="p">,</span> <span class="n">left_arg</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span>
                   <span class="n">right_arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cannot_be_used_as_denominator_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">denominator</span><span class="p">,</span> <span class="n">numerator</span><span class="p">):</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">cannot_be_used_as_denominator_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">denominator</span><span class="p">,</span> <span class="n">numerator</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_parse_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># parse some arguments from kwargs</span>
        <span class="k">for</span> <span class="n">arg_name</span><span class="p">,</span> <span class="n">arg_val</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s2">&quot;float_precision&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">float_precision</span> <span class="o">=</span> <span class="n">arg_val</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="ow">in</span> <span class="nb">frozenset</span><span class="p">({</span><span class="s1">&#39;keep_ordering&#39;</span><span class="p">,</span> <span class="s1">&#39;ordering&#39;</span><span class="p">}):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_ordering</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="ow">in</span> <span class="nb">frozenset</span><span class="p">({</span><span class="s2">&quot;info_level&quot;</span><span class="p">,</span> <span class="s2">&quot;output_level&quot;</span><span class="p">}):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">output_level</span> <span class="o">=</span> <span class="n">arg_val</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;agent&quot;</span><span class="p">,</span> <span class="s2">&quot;solver_agent&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">arg_val</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s2">&quot;log_output&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output</span> <span class="o">=</span> <span class="n">arg_val</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s2">&quot;warn_trivial&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_trivial_cts_message_level</span> <span class="o">=</span> <span class="n">arg_val</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s2">&quot;max_repr_len&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_max_repr_len</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s2">&quot;keep_all_exprs&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_all_exprs</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s1">&#39;checker&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_checker_key</span> <span class="o">=</span> <span class="n">arg_val</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">is_string</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;default&#39;</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s1">&#39;full_obj&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_print_full_obj</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s1">&#39;lp_line_size&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lp_line_length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s1">&#39;ignore_names&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_names</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s1">&#39;clean_before_solve&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean_before_solve</span> <span class="o">=</span> <span class="n">arg_val</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s1">&#39;quality_metrics&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_quality_metrics</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="ow">in</span> <span class="nb">frozenset</span><span class="p">({</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">}):</span>
                <span class="c1"># these two are known, no need to rant</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="ow">in</span> <span class="nb">frozenset</span><span class="p">({</span><span class="s2">&quot;parameters&quot;</span><span class="p">,</span> <span class="s1">&#39;cplex_parameters&#39;</span><span class="p">}):</span>
                <span class="c1"># update parameters either from a params object or a dict</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">update_cplex_parameters</span><span class="p">(</span><span class="n">arg_val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg_name</span> <span class="o">==</span> <span class="s1">&#39;cts_by_name&#39;</span><span class="p">:</span>
                <span class="c1"># safe</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;keyword argument: </span><span class="si">{0:s}</span><span class="s2">=</span><span class="si">{1!s}</span><span class="s2"> - is not recognized (ignored)&quot;</span><span class="p">,</span> <span class="n">arg_name</span><span class="p">,</span> <span class="n">arg_val</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;float_precision&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">float_precision</span><span class="p">,</span>
                      <span class="s1">&#39;keep_ordering&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_ordering</span><span class="p">,</span>
                      <span class="s1">&#39;output_level&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_level</span><span class="p">,</span>
                      <span class="s1">&#39;solver_agent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">solver_agent</span><span class="p">,</span>
                      <span class="s1">&#39;log_output&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_output</span><span class="p">,</span>
                      <span class="s1">&#39;warn_trivial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trivial_cts_message_level</span><span class="p">,</span>
                      <span class="s1">&#39;max_repr_len&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_repr_len</span><span class="p">,</span>
                      <span class="s1">&#39;keep_all_exprs&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_all_exprs</span><span class="p">,</span>
                      <span class="s1">&#39;checker&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker_key</span><span class="p">,</span>
                      <span class="s1">&#39;full_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_full_obj</span><span class="p">,</span>
                      <span class="s1">&#39;lp_line_size&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lp_line_length</span><span class="p">,</span>
                      <span class="s1">&#39;ignore_names&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_names</span><span class="p">,</span>
                      <span class="s1">&#39;clean_before_solve&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_before_solve</span>
                      <span class="p">}</span>
        <span class="k">return</span> <span class="n">kwargs_map</span>

    <span class="n">warn_trivial_feasible</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">warn_trivial_infeasible</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">warn_trivial_none</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Init a new Model.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (optional): The name of the model</span>
<span class="sd">            context (optional): The solve context to be used. If no ``context`` is</span>
<span class="sd">                passed, a default context is created.</span>
<span class="sd">            log_output (optional): if ``True``, solver logs are output to</span>
<span class="sd">                stdout. If this is a stream, solver logs are output to that</span>
<span class="sd">                stream object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">_name_generator</span><span class="o">.</span><span class="n">new_symbol</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span> <span class="o">=</span> <span class="n">DefaultErrorHandler</span><span class="p">(</span><span class="n">output_level</span><span class="o">=</span><span class="s1">&#39;warning&#39;</span><span class="p">)</span>

        <span class="c1"># type instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_binary_vartype</span> <span class="o">=</span> <span class="n">BinaryVarType</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_integer_vartype</span> <span class="o">=</span> <span class="n">IntegerVarType</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_continuous_vartype</span> <span class="o">=</span> <span class="n">ContinuousVarType</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_semicontinuous_vartype</span> <span class="o">=</span> <span class="n">SemiContinuousVarType</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_semiinteger_vartype</span> <span class="o">=</span> <span class="n">SemiIntegerVarType</span><span class="p">()</span>

        <span class="c1">#</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allvarctns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allvars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__vars_by_name</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allpwlfuncs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__all_implicit_equiv_cts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_constraint_priority_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_allsos</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_constraints</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_cuts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pwl_counter</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># -- kpis --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solve_hooks</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># debugSolveHook()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mipstarts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># by default, ignore_names is off</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_names</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># clean engine before solve (mip starts)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clean_before_solve</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># default is False: faster</span>

        <span class="c1"># expression ordering</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_ordering</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># -- float formats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_float_precision</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_float_meta_format</span> <span class="o">=</span> <span class="s1">&#39;{</span><span class="si">%d</span><span class="s1">:.3f}&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_printer</span> <span class="o">=</span> <span class="n">_NumPrinter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_float_precision</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_environment</span><span class="p">()</span>
        <span class="n">self_env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span>

        <span class="c1"># init context</span>
        <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="n">make_default_context</span><span class="p">(</span><span class="n">_env</span><span class="o">=</span><span class="n">self_env</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span>
            <span class="c1"># a flag to indicate whether ot not parameters have been version-checked.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synced_params</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_engine_factory</span> <span class="o">=</span> <span class="n">EngineFactory</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">self_env</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;docloud_context&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;Model construction with DOcloudContext is deprecated, use initializer with docplex.mp.context.Context instead.&quot;</span><span class="p">,</span>
                <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># maximum length for expression in repr strings...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_repr_len</span> <span class="o">=</span> <span class="mf">1e+10</span>

        <span class="c1"># control whether to warn about trivial constraints</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_trivial_cts_message_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_trivial_infeasible</span>

        <span class="c1"># internal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_all_exprs</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># use False to get fast clone...with the risk of side effects...</span>

        <span class="c1"># full objective lp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print_full_obj</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># lp line size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lp_line_length</span> <span class="o">=</span> <span class="mi">80</span>

        <span class="c1"># checker key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker_key</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span>

        <span class="c1"># quality_metrics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quality_metrics</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># rond solution or not</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_round_solution</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_round_function</span> <span class="o">=</span> <span class="n">round_nearest_towards_infinity1</span>

        <span class="c1"># update from kwargs, before the actual inits.</span>
        <span class="c1"># pop cts_by name before parse kwargs</span>
        <span class="n">_enable_cts_by_name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;cts_by_name&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="c1"># =======================================================</span>
        <span class="c1"># parse without cts_by_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_kwargs</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">_enable_cts_by_name</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_mip_for_mipstarts</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span> <span class="o">=</span> <span class="n">get_typechecker</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_checker_key</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_handler</span><span class="p">)</span>

        <span class="c1"># -- scopes</span>
        <span class="n">name_offset</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_var_scope</span> <span class="o">=</span> <span class="n">_IndexScope</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">,</span> <span class="s2">&quot;var&quot;</span><span class="p">,</span>
                                      <span class="n">cplex_scope</span><span class="o">=</span><span class="n">CplexScope</span><span class="o">.</span><span class="n">VAR_SCOPE</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">name_offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linct_scope</span> <span class="o">=</span> <span class="n">_IndexScope</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_linear_constraints</span><span class="p">,</span> <span class="s2">&quot;linear constraint&quot;</span><span class="p">,</span>
                                        <span class="n">cplex_scope</span><span class="o">=</span><span class="n">CplexScope</span><span class="o">.</span><span class="n">LINEAR_CT_SCOPE</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">name_offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logical_scope</span> <span class="o">=</span> <span class="n">_IndexScope</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iter_all_logical_constraints</span><span class="p">,</span>
                                          <span class="s2">&quot;logical constraint&quot;</span><span class="p">,</span>
                                          <span class="n">cplex_scope</span><span class="o">=</span><span class="n">CplexScope</span><span class="o">.</span><span class="n">IND_CT_SCOPE</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">name_offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quadct_scope</span> <span class="o">=</span> <span class="n">_IndexScope</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_quadratic_constraints</span><span class="p">,</span> <span class="s2">&quot;quadratic constraint&quot;</span><span class="p">,</span>
                                         <span class="n">cplex_scope</span><span class="o">=</span><span class="n">CplexScope</span><span class="o">.</span><span class="n">QUAD_CT_SCOPE</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">name_offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwl_scope</span> <span class="o">=</span> <span class="n">_IndexScope</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_pwl_constraints</span><span class="p">,</span> <span class="s2">&quot;piecewise constraint&quot;</span><span class="p">,</span>
                                      <span class="n">cplex_scope</span><span class="o">=</span><span class="n">CplexScope</span><span class="o">.</span><span class="n">PWL_CT_SCOPE</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">name_offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_var_scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linct_scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logical_scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadct_scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwl_scope</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctscopes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_linct_scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logical_scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadct_scope</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwl_scope</span><span class="p">]</span>

        <span class="c1"># init engine</span>
        <span class="n">engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_new_engine_from_agent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solver_agent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span> <span class="o">=</span> <span class="n">ModelFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">docplex.mp.quadfact</span> <span class="k">import</span> <span class="n">QuadFactory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_qfactory</span> <span class="o">=</span> <span class="n">QuadFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
        <span class="c1"># after parse kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aggregator</span> <span class="o">=</span> <span class="n">ModelAggregator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_qfactory</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solve_details</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># all the following must be placed after an engine has been set.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span> <span class="o">=</span> <span class="n">MultiObjective</span><span class="o">.</span><span class="n">new_empty</span><span class="p">()</span>

        <span class="c1"># engine log level</span>
        <span class="n">engineLogLevel</span> <span class="o">=</span> <span class="n">get_environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="s2">&quot;oaas.engineLogLevel&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">engineLogLevel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">engineLogLevel</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;FINE&quot;</span><span class="p">,</span> <span class="s2">&quot;FINER&quot;</span><span class="p">,</span> <span class="s2">&quot;FINEST&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">datacheck</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">sense</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">default_objective_sense</span><span class="p">(),</span>
                           <span class="n">expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_new_default_objective_expr</span><span class="p">())</span>

        <span class="n">model_hook_fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">model_build_hook</span>
        <span class="k">if</span> <span class="n">model_hook_fn</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">model_hook_fn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">me</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Error in model_build_hook: </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">me</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">_sync_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="c1"># INTERNAL: execute only once</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_cplex</span><span class="p">():</span>
            <span class="n">params</span><span class="o">.</span><span class="n">connect_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">self_env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span>
            <span class="n">self_cplex_parameters_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">cplex_parameters</span><span class="o">.</span><span class="n">cplex_version</span>
            <span class="n">self_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
            <span class="n">installed_cplex_version</span> <span class="o">=</span> <span class="n">self_env</span><span class="o">.</span><span class="n">cplex_version</span>
            <span class="c1"># installed version is different from parameters: reset all defaults</span>
            <span class="k">if</span> <span class="n">installed_cplex_version</span> <span class="o">!=</span> <span class="n">self_cplex_parameters_version</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="c1"># cplex is more recent than parameters. must update defaults.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;reset parameter defaults, from parameter version: </span><span class="si">{0}</span><span class="s2"> to installed version: </span><span class="si">{1}</span><span class="s2">&quot;</span>  <span class="c1"># pragma: no cover</span>
                        <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">self_cplex_parameters_version</span><span class="p">,</span> <span class="n">installed_cplex_version</span><span class="p">))</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">resets</span> <span class="o">=</span> <span class="n">self_engine</span><span class="o">.</span><span class="n">_sync_parameter_defaults_from_cplex</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">if</span> <span class="n">resets</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="n">resets</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">short_name</span> <span class="o">!=</span> <span class="s1">&#39;randomseed&#39;</span><span class="p">:</span>  <span class="c1"># usual practice to change randomseed at each version</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;parameter changed, name: </span><span class="si">{0}</span><span class="s1">, old default: </span><span class="si">{1}</span><span class="s1">, new default: </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="p">,</span>
                                      <span class="n">p</span><span class="o">.</span><span class="n">short_name</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_solve_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">hook</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_solve_hooks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">infinity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the numerical value used as the upper bound for continuous decision variables.</span>

<span class="sd">        Note:</span>
<span class="sd">            CPLEX usually sets this limit to 1e+20.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">get_infinity</span><span class="p">()</span>


<div class="viewcode-block" id="Model.get_cplex"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_cplex">[docs]</a>    <span class="k">def</span> <span class="nf">get_cplex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">msgfn</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the instance of Cplex used by the model, if any.</span>

<span class="sd">        In case no local installation of CPLEX can be found, this method either raises an exception,</span>
<span class="sd">        if parameter `do_raise` is True, or else returns None.</span>

<span class="sd">        :param do_raise: An optional flag: if True, raise an exception when no Cplex instance</span>
<span class="sd">            is available, otherwise return None.</span>

<span class="sd">        :return: an instance of Cplex, or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cpx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">get_cplex</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">cpx</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">cpx</span>

        <span class="k">except</span> <span class="n">DOcplexException</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">do_raise</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">msgfn</span><span class="p">:</span>
                <span class="n">raise_msg</span> <span class="o">=</span> <span class="n">msgfn</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">raise_msg</span> <span class="o">=</span> <span class="s2">&quot;CPLEX library not found - No instance of Cplex is available.&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="n">raise_msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cplex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the instance of Cplex used by the model, if any.</span>

<span class="sd">        In case no local installation of CPLEX can be found, this method raises an exception.,</span>

<span class="sd">        :return: a Cplex instance.</span>

<span class="sd">        *New in version 2.15*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cplex</span><span class="p">(</span><span class="n">do_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">has_cplex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cplex</span><span class="p">(</span><span class="n">do_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_read_cplex_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">extension</span><span class="p">,</span> <span class="n">cpx_read_fn</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">cpx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cplex</span><span class="p">(</span><span class="n">do_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">msgfn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;CPLEX library not found, cannot read CPLEX </span><span class="si">{0}</span><span class="s2"> file: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">))</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">check_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">expected_extensions</span><span class="o">=</span><span class="p">(</span><span class="n">extension</span><span class="p">,))</span>
        <span class="n">cpx_read_fn</span><span class="p">(</span><span class="n">cpx</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

<div class="viewcode-block" id="Model.read_basis_file"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.read_basis_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_basis_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bas_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Read a CPLEX basis status file.</span>

<span class="sd">        This method requires that the CPLEX library is installed.</span>

<span class="sd">        :param bas_path: the path of a basis file (extension is &#39;.bas&#39;)</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read_cplex_file</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;basis&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">bas_path</span><span class="p">,</span>
                              <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;.bas&#39;</span><span class="p">,</span>
                              <span class="n">cpx_read_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cpx_</span><span class="p">,</span> <span class="n">path_</span><span class="p">:</span> <span class="n">cpx_</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">read_basis</span><span class="p">(</span><span class="n">path_</span><span class="p">))</span></div>


<div class="viewcode-block" id="Model.read_priority_order_file"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.read_priority_order_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_priority_order_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ord_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Read a CPLEX priority order file.</span>

<span class="sd">        This method requires that the CPLEX library is installed.</span>

<span class="sd">        :param ord_path: the path of a priority order file (extension is &#39;.ord&#39;)</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read_cplex_file</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;priority order&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">ord_path</span><span class="p">,</span>
                              <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;.ord&#39;</span><span class="p">,</span>
                              <span class="n">cpx_read_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cpx_</span><span class="p">,</span> <span class="n">path_</span><span class="p">:</span> <span class="n">cpx_</span><span class="o">.</span><span class="n">order</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">path_</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.export_priority_order_file"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.export_priority_order_file">[docs]</a>    <span class="k">def</span> <span class="nf">export_priority_order_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ord_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Exports priority order fi a CPLEX priority order file.</span>

<span class="sd">        This method requires that the CPLEX library is installed.</span>

<span class="sd">        :param ord_path: the path of a priority order file (extension is &#39;.ord&#39;)</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read_cplex_file</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;priority order&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">ord_path</span><span class="p">,</span>
                              <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;.ord&#39;</span><span class="p">,</span>
                              <span class="n">cpx_read_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cpx_</span><span class="p">,</span> <span class="n">path_</span><span class="p">:</span> <span class="n">cpx_</span><span class="o">.</span><span class="n">order</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">path_</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">_check_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">new_name</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39; &#39;</span> <span class="ow">in</span> <span class="n">new_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Model name contains whitespaces: |</span><span class="si">{0:s}</span><span class="s2">|&quot;</span><span class="p">,</span> <span class="n">new_name</span><span class="p">)</span>

    <span class="c1"># adjust the maximum length of repr.. strings</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_repr_len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_repr_len</span>

    <span class="nd">@max_repr_len</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">max_repr_len</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_repr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_repr_len</span> <span class="o">=</span> <span class="n">max_repr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">keep_ordering</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_ordering</span>

    <span class="nd">@keep_ordering</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">keep_ordering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ordered</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">b_ordered</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">ordered</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_ordering</span> <span class="o">=</span> <span class="n">b_ordered</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">update_ordering</span><span class="p">(</span><span class="n">b_ordered</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_qfactory</span><span class="o">.</span><span class="n">update_ordering</span><span class="p">(</span><span class="n">b_ordered</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ignore_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property is used to ignore all names in the model.</span>

<span class="sd">         This flag indicates whether names are used or not.</span>
<span class="sd">         When set to True, all names are ignored. This could lead to performance </span>
<span class="sd">         improvements when building large models.</span>
<span class="sd">         The default value of this flag is False. To change its value, add it as</span>
<span class="sd">         keyword argument when creating the Model instance as in:</span>

<span class="sd">            &gt;&gt;&gt; m = Model(name=&quot;my_model&quot;, ignore_names=True)</span>

<span class="sd">        Note:</span>
<span class="sd">            Once a model instance has been created with `ignore_names=True`, there is no way to restore its names.</span>
<span class="sd">            This flag only allows to enable or disable name generation while building the model.</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_names</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">float_precision</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property is used to get or set the float precision of the model.</span>

<span class="sd">        The float precision is an integer number of digits, used</span>
<span class="sd">        in printing the solution and objective.</span>
<span class="sd">        This number of digits is used for variables and expressions which are not discrete.</span>
<span class="sd">        Discrete variables and objectives are printed with no decimal digits.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_precision</span>

    <span class="nd">@float_precision</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">float_precision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nb_digits</span><span class="p">):</span>
        <span class="n">used_digits</span> <span class="o">=</span> <span class="n">nb_digits</span>
        <span class="k">if</span> <span class="n">nb_digits</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Negative float precision given: </span><span class="si">{0}</span><span class="s2">, using 0 instead&quot;</span><span class="p">,</span> <span class="n">nb_digits</span><span class="p">)</span>
            <span class="n">used_digits</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">max_digits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">max_nb_digits</span>
            <span class="n">bitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">bitness</span>
            <span class="k">if</span> <span class="n">nb_digits</span> <span class="o">&gt;</span> <span class="n">max_digits</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Given precision of </span><span class="si">{0:d}</span><span class="s2"> goes beyond </span><span class="si">{1:d}</span><span class="s2">-bit capability, using maximum: </span><span class="si">{2:d}</span><span class="s2">&quot;</span><span class="o">.</span>
                             <span class="nb">format</span><span class="p">(</span><span class="n">nb_digits</span><span class="p">,</span> <span class="n">bitness</span><span class="p">,</span> <span class="n">max_digits</span><span class="p">))</span>
                <span class="n">used_digits</span> <span class="o">=</span> <span class="n">max_digits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_float_precision</span> <span class="o">=</span> <span class="n">used_digits</span>
        <span class="c1"># recompute float format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_float_meta_format</span> <span class="o">=</span> <span class="s1">&#39;{</span><span class="si">%%</span><span class="s1">d:.</span><span class="si">%d</span><span class="s1">f}&#39;</span> <span class="o">%</span> <span class="n">nb_digits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_printer</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="n">nb_digits</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">quality_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This flag controls whether CPLEX quality metrics are stored into the solve details.</span>
<span class="sd">         The default is not to store quality metrics.</span>

<span class="sd">         *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quality_metrics</span>

    <span class="nd">@quality_metrics</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">quality_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_metrics</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quality_metrics</span> <span class="o">=</span> <span class="n">use_metrics</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clean_before_solve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_before_solve</span>

    <span class="nd">@clean_before_solve</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">clean_before_solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">must_clean</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clean_before_solve</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">must_clean</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">round_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This flag controls whether integer and discrete variable values are rounded in solutions, or not.</span>
<span class="sd">            If not rounded, it may happen that solution value for a binary variable returns 0.99999.</span>
<span class="sd">         The default is to round discrete values.</span>

<span class="sd">         *New in version 2.15*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_round_solution</span>

    <span class="nd">@round_solution</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">round_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">do_round</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_round_solution</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">do_round</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_round_element_value_if_necessary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="n">elt_value</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_solution</span> <span class="ow">and</span> <span class="n">elt_value</span> <span class="ow">and</span> <span class="n">elt</span><span class="o">.</span><span class="n">is_discrete</span><span class="p">()</span> <span class="ow">and</span> <span class="n">elt_value</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">elt_value</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_round_function</span><span class="p">(</span><span class="n">elt_value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">elt_value</span>

    <span class="k">def</span> <span class="nf">has_cts_by_name_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">enable_cts_by_name_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_cts_name_dir</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">solved_stopped_by_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_details</span>
        <span class="k">return</span> <span class="n">sd</span> <span class="ow">and</span> <span class="n">sd</span><span class="o">.</span><span class="n">has_hit_limit</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property is used to get/set the time limit for this model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_limit_parameter</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="nd">@time_limit</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_time_limit</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_time_limit</span><span class="p">(</span><span class="n">new_time_limit</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time_limit_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">timelimit</span>

<div class="viewcode-block" id="Model.get_time_limit"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_time_limit">[docs]</a>    <span class="k">def</span> <span class="nf">get_time_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns:</span>
<span class="sd">            The time limit for the model.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_limit_parameter</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>

<div class="viewcode-block" id="Model.set_time_limit"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.set_time_limit">[docs]</a>    <span class="k">def</span> <span class="nf">set_time_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_limit</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set a time limit for solve operations.</span>

<span class="sd">        Args:</span>
<span class="sd">            time_limit: The new time limit; must be a positive number.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">time_limit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">time_limit</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Negative time limit: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time_limit</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">time_limit</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Time limit too small: </span><span class="si">{0}</span><span class="s2"> - using 1 instead&quot;</span><span class="p">,</span> <span class="n">time_limit</span><span class="p">)</span>
            <span class="n">time_limit</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">time_limit_parameter</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">time_limit</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lp_line_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property lets you get or set the maximum line length of LP files generated by DOcplex.</span>
<span class="sd">        The default is 80.</span>

<span class="sd">         *New in version 2.11*</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lp_line_length</span>

    <span class="nd">@lp_line_length</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">lp_line_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_length</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">new_length</span> <span class="o">&gt;=</span> <span class="mi">70</span> <span class="ow">and</span> <span class="n">new_length</span> <span class="o">&lt;=</span> <span class="mi">512</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lp_line_length</span> <span class="o">=</span> <span class="n">new_length</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lpz</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">new_length</span><span class="p">,</span> <span class="mi">70</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; LP line size set to: </span><span class="si">{0}</span><span class="s2">, should be in [70..512], </span><span class="si">{1}</span><span class="s2"> was passed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lpz</span><span class="p">,</span> <span class="n">new_length</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lp_line_length</span> <span class="o">=</span> <span class="n">lpz</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solver_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">agent</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">error_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the current solution of the model or None if the model has not yet been solved</span>
<span class="sd">        or if the last solve has failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span>

    <span class="k">def</span> <span class="nf">_get_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span>

    <span class="k">def</span> <span class="nf">new_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_value_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">objective_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_solution</span><span class="p">(</span><span class="n">var_value_dict</span><span class="o">=</span><span class="n">var_value_dict</span><span class="p">,</span>
                                           <span class="n">objective_value</span><span class="o">=</span><span class="n">objective_value</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">restore_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sol</span><span class="p">,</span> <span class="n">restore_all</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span> <span class="o">!=</span> <span class="n">sol</span><span class="o">.</span><span class="n">model</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Model.restore_solution(): Expecting solution attached to model </span><span class="si">{0}</span><span class="s2">, but attached to </span><span class="si">{1}</span><span class="s2">&quot;</span>
                           <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">sol</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="c1"># check solution is linked to this model</span>
            <span class="n">sol</span><span class="o">.</span><span class="n">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">restore_all</span><span class="o">=</span><span class="n">restore_all</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Model.restore_solution(): Expecting solution, </span><span class="si">{0!r}</span><span class="s2"> was passed&quot;</span><span class="p">,</span> <span class="n">sol</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fatal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fatal_ce_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span><span class="o">.</span><span class="n">fatal_limits_exceeded</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_handler</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span><span class="o">.</span><span class="n">get_output_level</span><span class="p">()</span>

    <span class="nd">@output_level</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">output_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_output_level</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_handler</span><span class="o">.</span><span class="n">set_output_level</span><span class="p">(</span><span class="n">new_output_level</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_quiet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_handler</span><span class="o">.</span><span class="n">set_quiet</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_log_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output</span> <span class="o">=</span> <span class="n">out</span>
        <span class="n">outs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output_as_stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">set_streams</span><span class="p">(</span><span class="n">outs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">log_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output_as_stream</span>

    <span class="nd">@log_output</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">log_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_log_output</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_log_output_as_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">set_streams</span><span class="p">(</span><span class="n">outs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_logged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output_as_stream</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

<div class="viewcode-block" id="Model.clear"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Clears the model of all modeling objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clear_internal</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_clear_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">terminate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allvars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allvarctns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__vars_by_name</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allpwlfuncs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_kpis</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_solve_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unknown_status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mipstarts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clear_scopes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allsos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwl_counter</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_constraints</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_cuts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">terminate</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">sense</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">default_objective_sense</span><span class="p">(),</span>
                               <span class="n">expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_new_default_objective_expr</span><span class="p">())</span>
            <span class="c1"># set a brand new engine....</span>
            <span class="n">old_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_engine</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">old_engine</span><span class="p">:</span>
                <span class="n">old_engine</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_engine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_make_new_engine_from_agent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solver_agent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_terminate_engine</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_clear_scopes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">a_scope</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scopes</span><span class="p">:</span>
            <span class="n">a_scope</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_checker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checker_key</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="k">if</span> <span class="n">checker_key</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker_key</span><span class="p">:</span>
            <span class="n">new_checker</span> <span class="o">=</span> <span class="n">get_typechecker</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">checker_key</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_handler</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker_key</span> <span class="o">=</span> <span class="n">checker_key</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span> <span class="o">=</span> <span class="n">new_checker</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_aggregator</span><span class="o">.</span><span class="n">_checker</span> <span class="o">=</span> <span class="n">new_checker</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_checker</span> <span class="o">=</span> <span class="n">new_checker</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_qfactory</span><span class="o">.</span><span class="n">_checker</span> <span class="o">=</span> <span class="n">new_checker</span>

    <span class="k">def</span> <span class="nf">_make_new_engine_from_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver_agent</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">new_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine_factory</span><span class="o">.</span><span class="n">new_engine</span><span class="p">(</span><span class="n">solver_agent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
        <span class="n">new_engine</span><span class="o">.</span><span class="n">set_streams</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output_as_stream</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_engine</span>

    <span class="k">def</span> <span class="nf">_set_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e2</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">e2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">update_engine</span><span class="p">(</span><span class="n">e2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_terminate_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">old_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
        <span class="k">if</span> <span class="n">old_engine</span><span class="p">:</span>
            <span class="c1"># dispose of old engine.</span>
            <span class="n">old_engine</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
            <span class="c1"># from Ryan</span>
            <span class="k">del</span> <span class="n">old_engine</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="kc">None</span>


    <span class="k">def</span> <span class="nf">set_new_engine_from_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_agent</span><span class="p">):</span>
        <span class="n">self_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span>
        <span class="c1"># set new agent</span>
        <span class="k">if</span> <span class="n">new_agent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_agent</span> <span class="o">=</span> <span class="n">self_context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">agent</span>
        <span class="k">elif</span> <span class="n">is_string</span><span class="p">(</span><span class="n">new_agent</span><span class="p">):</span>
            <span class="n">self_context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">new_agent</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;unexpected value for agent: </span><span class="si">{0!r}</span><span class="s1">, expecting string or None&#39;</span><span class="p">,</span> <span class="n">new_agent</span><span class="p">)</span>
        <span class="n">new_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_new_engine_from_agent</span><span class="p">(</span><span class="n">new_agent</span><span class="p">,</span> <span class="n">self_context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_engine</span><span class="p">(</span><span class="n">new_engine</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solves_with</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">name</span>


    <span class="k">def</span> <span class="nf">get_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL for testing</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>

    <span class="k">def</span> <span class="nf">ensure_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># defined for compatibility with AbstractModel</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="Model.print_information"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.print_information">[docs]</a>    <span class="k">def</span> <span class="nf">print_information</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Prints general informational statistics on the model.</span>

<span class="sd">        Prints the number of variables and their breakdown by type.</span>
<span class="sd">        Prints the number of constraints and their breakdown by type.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">print_information</span><span class="p">()</span>

        <span class="c1"># --- annotations</span>
        <span class="n">self_anno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span>
        <span class="k">if</span> <span class="n">self_anno</span><span class="p">:</span>
            <span class="n">anno_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_annotation_stats</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; - annotations: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">self_anno</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   - </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">: </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cpx</span><span class="o">.</span><span class="n">descr</span><span class="p">,</span> <span class="n">anno_stats</span><span class="p">[</span><span class="n">cpx</span><span class="p">])</span> <span class="k">for</span> <span class="n">cpx</span> <span class="ow">in</span> <span class="n">CplexScope</span> <span class="k">if</span> <span class="n">cpx</span> <span class="ow">in</span> <span class="n">anno_stats</span><span class="p">)))</span>


        <span class="c1"># --- parameters</span>
        <span class="n">self_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">_get_raw_cplex_parameters</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">self_params</span> <span class="ow">and</span> <span class="n">self_params</span><span class="o">.</span><span class="n">has_nondefaults</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; - parameters:&quot;</span><span class="p">)</span>
            <span class="n">self_params</span><span class="o">.</span><span class="n">print_information</span><span class="p">(</span><span class="n">indent_level</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># 3 for &quot; - &quot; + 2 = 5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; - parameters: defaults&quot;</span><span class="p">)</span>

        <span class="c1"># ------------------- objective</span>
        <span class="n">minmax</span> <span class="o">=</span> <span class="s2">&quot;minimize&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_minimized</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;maximize&quot;</span>
        <span class="n">obj_s</span> <span class="o">=</span> <span class="n">minmax</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_multi_objective</span><span class="p">():</span>
            <span class="n">n_objs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_multi_objective_exprs</span>
            <span class="n">obj_s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> multiple[</span><span class="si">{1}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">minmax</span><span class="p">,</span> <span class="n">n_objs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_optimized</span><span class="p">():</span>
            <span class="n">obj_s</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_expr</span><span class="o">.</span><span class="n">is_quad_expr</span><span class="p">():</span>
                    <span class="n">obj_s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> quadratic&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">minmax</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; - objective: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj_s</span><span class="p">))</span>

        <span class="c1"># ------------------- problem type</span>
        <span class="n">cpx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cplex</span><span class="p">(</span><span class="n">do_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cpx</span><span class="p">:</span>
            <span class="n">cpx_probtype</span> <span class="o">=</span> <span class="n">cpx</span><span class="o">.</span><span class="n">get_problem_type</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; - problem type is: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">int_probtype_to_string</span><span class="p">(</span><span class="n">cpx_probtype</span><span class="p">)))</span></div>




    <span class="k">def</span> <span class="nf">_get_cplex_problem_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;unknown&quot;</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">cpx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cplex</span><span class="p">(</span><span class="n">do_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cpx</span><span class="p">:</span>
            <span class="n">cpx_probtype_code</span> <span class="o">=</span> <span class="n">cpx</span><span class="o">.</span><span class="n">get_problem_type</span><span class="p">()</span>  <span class="c1"># this is an int</span>
            <span class="k">return</span> <span class="n">int_probtype_to_string</span><span class="p">(</span><span class="n">cpx_probtype_code</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">fallback</span>

    <span class="k">def</span> <span class="nf">_is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="mi">0</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_constraints</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_variables</span>

    <span class="k">def</span> <span class="nf">__notify_new_model_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descr</span><span class="p">,</span>
                                  <span class="n">mobj</span><span class="p">,</span> <span class="n">mindex</span><span class="p">,</span> <span class="n">mobj_name</span><span class="p">,</span>
                                  <span class="n">name_dir</span><span class="p">,</span> <span class="n">idx_scope</span><span class="p">,</span>
                                  <span class="n">is_name_safe</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Notifies the return af an object being create on the engine.</span>
<span class="sd">        :param descr: A string describing the type of the object being created (e.g. Constraint, Variable).</span>
<span class="sd">        :param mobj:  The newly created modeling object.</span>
<span class="sd">        :param mindex: The index as returned by the engine.</span>
<span class="sd">        :param name_dir: The directory of objects by name (e.g. name -&gt; constraint directory).</span>
<span class="sd">        :param idx_scope:  The index scope</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mobj</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">mindex</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name_dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mobj_name</span> <span class="o">=</span> <span class="n">mobj_name</span> <span class="ow">or</span> <span class="n">mobj</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">mobj_name</span><span class="p">:</span>
                <span class="c1"># in some cases, names are checked before register</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_name_safe</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">mobj_name</span> <span class="ow">in</span> <span class="n">name_dir</span><span class="p">:</span>
                        <span class="n">old_name_value</span> <span class="o">=</span> <span class="n">name_dir</span><span class="p">[</span><span class="n">mobj_name</span><span class="p">]</span>
                        <span class="c1"># Duplicate constraint name: foo</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Duplicate </span><span class="si">{0}</span><span class="s2"> name: </span><span class="si">{1}</span><span class="s2"> already used for </span><span class="si">{2!r}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">descr</span><span class="p">,</span> <span class="n">mobj_name</span><span class="p">,</span> <span class="n">old_name_value</span><span class="p">)</span>

                <span class="n">name_dir</span><span class="p">[</span><span class="n">mobj_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">mobj</span>

        <span class="c1"># store in idx dir if any</span>
        <span class="k">if</span> <span class="n">idx_scope</span><span class="p">:</span>
            <span class="n">idx_scope</span><span class="o">.</span><span class="n">notify_obj_index</span><span class="p">(</span><span class="n">mobj</span><span class="p">,</span> <span class="n">mindex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_register_one_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">var_index</span><span class="p">,</span> <span class="n">var_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__notify_new_var</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">var_index</span><span class="p">,</span> <span class="n">var_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allvars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>

    <span class="c1"># @profile</span>
    <span class="k">def</span> <span class="nf">_register_block_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allvars</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">allnames</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">allnames</span><span class="p">:</span>
            <span class="n">varname_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vars_by_name</span>
            <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">var_index</span><span class="p">,</span> <span class="n">var_name</span> <span class="ow">in</span> <span class="n">izip</span><span class="p">(</span><span class="n">allvars</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">allnames</span><span class="p">):</span>
                <span class="n">var</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="n">var_index</span>
                <span class="k">if</span> <span class="n">var_name</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">var_name</span> <span class="ow">in</span> <span class="n">varname_dict</span><span class="p">:</span>
                        <span class="n">old_name_value</span> <span class="o">=</span> <span class="n">varname_dict</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span>
                        <span class="c1"># Duplicate constraint name: foo</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Duplicate variable name: </span><span class="si">{0}</span><span class="s2"> already used for </span><span class="si">{1!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">var_name</span><span class="p">,</span> <span class="n">old_name_value</span><span class="p">)</span>
                    <span class="n">varname_dict</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">var_index</span> <span class="ow">in</span> <span class="n">izip</span><span class="p">(</span><span class="n">allvars</span><span class="p">,</span> <span class="n">indices</span><span class="p">):</span>
                <span class="n">var</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="n">var_index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allvars</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">allvars</span><span class="p">)</span>
        <span class="c1"># update variable scope once</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_var_scope</span><span class="o">.</span><span class="n">notify_obj_indices</span><span class="p">(</span><span class="n">objs</span><span class="o">=</span><span class="n">allvars</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="n">indices</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__notify_new_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">var_index</span><span class="p">,</span> <span class="n">var_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__notify_new_model_object</span><span class="p">(</span><span class="s2">&quot;variable&quot;</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">var_index</span><span class="p">,</span> <span class="n">var_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vars_by_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_scope</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_register_one_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ct_index</span><span class="p">,</span> <span class="n">is_ctname_safe</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        INTERNAL</span>
<span class="sd">        :param ct: The new constraint to register.</span>
<span class="sd">        :param ct_index: The index as returned by the engine.</span>
<span class="sd">        :param is_ctname_safe: True if ct name has been checked for duplicates already.</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scope</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">_get_index_scope</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__notify_new_model_object</span><span class="p">(</span>
            <span class="s2">&quot;constraint&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ct_index</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span>
            <span class="n">is_name_safe</span><span class="o">=</span><span class="n">is_ctname_safe</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_ensure_cts_name_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL: make sure the constraint name dir is present.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span> <span class="o">=</span> <span class="p">{</span><span class="n">ct</span><span class="o">.</span><span class="n">get_name</span><span class="p">():</span> <span class="n">ct</span> <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_constraints</span><span class="p">()</span> <span class="k">if</span> <span class="n">ct</span><span class="o">.</span><span class="n">has_user_name</span><span class="p">()}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span>

    <span class="k">def</span> <span class="nf">_register_block_cts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">cts</span><span class="p">,</span> <span class="n">indices</span><span class="p">):</span>
        <span class="c1"># INTERNAL: assert len(cts) == len(indices)</span>
        <span class="n">ct_name_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span>
        <span class="c1"># --</span>
        <span class="k">if</span> <span class="n">ct_name_map</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ct_index</span> <span class="ow">in</span> <span class="n">izip</span><span class="p">(</span><span class="n">cts</span><span class="p">,</span> <span class="n">indices</span><span class="p">):</span>
                <span class="n">ct</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">ct_index</span><span class="p">)</span>
                <span class="n">ct_name</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ct_name</span><span class="p">:</span>
                    <span class="n">ct_name_map</span><span class="p">[</span><span class="n">ct_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ct</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ct_index</span> <span class="ow">in</span> <span class="n">izip</span><span class="p">(</span><span class="n">cts</span><span class="p">,</span> <span class="n">indices</span><span class="p">):</span>
                <span class="n">ct</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="n">ct_index</span>

        <span class="n">scope</span><span class="o">.</span><span class="n">notify_obj_indices</span><span class="p">(</span><span class="n">cts</span><span class="p">,</span> <span class="n">indices</span><span class="p">)</span>
        <span class="c1"># extend container faster than append()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_register_implicit_equivalence_ct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eqct</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__all_implicit_equiv_cts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eqct</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iter_implicit_equivalence_cts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__all_implicit_equiv_cts</span><span class="p">)</span>

    <span class="c1"># iterators</span>
    <span class="k">def</span> <span class="nf">iter_var_containers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__allvarctns</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_var_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctn</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allvarctns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctn</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_is_binary_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">dvar</span><span class="o">.</span><span class="n">_vartype</span><span class="o">.</span><span class="n">get_cplex_typecode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span>

    <span class="k">def</span> <span class="nf">_is_integer_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">dvar</span><span class="o">.</span><span class="n">_vartype</span><span class="o">.</span><span class="n">get_cplex_typecode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;I&#39;</span>

    <span class="k">def</span> <span class="nf">_is_continuous_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">dvar</span><span class="o">.</span><span class="n">_vartype</span><span class="o">.</span><span class="n">get_cplex_typecode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span>

    <span class="k">def</span> <span class="nf">_is_semicontinuous_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">dvar</span><span class="o">.</span><span class="n">_vartype</span><span class="o">.</span><span class="n">get_cplex_typecode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;S&#39;</span>

    <span class="k">def</span> <span class="nf">_is_semiinteger_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">dvar</span><span class="o">.</span><span class="n">_vartype</span><span class="o">.</span><span class="n">get_cplex_typecode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;N&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_generated_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">is_generated</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_count_variables_w_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpxcode</span><span class="p">):</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_vartype</span><span class="o">.</span><span class="n">get_cplex_typecode</span><span class="p">()</span> <span class="o">==</span> <span class="n">cpxcode</span><span class="p">:</span>
                <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">cnt</span>

    <span class="k">def</span> <span class="nf">_iter_variables_w_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpxcode</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_vartype</span><span class="o">.</span><span class="n">get_cplex_typecode</span><span class="p">()</span> <span class="o">==</span> <span class="n">cpxcode</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">v</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of decision variables, all types combined.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__allvars</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_binary_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of binary decision variables added to the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_variables_w_code</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_integer_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of integer decision variables added to the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_variables_w_code</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_continuous_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of continuous decision variables added to the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_variables_w_code</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_semicontinuous_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of semi-continuous decision variables added to the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_variables_w_code</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_semiinteger_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of semi-integer decision variables added to the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_variables_w_code</span><span class="p">(</span><span class="s1">&#39;N&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_user_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_user_variables</span><span class="p">())</span>

    <span class="c1"># def _has_discrete_var(self):</span>
    <span class="c1">#     # INTERNAL</span>
    <span class="c1">#     return any(v.is_discrete for v in self.iter_variables())</span>

    <span class="k">def</span> <span class="nf">_contains_discrete_artefacts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="p">,</span> <span class="s2">&quot;_cached_justifier_discrete_var&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_cached_justifier_discrete_var</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allsos</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwl_counter</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_vartype</span><span class="o">.</span><span class="n">get_cplex_typecode</span><span class="p">()</span> <span class="ow">in</span> <span class="s1">&#39;IBNS&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_cached_justifier_discrete_var</span> <span class="o">=</span> <span class="n">v</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_clear_cached_discrete_var</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lfactory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">lfactory</span><span class="p">,</span> <span class="s2">&quot;_cached_justifier_discrete_var&quot;</span><span class="p">):</span>
            <span class="n">lfactory</span><span class="o">.</span><span class="n">_cached_justifier_discrete_var</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_has_piecewise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pwl_counter</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">_solved_as_mip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL: is the model solved as mip (incl. engine status)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contains_discrete_artefacts</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">solved_as_mip</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_solved_as_lp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL: is the model solved as mip (incl. engine status)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_cplex</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_engine</span><span class="p">()</span><span class="o">.</span><span class="n">solved_as_lp</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contains_discrete_artefacts</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">solves_as_qxp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_quadratic_constraint</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span><span class="o">.</span><span class="n">is_quad_expr</span><span class="p">()</span>

<div class="viewcode-block" id="Model.get_statistics"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_statistics">[docs]</a>    <span class="k">def</span> <span class="nf">get_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns statistics on the model.</span>

<span class="sd">        :returns: A new instance of :class:`docplex.mp.model_stats.ModelStatistics`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ModelStatistics</span><span class="o">.</span><span class="n">_make_new_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="n">statistics</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_statistics</span><span class="p">)</span>

<div class="viewcode-block" id="Model.iter_pwl_functions"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_pwl_functions">[docs]</a>    <span class="k">def</span> <span class="nf">iter_pwl_functions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all the piecewise linear functions in the model.</span>

<span class="sd">        Returns the PWL functions in the order they were added to the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__allpwlfuncs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_variables"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_variables">[docs]</a>    <span class="k">def</span> <span class="nf">iter_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all the variables in the model.</span>

<span class="sd">        Returns the variables in the order they were added to the model,</span>
<span class="sd">        regardless of their type.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__allvars</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_binary_vars"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_binary_vars">[docs]</a>    <span class="k">def</span> <span class="nf">iter_binary_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all binary decision variables in the model.</span>

<span class="sd">        Returns the variables in the order they were added to the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_variables_w_code</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_integer_vars"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_integer_vars">[docs]</a>    <span class="k">def</span> <span class="nf">iter_integer_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all integer decision variables in the model.</span>

<span class="sd">        Returns the variables in the order they were added to the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_variables_w_code</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_continuous_vars"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_continuous_vars">[docs]</a>    <span class="k">def</span> <span class="nf">iter_continuous_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all continuous decision variables in the model.</span>

<span class="sd">        Returns the variables in the order they were added to the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_variables_w_code</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_semicontinuous_vars"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_semicontinuous_vars">[docs]</a>    <span class="k">def</span> <span class="nf">iter_semicontinuous_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all semi-continuous decision variables in the model.</span>

<span class="sd">        Returns the variables in the order they were added to the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_variables_w_code</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_semiinteger_vars"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_semiinteger_vars">[docs]</a>    <span class="k">def</span> <span class="nf">iter_semiinteger_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all semi-integer decision variables in the model.</span>

<span class="sd">        Returns the variables in the order they were added to the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_variables_w_code</span><span class="p">(</span><span class="s1">&#39;N&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.get_var_by_name"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_var_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_var_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Searches for a variable from a name.</span>

<span class="sd">        Returns a variable if it finds one with exactly this name, or None.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the variable being searched for.</span>

<span class="sd">        :returns: A variable (instance of :class:`docplex.mp.linear.Var`) or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vars_by_name</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_non_ambiguous_varname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_name</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">varname_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vars_by_name</span>
        <span class="k">if</span> <span class="n">varname_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">base_name</span> <span class="ow">in</span> <span class="n">varname_map</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">#</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">base_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__allvars</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">base_name</span>

    <span class="k">def</span> <span class="nf">generate_user_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="k">for</span> <span class="n">dv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">dv</span><span class="o">.</span><span class="n">is_generated</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">dv</span>

    <span class="k">def</span> <span class="nf">generate_user_linear_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="k">for</span> <span class="n">lct</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_linear_constraints</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">lct</span><span class="o">.</span><span class="n">is_generated</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">lct</span>

<div class="viewcode-block" id="Model.find_matching_vars"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.find_matching_vars">[docs]</a>    <span class="k">def</span> <span class="nf">find_matching_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">match_case</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Finds all variables whose name contain a given string</span>

<span class="sd">        This method searches for all variables whose name</span>
<span class="sd">        is not null and contains the passed ``pattern`` string. Anonymous variables</span>
<span class="sd">        are not considered.</span>

<span class="sd">        :param pattern: a non-empty string.</span>

<span class="sd">        :return: A list of decision variables.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_matching_objs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generate_user_variables</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">match_case</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.find_re_matching_vars"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.find_re_matching_vars">[docs]</a>    <span class="k">def</span> <span class="nf">find_re_matching_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">regexpr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Finds all variables whose name match a regular expression.</span>

<span class="sd">        This method searches for all variables with a name that</span>
<span class="sd">        matches the given regular expression. Anonymous variables</span>
<span class="sd">        are not counted as matching.</span>

<span class="sd">        :param regexpr: a regular expression, as define din module ``re``</span>

<span class="sd">        :return: A list of decision variables.</span>

<span class="sd">        *New in version 2.9*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">dv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_user_variables</span><span class="p">():</span>
            <span class="n">dvname</span> <span class="o">=</span> <span class="n">dv</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="n">dvname</span> <span class="ow">and</span> <span class="n">regexpr</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">dvname</span><span class="p">):</span>
                <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dv</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">matches</span></div>

    <span class="k">def</span> <span class="nf">_find_matching_objs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_iter</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">match_case</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.find_matching_vars&quot;</span><span class="p">)</span>
        <span class="n">key_pattern</span> <span class="o">=</span> <span class="n">pattern</span> <span class="k">if</span> <span class="n">match_case</span> <span class="k">else</span> <span class="n">pattern</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">obj_iter</span><span class="p">():</span>
            <span class="n">obj_name</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="n">obj_name</span><span class="p">:</span>
                <span class="n">matched</span> <span class="o">=</span> <span class="n">obj_name</span> <span class="k">if</span> <span class="n">match_case</span> <span class="k">else</span> <span class="n">obj_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">key_pattern</span> <span class="ow">in</span> <span class="n">matched</span><span class="p">:</span>
                    <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">matches</span>

<div class="viewcode-block" id="Model.find_matching_linear_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.find_matching_linear_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">find_matching_linear_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">match_case</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Finds all linear constraints whose name contain a given string</span>

<span class="sd">        This method searches for all linear constraints whose name</span>
<span class="sd">        is not empty and contains the passed ``pattern`` string. Anonymous linear constraints</span>
<span class="sd">        are not considered.</span>

<span class="sd">        :param pattern: a non-empty string.</span>

<span class="sd">        :return: A list of linear constraints.</span>

<span class="sd">        *New in version 2.9*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_matching_objs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generate_user_linear_constraints</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">match_case</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">get_var_by_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_scope</span><span class="o">.</span><span class="n">get_object_by_index</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_var_by_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_scope</span><span class="o">.</span><span class="n">get_object_by_index</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_var_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">,</span> <span class="n">new_vartype_</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">new_vartype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_vartype</span><span class="p">(</span><span class="n">new_vartype_</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_vartype</span><span class="p">(</span><span class="n">new_vartype</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_vartype</span> <span class="o">!=</span> <span class="n">dvar</span><span class="o">.</span><span class="n">vartype</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">change_var_types</span><span class="p">([</span><span class="n">dvar</span><span class="p">],</span> <span class="p">[</span><span class="n">new_vartype</span><span class="p">])</span>
            <span class="c1"># change type in the Var object.</span>
            <span class="n">dvar</span><span class="o">.</span><span class="n">_set_vartype_internal</span><span class="p">(</span><span class="n">new_vartype</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_var_bounds_from_type</span><span class="p">(</span><span class="n">dvar</span><span class="p">,</span> <span class="n">new_vartype</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_clear_cached_discrete_var</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">dvar</span>

    <span class="k">def</span> <span class="nf">set_var_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="c1"># INTERNAL: use var.name to set variable names</span>
        <span class="k">if</span> <span class="n">new_name</span> <span class="o">!=</span> <span class="n">dvar</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">rename_var</span><span class="p">(</span><span class="n">dvar</span><span class="p">,</span> <span class="n">new_name</span><span class="p">)</span>
            <span class="n">dvar</span><span class="o">.</span><span class="n">_set_name</span><span class="p">(</span><span class="n">new_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_linear_constraint_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linct</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="c1"># INTERNAL: use lct.name to set a linear constraint&#39;s name</span>
        <span class="k">if</span> <span class="n">new_name</span> <span class="o">!=</span> <span class="n">linct</span><span class="o">.</span><span class="n">get_name</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">rename_linear_constraint</span><span class="p">(</span><span class="n">linct</span><span class="p">,</span> <span class="n">new_name</span><span class="p">)</span>
            <span class="n">linct</span><span class="o">.</span><span class="n">_set_name</span><span class="p">(</span><span class="n">new_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_var_lb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">candidate_lb</span><span class="p">):</span>
        <span class="c1"># INTERNAL: use var.lb to set lb</span>
        <span class="n">new_lb</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">vartype</span><span class="o">.</span><span class="n">resolve_lb</span><span class="p">(</span><span class="n">candidate_lb</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_lb</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">new_lb</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_lb</span>

    <span class="k">def</span> <span class="nf">_set_var_lb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">new_lb</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">set_var_lb</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">new_lb</span><span class="p">)</span>
        <span class="n">var</span><span class="o">.</span><span class="n">_internal_set_lb</span><span class="p">(</span><span class="n">new_lb</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_var_ub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">candidate_ub</span><span class="p">):</span>
        <span class="c1"># INTERNAL: use var.ub to set ub</span>
        <span class="n">new_ub</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">vartype</span><span class="o">.</span><span class="n">resolve_ub</span><span class="p">(</span><span class="n">candidate_ub</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_ub</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">new_ub</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_ub</span>

    <span class="k">def</span> <span class="nf">_set_var_ub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">new_ub</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">set_var_ub</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">new_ub</span><span class="p">)</span>
        <span class="n">var</span><span class="o">.</span><span class="n">_internal_set_ub</span><span class="p">(</span><span class="n">new_ub</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_update_var_bounds_from_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">,</span> <span class="n">new_vartype</span><span class="p">,</span> <span class="n">force_binary01</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">old_lb</span><span class="p">,</span> <span class="n">old_ub</span> <span class="o">=</span> <span class="n">dvar</span><span class="o">.</span><span class="n">_get_lb</span><span class="p">()</span> <span class="p">,</span> <span class="n">dvar</span><span class="o">.</span><span class="n">_get_ub</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">new_vartype</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_vartype</span> <span class="ow">and</span> <span class="n">force_binary01</span><span class="p">:</span>
            <span class="n">new_lb</span><span class="p">,</span> <span class="n">new_ub</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_lb</span> <span class="o">=</span> <span class="n">new_vartype</span><span class="o">.</span><span class="n">resolve_lb</span><span class="p">(</span><span class="n">old_lb</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">new_ub</span> <span class="o">=</span> <span class="n">new_vartype</span><span class="o">.</span><span class="n">resolve_ub</span><span class="p">(</span><span class="n">old_ub</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_lb</span> <span class="o">!=</span> <span class="n">old_lb</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_lb</span><span class="p">(</span><span class="n">dvar</span><span class="p">,</span> <span class="n">new_lb</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_ub</span> <span class="o">!=</span> <span class="n">old_ub</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_ub</span><span class="p">(</span><span class="n">dvar</span><span class="p">,</span> <span class="n">new_ub</span><span class="p">)</span>

<div class="viewcode-block" id="Model.get_constraint_by_name"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_constraint_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_constraint_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Searches for a constraint from a name.</span>

<span class="sd">        Returns the constraint if it finds a constraint with exactly this name, or None</span>
<span class="sd">        if no constraint has this name.</span>

<span class="sd">        This function will not raise an exception if the named constraint is not found.</span>

<span class="sd">        Note:</span>
<span class="sd">            The constraint name dicitonary in class Model is disabled by default. However,</span>
<span class="sd">            calling `get_constraint_by_name` will compute one dicitonary on the fly,</span>
<span class="sd">            but without warning for duplicate names. To enable the constraint</span>
<span class="sd">            name dicitonary from the start (and get duplicate constraint messages),</span>
<span class="sd">            add the `cts_by_name` keyword argument when creating the model, as in</span>

<span class="sd">            &gt;&gt;&gt; m = Model(name=&#39;my_model&#39;, cts_by_name=True)</span>

<span class="sd">            This enables the constraint name dicitonary, and checks for duplicates when a named</span>
<span class="sd">            constraint is added.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the constraint being searched for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A constraint or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_cts_name_dir</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.get_constraint_by_index"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_constraint_by_index">[docs]</a>    <span class="k">def</span> <span class="nf">get_constraint_by_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Searches for a linear constraint from an index.</span>

<span class="sd">        Returns the linear constraint with `idx` as index, or None.</span>
<span class="sd">        This function will not raise an exception if no constraint with this index is found.</span>

<span class="sd">        Note: remember that linear constraints, logical constraints, and quadratic constraints</span>
<span class="sd">        each have separate index spaces.</span>

<span class="sd">        :param idx: a valid index (greater than 0).</span>

<span class="sd">        :return: A linear constraint, or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linct_scope</span><span class="o">.</span><span class="n">get_object_by_index</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">get_logical_constraint_by_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logical_scope</span><span class="o">.</span><span class="n">get_object_by_index</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_quadratic_constraint_by_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadct_scope</span><span class="o">.</span><span class="n">get_object_by_index</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of constraints that were added to the model.</span>

<span class="sd">        The number includes linear constraints, range constraints, and indicator constraints.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span><span class="p">)</span>

<div class="viewcode-block" id="Model.iter_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all constraints (linear, ranges, indicators).</span>

<span class="sd">        Returns:</span>
<span class="sd">          An iterator object over all constraints in the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_count_constraints_with_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cttype</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_constraints_filtered</span><span class="p">(</span><span class="k">lambda</span> <span class="n">ct</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">cttype</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_count_constraints_filtered</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct_filter</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="n">ct_filter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">gen_constraints_with_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cttype</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">cttype</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">ct</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_range_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of range constraints added to the model.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_constraints_with_type</span><span class="p">(</span><span class="n">RangeConstraint</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_linear_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of linear constraints added to the model.</span>

<span class="sd">        This counts binary linear constraints (&lt;=, &gt;=, or ==) and</span>
<span class="sd">        range constraints.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`number_of_range_constraints`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_constraints_filtered</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">is_linear</span><span class="p">())</span>

<div class="viewcode-block" id="Model.iter_range_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_range_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_range_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an iterator on the range constraints of the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gen_constraints_with_type</span><span class="p">(</span><span class="n">RangeConstraint</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_binary_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_binary_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_binary_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an iterator on the binary constraints (expr1 &lt;op&gt; expr2) of the model.</span>
<span class="sd">        This does not include range constraints.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gen_constraints_with_type</span><span class="p">(</span><span class="n">LinearConstraint</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_linear_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_linear_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_linear_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an iterator on the linear constraints of the model.</span>
<span class="sd">        This includes binary linear constraints and ranges but not indicators.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_constraints</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">is_linear</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">c</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">lct</span><span class="o">.</span><span class="n">size</span> <span class="k">for</span> <span class="n">lct</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_linear_constraints</span><span class="p">())</span>

<div class="viewcode-block" id="Model.iter_indicator_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_indicator_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_indicator_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator on indicator constraints in the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gen_constraints_with_type</span><span class="p">(</span><span class="n">IndicatorConstraint</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_equivalence_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_equivalence_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_equivalence_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator on equivalence constraints in the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gen_constraints_with_type</span><span class="p">(</span><span class="n">EquivalenceConstraint</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_indicator_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the number of indicator constraints in the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_constraints_with_type</span><span class="p">(</span><span class="n">IndicatorConstraint</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_equivalence_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the number of equivalence constraints in the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">explicits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_constraints_with_type</span><span class="p">(</span><span class="n">EquivalenceConstraint</span><span class="p">)</span>
        <span class="n">implicits</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__all_implicit_equiv_cts</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">explicits</span> <span class="o">+</span> <span class="n">implicits</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_implicit_equivalences</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__all_implicit_equiv_cts</span><span class="p">)</span>

<div class="viewcode-block" id="Model.iter_quadratic_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_quadratic_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_quadratic_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an iterator on the quadratic constraints of the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gen_constraints_with_type</span><span class="p">(</span><span class="n">QuadraticConstraint</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_quadratic_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the number of quadratic constraints in the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_constraints_with_type</span><span class="p">(</span><span class="n">QuadraticConstraint</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">has_quadratic_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">is_quadratic</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iter_logical_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_implicits</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_constraints</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">ct</span><span class="o">.</span><span class="n">is_logical</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">ct</span>
        <span class="k">if</span> <span class="n">include_implicits</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">imp_eqct</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_implicit_equivalence_cts</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">imp_eqct</span>

    <span class="k">def</span> <span class="nf">_iter_all_logical_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_logical_constraints</span><span class="p">(</span><span class="n">include_implicits</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="Model.var"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.var">[docs]</a>    <span class="k">def</span> <span class="nf">var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a decision variable and stores it in the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            vartype: The type of the decision variable;</span>
<span class="sd">                This field expects a concrete instance of the abstract class</span>
<span class="sd">                :class:`docplex.mp.vartype.VarType`.</span>

<span class="sd">            lb: The lower bound of the variable; either a number or None, to use the default.</span>
<span class="sd">                 The default lower bound for all three variable types is 0.</span>

<span class="sd">            ub: The upper bound of the variable domain; expects either a number or None to use the type&#39;s default.</span>
<span class="sd">                The default upper bound for Binary is 1, otherwise positive infinity.</span>

<span class="sd">            name: An optional string to name the variable.</span>

<span class="sd">        :returns: The newly created decision variable.</span>
<span class="sd">        :rtype: :class:`docplex.mp.linear.Var`</span>

<span class="sd">        Note:</span>
<span class="sd">            The model holds local instances of BinaryVarType, IntegerVarType, ContinuousVarType which</span>
<span class="sd">            are accessible by properties (resp. binary_vartype, integer_vartype, continuous_vartype).</span>

<span class="sd">        See Also:</span>
<span class="sd">            :attr:`infinity`,</span>
<span class="sd">            :attr:`binary_vartype`,</span>
<span class="sd">            :attr:`integer_vartype`,</span>
<span class="sd">            :attr:`continuous_vartype`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_vartype</span><span class="p">(</span><span class="n">vartype</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var</span><span class="p">(</span><span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Var.lb&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">ub</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Var.ub&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_var</span><span class="p">(</span><span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="Model.continuous_var"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.continuous_var">[docs]</a>    <span class="k">def</span> <span class="nf">continuous_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new continuous decision variable and stores it in the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            lb: The lower bound of the variable, or None. The default is 0.</span>
<span class="sd">            ub: The upper bound of the variable, or None, to use the default. The default is model infinity.</span>
<span class="sd">            name (string): An optional name for the variable.</span>

<span class="sd">        :returns: A decision variable with type :class:`docplex.mp.vartype.ContinuousVarType`.</span>
<span class="sd">        :rtype: :class:`docplex.mp.linear.Var`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.integer_var"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.integer_var">[docs]</a>    <span class="k">def</span> <span class="nf">integer_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new integer variable and stores it in the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            lb: The lower bound of the variable, or None. The default is 0.</span>
<span class="sd">            ub: The upper bound of the variable, or None, to use the default. The default is model infinity.</span>
<span class="sd">            name: An optional name for the variable.</span>

<span class="sd">        :returns: An instance of the :class:`docplex.mp.linear.Var` class with type `IntegerVarType`.</span>
<span class="sd">        :rtype: :class:`docplex.mp.linear.Var`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">integer_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.binary_var"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.binary_var">[docs]</a>    <span class="k">def</span> <span class="nf">binary_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new binary decision variable and stores it in the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (string): An optional name for the variable.</span>

<span class="sd">        :returns: A decision variable with type :class:`docplex.mp.vartype.BinaryVarType`.</span>
<span class="sd">        :rtype: :class:`docplex.mp.linear.Var`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary_vartype</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.semicontinuous_var"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.semicontinuous_var">[docs]</a>    <span class="k">def</span> <span class="nf">semicontinuous_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new semi-continuous decision variable and stores it in the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            lb: The lower bound of the variable  (which must be strictly positive).</span>
<span class="sd">            ub: The upper bound of the variable, or None, to use the default. The default is model infinity.</span>
<span class="sd">            name (string): An optional name for the variable.</span>

<span class="sd">        :returns: A decision variable with type :class:`docplex.mp.vartype.SemiContinuousVarType`.</span>
<span class="sd">        :rtype: :class:`docplex.mp.linear.Var`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>  <span class="c1"># lb cannot be None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">semicontinuous_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.semiinteger_var"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.semiinteger_var">[docs]</a>    <span class="k">def</span> <span class="nf">semiinteger_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new semi-integer decision variable and stores it in the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            lb: The lower bound of the variable (which must be strictly positive).</span>
<span class="sd">            ub: The upper bound of the variable, or None, to use the default. The default is model infinity.</span>
<span class="sd">            name (string): An optional name for the variable.</span>

<span class="sd">        :returns: A decision variable with type :class:`docplex.mp.vartype.SemiIntegerVarType`.</span>
<span class="sd">        :rtype: :class:`docplex.mp.linear.Var`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>  <span class="c1"># lb cannot be None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">semiinteger_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">var_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_vartype</span><span class="p">(</span><span class="n">vartype</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">var_list</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">var_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_vartype</span><span class="p">(</span><span class="n">vartype</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_var_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_var_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_ordering</span><span class="p">)</span>

<div class="viewcode-block" id="Model.binary_var_list"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.binary_var_list">[docs]</a>    <span class="k">def</span> <span class="nf">binary_var_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a list of binary decision variables and stores them in the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects or an integer.</span>
<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if keys is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>
<span class="sd">                        </span>
<span class="sd">        Example:</span>
<span class="sd">            If you want each key string to be surrounded by {}, use a special key_format: &quot;_{%s}&quot;,</span>
<span class="sd">            the %s denotes where the key string will be formatted and appended to `name`.</span>

<span class="sd">        :returns: A list of :class:`docplex.mp.linear.Var` objects with type :class:`doc.mp.vartype.BinaryVarType`.</span>

<span class="sd">        Example:</span>
<span class="sd">            `mdl.binary_var_list(3, &quot;z&quot;)` returns a list of size 3</span>
<span class="sd">            containing three binary decision variables with names `z_0`, `z_1`, `z_2`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_list</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_vartype</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.integer_var_list"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.integer_var_list">[docs]</a>    <span class="k">def</span> <span class="nf">integer_var_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a list of integer decision variables with type `IntegerVarType`, stores them in the model,</span>
<span class="sd">        and returns the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>
<span class="sd">            lb: Lower bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers with the same size as keys,</span>
<span class="sd">                a function (which will be called on each key argument), or None.</span>
<span class="sd">            ub: Upper bounds of the variables.  Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers with the same size as keys,</span>
<span class="sd">                a function (which will  be called on each key argument), or None.</span>
<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>

<span class="sd">        Note:</span>
<span class="sd">            Using None as the lower bound means the default lower bound (0) is used.</span>
<span class="sd">            Using None as the upper bound means the default upper bound (the model&#39;s positive infinity)</span>
<span class="sd">            is used.</span>

<span class="sd">        :returns: A list of :class:`doc.mp.linear.Var` objects with type `IntegerVarType`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_list</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">integer_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.continuous_var_list"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.continuous_var_list">[docs]</a>    <span class="k">def</span> <span class="nf">continuous_var_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a list of continuous decision variables with type :class:`docplex.mp.vartype.ContinuousVarType`,</span>
<span class="sd">        stores them in the model, and returns the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>

<span class="sd">            lb: Lower bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, a function, or None.</span>
<span class="sd">                Use a number if all variables share the same lower bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers</span>
<span class="sd">                or use a function if lower bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means using the default lower bound (0) is used.</span>

<span class="sd">            ub: Upper bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, a function, or None.</span>
<span class="sd">                Use a number if all variables share the same upper bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers</span>
<span class="sd">                or use a function if upper bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default upper bound (model infinity) is used.</span>

<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">                If passed a function, this function is called on each key object to generate a name.</span>
<span class="sd">                The default behavior is to call :func:`str()` on each key object.</span>

<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>
<span class="sd">        Note:</span>
<span class="sd">            When `keys` is either an empty list or the integer 0, an empty list is returned.</span>


<span class="sd">        :returns: A list of :class:`docplex.mp.linear.Var` objects with type :class:`docplex.mp.vartype.ContinuousVarType`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :attr:`infinity`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_list</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">continuous_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.semicontinuous_var_list"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.semicontinuous_var_list">[docs]</a>    <span class="k">def</span> <span class="nf">semicontinuous_var_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a list of semi-continuous decision variables with type :class:`docplex.mp.vartype.SemiContinuousVarType`,</span>
<span class="sd">        stores them in the model, and returns the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>

<span class="sd">            lb: Lower bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, or a function.</span>
<span class="sd">                Use a number if all variables share the same lower bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if lower bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                Note that the lower bound of a semi-continuous variable must be strictly positive.</span>

<span class="sd">            ub: Upper bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, a function, or None.</span>
<span class="sd">                Use a number if all variables share the same upper bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if upper bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default upper bound (model infinity) is used.</span>

<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">                If passed a function, this function is called on each key object to generate a name.</span>
<span class="sd">                The default behavior is to call :func:`str()` on each key object.</span>

<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>
<span class="sd">        Note:</span>
<span class="sd">            When `keys` is either an empty list or the integer 0, an empty list is returned.</span>


<span class="sd">        :returns: A list of :class:`docplex.mp.linear.Var` objects with type :class:`docplex.mp.vartype.SemiContinuousVarType`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :attr:`infinity`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_list</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">semicontinuous_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.semiinteger_var_list"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.semiinteger_var_list">[docs]</a>    <span class="k">def</span> <span class="nf">semiinteger_var_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a list of semi-integer decision variables with type :class:`docplex.mp.vartype.SemiIntegerVarType`,</span>
<span class="sd">        stores them in the model, and returns the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>

<span class="sd">            lb: Lower bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, or a function.</span>
<span class="sd">                Use a number if all variables share the same lower bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if lower bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                Note that the lower bound of a semi-integer variable must be strictly positive.</span>

<span class="sd">            ub: Upper bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, a function, or None.</span>
<span class="sd">                Use a number if all variables share the same upper bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if upper bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default upper bound (model infinity) is used.</span>

<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">                If passed a function, this function is called on each key object to generate a name.</span>
<span class="sd">                The default behavior is to call :func:`str()` on each key object.</span>

<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>
<span class="sd">        Note:</span>
<span class="sd">            When `keys` is either an empty list or the integer 0, an empty list is returned.</span>


<span class="sd">        :returns: A list of :class:`docplex.mp.linear.Var` objects with type :class:`docplex.mp.vartype.SemiIntegerVarType`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :attr:`infinity`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_list</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">semiinteger_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.continuous_var_dict"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.continuous_var_dict">[docs]</a>    <span class="k">def</span> <span class="nf">continuous_var_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of continuous decision variables, indexed by key objects.</span>

<span class="sd">        Creates a dictionary that allows retrieval of variables from business</span>
<span class="sd">        model objects. Keys can be either a Python collection, an iterator, or a generator.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>
<span class="sd">        Keys are used in the naming of variables.</span>

<span class="sd">        Note:</span>
<span class="sd">            If `keys` is empty, this method returns an empty dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects, an iterator, or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>

<span class="sd">            lb: Lower bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, or a function.</span>
<span class="sd">                Use a number if all variables share the same lower bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if lower bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default lower bound (0) is used.</span>

<span class="sd">            ub: Upper bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, a function, or None.</span>
<span class="sd">                Use a number if all variables share the same upper bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if upper bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default upper bound (model infinity) is used.</span>

<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">                If passed a function, this function is called on each key object to generate a name.</span>
<span class="sd">                The default behavior is to call :func:`str` on each key object.</span>

<span class="sd">            key_format: A format string or None. This format string describes how `keys` contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>

<span class="sd">        :returns: A dictionary of :class:`docplex.mp.linear.Var` objects (with type `ContinuousVarType`) indexed by</span>
<span class="sd">                  the objects in `keys`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :class:`docplex.mp.linear.Var`,</span>
<span class="sd">            :attr:`infinity`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">continuous_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.integer_var_dict"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.integer_var_dict">[docs]</a>    <span class="k">def</span> <span class="nf">integer_var_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Creates a dictionary of integer decision variables, indexed by key objects.</span>

<span class="sd">        Creates a dictionary that allows retrieval of variables from business</span>
<span class="sd">        model objects. Keys can be either a Python collection, an iterator, or a generator.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>
<span class="sd">        Keys are used in the naming of variables.</span>

<span class="sd">        Note:</span>
<span class="sd">            If `keys` is empty, this method returns an empty dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects, an iterator, or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>

<span class="sd">            lb: Lower bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, or a function.</span>
<span class="sd">                Use a number if all variables share the same lower bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if lower bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default lower bound (0) is used.</span>

<span class="sd">            ub: Upper bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, a function, or None.</span>
<span class="sd">                Use a number if all variables share the same upper bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if upper bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default upper bound (model infinity) is used.</span>


<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">                If passed a function, this function is called on each key object to generate a name.</span>
<span class="sd">                The default behavior is to call :func:`str` on each key object.</span>

<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>

<span class="sd">        :returns:  A dictionary of :class:`docplex.mp.linear.Var` objects (with type `IntegerVarType`) indexed by the</span>
<span class="sd">                   objects in `keys`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :attr:`infinity`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">integer_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.binary_var_dict"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.binary_var_dict">[docs]</a>    <span class="k">def</span> <span class="nf">binary_var_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of binary decision variables, indexed by key objects.</span>

<span class="sd">        Creates a dictionary that allows retrieval of variables from business</span>
<span class="sd">        model objects. Keys can be either a Python collection, an iterator, or a generator.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>
<span class="sd">        Keys are used in the naming of variables.</span>

<span class="sd">        Note:</span>
<span class="sd">            If `keys` is empty, this method returns an empty dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects, an iterator, or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>

<span class="sd">            name (string): Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>

<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>

<span class="sd">        :returns: A dictionary of :class:`docplex.mp.linear.Var` objects with type</span>
<span class="sd">                  :class:`docplex.mp.vartype.BinaryVarType` indexed by the objects in `keys`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.semiinteger_var_dict"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.semiinteger_var_dict">[docs]</a>    <span class="k">def</span> <span class="nf">semiinteger_var_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Creates a dictionary of semi-integer decision variables, indexed by key objects.</span>

<span class="sd">        Creates a dictionary that allows retrieval of variables from business</span>
<span class="sd">        model objects. Keys can be either a Python collection, an iterator, or a generator.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>
<span class="sd">        Keys are used in the naming of variables.</span>

<span class="sd">        Note:</span>
<span class="sd">            If `keys` is empty, this method returns an empty dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects, an iterator, or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>

<span class="sd">            lb: Lower bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, or a function.</span>
<span class="sd">                Use a number if all variables share the same lower bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if lower bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>

<span class="sd">            ub: Upper bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, a function, or None.</span>
<span class="sd">                Use a number if all variables share the same upper bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if upper bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default upper bound (model infinity) is used.</span>


<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">                If passed a function, this function is called on each key object to generate a name.</span>
<span class="sd">                The default behavior is to call :func:`str` on each key object.</span>

<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>

<span class="sd">        :returns:  A dictionary of :class:`docplex.mp.linear.Var` objects (with type `SemiIntegerVarType`) indexed by the</span>
<span class="sd">                   objects in `keys`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :attr:`infinity`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">semiinteger_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.semiinteger_var_matrix"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.semiinteger_var_matrix">[docs]</a>    <span class="k">def</span> <span class="nf">semiinteger_var_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of semiinteger decision variables, indexed by pairs of key objects.</span>

<span class="sd">        Creates a dictionary that allows the retrieval of variables from  a tuple</span>
<span class="sd">        of two keys, the first one from `keys1`, the second one from `keys2`.</span>
<span class="sd">        In short, variables are indexed by the Cartesian product of the two key sets.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>

<span class="sd">        Arguments `lb`, `ub`, `name`, and `key_format` are interpreted as in :func:`semiinteger_var_dict`.</span>

<span class="sd">        *New in version 2.9*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">semiinteger_vartype</span><span class="p">,</span> <span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">],</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.semicontinuous_var_dict"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.semicontinuous_var_dict">[docs]</a>    <span class="k">def</span> <span class="nf">semicontinuous_var_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Creates a dictionary of semi-continuous decision variables, indexed by key objects.</span>

<span class="sd">        Creates a dictionary that allows retrieval of variables from business</span>
<span class="sd">        model objects. Keys can be either a Python collection, an iterator, or a generator.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>
<span class="sd">        Keys are used in the naming of variables.</span>

<span class="sd">        Note:</span>
<span class="sd">            If `keys` is empty, this method returns an empty dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys: Either a sequence of objects, an iterator, or a positive integer. If passed an integer,</span>
<span class="sd">                it is interpreted as the number of variables to create.</span>

<span class="sd">            lb: Lower bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, or a function.</span>
<span class="sd">                Use a number if all variables share the same lower bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if lower bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>

<span class="sd">            ub: Upper bounds of the variables. Accepts either a floating-point number,</span>
<span class="sd">                a list of numbers, a function, or None.</span>
<span class="sd">                Use a number if all variables share the same upper bound.</span>
<span class="sd">                Otherwise either use an explicit list of numbers or</span>
<span class="sd">                use a function if upper bounds vary depending on the key, in which case,</span>
<span class="sd">                the function will be called on each `key` in `keys`.</span>
<span class="sd">                None means the default upper bound (model infinity) is used.</span>


<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if `keys` is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>
<span class="sd">                If passed a function, this function is called on each key object to generate a name.</span>
<span class="sd">                The default behavior is to call :func:`str` on each key object.</span>

<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>

<span class="sd">        :returns:  A dictionary of :class:`docplex.mp.linear.Var` objects (with type `SemiIntegerVarType`) indexed by the</span>
<span class="sd">                   objects in `keys`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :attr:`infinity`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">semicontinuous_vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.semicontinuous_var_matrix"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.semicontinuous_var_matrix">[docs]</a>    <span class="k">def</span> <span class="nf">semicontinuous_var_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of semivpntinuous decision variables, indexed by pairs of key objects.</span>

<span class="sd">        Creates a dictionary that allows the retrieval of variables from  a tuple</span>
<span class="sd">        of two keys, the first one from `keys1`, the second one from `keys2`.</span>
<span class="sd">        In short, variables are indexed by the Cartesian product of the two key sets.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>

<span class="sd">        Arguments `lb`, `ub`, `name`, and `key_format` are interpreted as in :func:`semiinteger_var_dict`.</span>

<span class="sd">        *New in version 2.9*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">semicontinuous_vartype</span><span class="p">,</span> <span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">],</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">seq_of_key_seqs</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_vartype</span><span class="p">(</span><span class="n">vartype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_iterable</span><span class="p">(</span><span class="n">seq_of_key_seqs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_var_multidict</span><span class="p">(</span><span class="n">seq_of_key_seqs</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_ordering</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">var_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="n">vartype</span><span class="p">,</span> <span class="n">seq_of_key_seqs</span><span class="o">=</span><span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">],</span>
                                  <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="n">key_format</span><span class="p">)</span>

<div class="viewcode-block" id="Model.binary_var_matrix"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.binary_var_matrix">[docs]</a>    <span class="k">def</span> <span class="nf">binary_var_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of binary decision variables, indexed by pairs of key objects.</span>

<span class="sd">        Creates a dictionary that allows the retrieval of variables from  a tuple</span>
<span class="sd">        of two keys, the first one from `keys1`, the second one from `keys2`.</span>
<span class="sd">        In short, variables are indexed by the Cartesian product of the two key sets.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>
<span class="sd">        Keys are used in the naming of variables.</span>

<span class="sd">        Note:</span>
<span class="sd">            If either of `keys1` or `keys2` is empty, this method returns an empty dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys1: Either a sequence of objects, an iterator, or a positive integer. If passed an integer N,</span>
<span class="sd">                    it is interpreted as a range from 0 to N-1.</span>

<span class="sd">            keys2: Same as `keys1`.</span>

<span class="sd">            name: Used to name variables. Accepts either a string or</span>
<span class="sd">                a function. If given a string, the variable name is formed by appending the string</span>
<span class="sd">                to the string representation of the key object (if keys is a sequence) or the</span>
<span class="sd">                index of the variable within the range, if an integer argument is passed.</span>

<span class="sd">            key_format: A format string or None. This format string describes how keys contribute to variable names.</span>
<span class="sd">                        The default is &quot;_%s&quot;. For example if name is &quot;x&quot; and each key object is represented by a string</span>
<span class="sd">                        like &quot;k1&quot;, &quot;k2&quot;, ... then variables will be named &quot;x_k1&quot;, &quot;x_k2&quot;,...</span>

<span class="sd">        :returns: A dictionary of :class:`docplex.mp.linear.Var` objects with type</span>
<span class="sd">                  :class:`docplex.mp.vartype.BinaryVarType` indexed by</span>
<span class="sd">                  all couples `(k1, k2)` with `k1` in `keys1` and `k2` in `keys2`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary_vartype</span><span class="p">,</span> <span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.integer_var_matrix"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.integer_var_matrix">[docs]</a>    <span class="k">def</span> <span class="nf">integer_var_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of integer decision variables, indexed by pairs of key objects.</span>

<span class="sd">        Creates a dictionary that allows the retrieval of variables from  a tuple</span>
<span class="sd">        of two keys, the first one from `keys1`, the second one from `keys2`.</span>
<span class="sd">        In short, variables are indexed by the Cartesian product of the two key sets.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>

<span class="sd">        Arguments `lb`, `ub`, `name`, and `key_format` are interpreted as in :func:`integer_var_dict`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">integer_vartype</span><span class="p">,</span> <span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">],</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.continuous_var_matrix"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.continuous_var_matrix">[docs]</a>    <span class="k">def</span> <span class="nf">continuous_var_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of continuous decision variables, indexed by pairs of key objects.</span>

<span class="sd">        Creates a dictionary that allows retrieval of variables from a tuple</span>
<span class="sd">        of two keys, the first one from `keys1`, the second one from `keys2`.</span>
<span class="sd">        In short, variables are indexed by the Cartesian product of the two key sets.</span>

<span class="sd">        A key can be any Python object, with the exception of None.</span>

<span class="sd">        Arguments `lb`, `ub`, `name`, and `key_format` are interpreted the same as in :func:`integer_var_dict`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous_vartype</span><span class="p">,</span> <span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">],</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.continuous_var_cube"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.continuous_var_cube">[docs]</a>    <span class="k">def</span> <span class="nf">continuous_var_cube</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">keys3</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of continuous decision variables, indexed by triplets of key objects.</span>

<span class="sd">        Same as :func:`continuous_var_matrix`, except that variables are indexed by triplets of</span>
<span class="sd">        the form `(k1, k2, k3)` with `k1` in `keys1`, `k2` in `keys2`, `k3` in `keys3`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous_vartype</span><span class="p">,</span> <span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">keys3</span><span class="p">],</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.integer_var_cube"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.integer_var_cube">[docs]</a>    <span class="k">def</span> <span class="nf">integer_var_cube</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">keys3</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a dictionary of integer decision variables, indexed by triplets.</span>

<span class="sd">        Same as :func:`integer_var_matrix`, except that variables are indexed by triplets of</span>
<span class="sd">        the form `(k1, k2, k3)` with `k1` in `keys1`, `k2` in `keys2`, `k3` in `keys3`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`integer_var_matrix`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">integer_vartype</span><span class="p">,</span> <span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">keys3</span><span class="p">],</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.binary_var_cube"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.binary_var_cube">[docs]</a>    <span class="k">def</span> <span class="nf">binary_var_cube</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">keys3</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a dictionary of binary decision variables, indexed by triplets.</span>

<span class="sd">        Same as :func:`binary_var_matrix`, except that variables are indexed by triplets of</span>
<span class="sd">        the form `(k1, k2, k3)` with `k1` in `keys1`, `k2` in `keys2`, `k3` in `keys3`.</span>

<span class="sd">        :returns: A dictionary of :class:`docplex.mp.linear.Var` objects (with type :class:`docplex.mp.vartype.BinaryVarType`) indexed by</span>
<span class="sd">            triplets.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_multidict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary_vartype</span><span class="p">,</span> <span class="p">[</span><span class="n">keys1</span><span class="p">,</span> <span class="n">keys2</span><span class="p">,</span> <span class="n">keys3</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">key_format</span><span class="o">=</span><span class="n">key_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.linear_expr"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.linear_expr">[docs]</a>    <span class="k">def</span> <span class="nf">linear_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns a new empty linear expression.</span>

<span class="sd">        Args:</span>
<span class="sd">            arg: an optional argument to convert to a linear expression. Detailt is None,</span>
<span class="sd">                in which case, an empty expression is returned.</span>
<span class="sd">            name: An optional string to name the expression.</span>

<span class="sd">        :returns: An instance of :class:`docplex.mp.linear.LinearExpr`.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">constant</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.linear_expr()&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">linear_expr</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="n">constant</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.quad_expr"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.quad_expr">[docs]</a>    <span class="k">def</span> <span class="nf">quad_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns a new empty quadratic expression.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: An optional string to name the expression.</span>

<span class="sd">        :returns: An instance of :class:`docplex.mp.quad.QuadExpr`.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_qfactory</span><span class="o">.</span><span class="n">new_quad</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.abs"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.abs">[docs]</a>    <span class="k">def</span> <span class="nf">abs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Builds an expression equal to the absolute value of its argument.</span>

<span class="sd">        Args:</span>
<span class="sd">            e: Accepts any object that can be transformed into an expression:</span>
<span class="sd">                decision variables, expressions, or numbers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An expression that can be used in arithmetic operators and constraints.</span>

<span class="sd">        Note:</span>
<span class="sd">            Building the expression generates auxiliary decision variables, including binary decision variables,</span>
<span class="sd">            and this may change the nature of the problem from a LP to a MIP.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_operand</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.abs&quot;</span><span class="p">,</span> <span class="n">accept_numbers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_abs_expr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.min"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.min">[docs]</a>    <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Builds an expression equal to the minimum value of its arguments.</span>

<span class="sd">        This method accepts a variable number of arguments.</span>

<span class="sd">        If no arguments are provided, returns positive infinity (see :attr:`infinity`).</span>

<span class="sd">        Args:</span>
<span class="sd">            args: A variable list of arguments, each of which is either an expression, a variable,</span>
<span class="sd">                or a container.</span>

<span class="sd">        If passed a container or an iterator, this container or iterator must be the unique argument.</span>

<span class="sd">        If passed one dictionary, returns the minimum of the dictionary values.</span>


<span class="sd">        Returns:</span>
<span class="sd">            An expression that can be used in arithmetic operators and constraints.</span>

<span class="sd">        Example:</span>
<span class="sd">            `model.min()` -&gt; returns `model.infinity`.</span>

<span class="sd">            `model.min(e)` -&gt; returns `e`.</span>

<span class="sd">            `model.min(e1, e2, e3)` -&gt; returns a new expression equal to the minimum of the values of `e1`, `e2`, `e3`.</span>

<span class="sd">            `model.min([x1,x2,x3])` where `x1`, `x2` .. are variables or expressions -&gt; returns the minimum of these expressions.</span>

<span class="sd">            `model.min([])` -&gt; returns `model.infinity`.</span>

<span class="sd">        Note:</span>
<span class="sd">            Building the expression generates auxiliary variables, including binary decision variables,</span>
<span class="sd">            and this may change the nature of the problem from a LP to a MIP.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">min_args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="n">nb_args</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">nb_args</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">nb_args</span><span class="p">:</span>
            <span class="n">unique_arg</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">unique_arg</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unique_arg</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">min_args</span> <span class="o">=</span> <span class="n">unique_arg</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">min_args</span> <span class="o">=</span> <span class="n">_to_list</span><span class="p">(</span><span class="n">unique_arg</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">min_args</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_operand</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.min()&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_operand</span><span class="p">(</span><span class="n">unique_arg</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.min()&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_operand</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.min&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_min_expr</span><span class="p">(</span><span class="o">*</span><span class="n">min_args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.max"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.max">[docs]</a>    <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Builds an expression equal to the maximum value of its arguments.</span>

<span class="sd">        This method accepts a variable number of arguments.</span>

<span class="sd">        Args:</span>
<span class="sd">            args: A variable list of arguments, each of which is either an expression, a variable,</span>
<span class="sd">                or a container.</span>

<span class="sd">        If passed a container or an iterator, this container or iterator must be the unique argument.</span>

<span class="sd">        If passed one dictionary, returns the maximum of the dictionary values.</span>

<span class="sd">        If no arguments are provided, returns negative infinity (see :attr:`infinity`).</span>


<span class="sd">        Example:</span>
<span class="sd">            `model.max()` -&gt; returns `-model.infinity`.</span>

<span class="sd">            `model.max(e)` -&gt; returns `e`.</span>

<span class="sd">            `model.max(e1, e2, e3)` -&gt; returns a new expression equal to the maximum of the values of `e1`, `e2`, `e3`.</span>

<span class="sd">            `model.max([x1,x2,x3])` where `x1`, `x2` .. are variables or expressions -&gt; returns the maximum of these expressions.</span>

<span class="sd">            `model.max([])` -&gt; returns `-model.infinity`.</span>


<span class="sd">        Note:</span>
<span class="sd">            Building the expression generates auxiliary variables, including binary decision variables,</span>
<span class="sd">            and this may change the nature of the problem from a LP to a MIP.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="n">nb_args</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">nb_args</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">nb_args</span><span class="p">:</span>
            <span class="n">unique_arg</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">unique_arg</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unique_arg</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">max_args</span> <span class="o">=</span> <span class="n">unique_arg</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">max_args</span> <span class="o">=</span> <span class="n">_to_list</span><span class="p">(</span><span class="n">unique_arg</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">max_args</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_operand</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.max&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_operand</span><span class="p">(</span><span class="n">unique_arg</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.max&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_operand</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.max&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_max_expr</span><span class="p">(</span><span class="o">*</span><span class="n">max_args</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.logical_and"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.logical_and">[docs]</a>    <span class="k">def</span> <span class="nf">logical_and</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Builds an expression equal to the logical AND value of its arguments.</span>

<span class="sd">        This method takes a variable number of arguments, and accepts</span>
<span class="sd">        binary variables, other logical expressions, or discrete constraints.</span>

<span class="sd">        Args:</span>
<span class="sd">            args: A variable list of logical operands.</span>

<span class="sd">        Note:</span>
<span class="sd">            If passed an empty number of arguments, this method an expression equal to 1.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An expression, equal to 1 if and only if all of its</span>
<span class="sd">            arguments are equal to 1, else equal to 0.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`logical_or`</span>
<span class="sd">            :func:`logical_not`</span>

<span class="sd">        Example:</span>
<span class="sd">            # return logical XOR or two binary variables.</span>
<span class="sd">            def logxor(m, b1, b2):</span>
<span class="sd">                return m.logical_and(m.logical_or(b1, b2), m.logical_not(m.logical_and(b1, b2)))</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bvars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_logical_op_seq</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.logical_and&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_logical_and_expr</span><span class="p">(</span><span class="n">bvars</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.logical_or"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.logical_or">[docs]</a>    <span class="k">def</span> <span class="nf">logical_or</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Builds an expression equal to the logical OR value of its arguments.</span>

<span class="sd">        This method takes a variable number of arguments, and accepts</span>
<span class="sd">            binary variables, other logical expressions, or discrete constraints.</span>

<span class="sd">        Args:</span>
<span class="sd">            args: A variable list of logical operands.</span>

<span class="sd">        Note:</span>
<span class="sd">            If passed an empty number of arguments, this method a zero expression.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An expression, equal to 1 if and only if at least one of its</span>
<span class="sd">             arguments is equal to 1, else equal to 0.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`logical_and`</span>
<span class="sd">            :func:`logical_not`</span>

<span class="sd">        *New in version 2.11*</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bvars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_logical_op_seq</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.logical_or&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_logical_or_expr</span><span class="p">(</span><span class="n">bvars</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.logical_not"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.logical_not">[docs]</a>    <span class="k">def</span> <span class="nf">logical_not</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Builds an expression equal to the logical negation of its argument.</span>

<span class="sd">        This method accepts either a binary variable, or another logical expression.</span>

<span class="sd">        Args:</span>
<span class="sd">            arg: A binary variable, or a logical expression,</span>
<span class="sd">                e.g. an expression built by logical_and, logical_or, logical_not</span>

<span class="sd">        Returns:</span>
<span class="sd">            An expression, equal to 1 if its argument is 0, else 0.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`logical_and`</span>
<span class="sd">            :func:`logical_or`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_logical_op</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="s1">&#39;Model.logical_not&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_logical_not_expr</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.scal_prod"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.scal_prod">[docs]</a>    <span class="k">def</span> <span class="nf">scal_prod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">terms</span><span class="p">,</span> <span class="n">coefs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a linear expression equal to the scalar product of a sequence of decision variables</span>
<span class="sd">        and a sequence of coefficients.</span>

<span class="sd">        This method accepts different types of input for both arguments. `terms` can be any</span>
<span class="sd">        iterable returning expressions or variables, and `coefs` is usually</span>
<span class="sd">        an iterable returning numbers.</span>
<span class="sd">        `cal_prod` also accept one number as `coefs`, in which case</span>
<span class="sd">        the scalar product reduces to a sum times this coefficient.</span>

<span class="sd">        :param terms: An iterable returning variables or expressions.</span>
<span class="sd">        :param coefs: An iterable returning numbers, or a number.</span>

<span class="sd">        Note:</span>
<span class="sd">            - both iterables are iterated at the same time, so the order in which terms and numbers</span>
<span class="sd">              are returned must be consistent: using unordered collections (e.g. sets) could lead to unexpected results.</span>

<span class="sd">           - Iteration stops as soon as one iterable stops. If both iterables are empty, the method returns 0.</span>

<span class="sd">        :return: A linear expression or 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">check_ordered_sequence</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">terms</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.scal_prod() requires a list of expressions/variables&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregator</span><span class="o">.</span><span class="n">scal_prod</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="n">coefs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.dot"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.dot">[docs]</a>    <span class="k">def</span> <span class="nf">dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">terms</span><span class="p">,</span> <span class="n">coefs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Synonym for :func:`scal_prod`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scal_prod</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="n">coefs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.scal_prod_f"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.scal_prod_f">[docs]</a>    <span class="k">def</span> <span class="nf">scal_prod_f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_dict</span><span class="p">,</span> <span class="n">coef_fn</span><span class="p">,</span> <span class="n">assume_alldifferent</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a scalar product from a dictionary of variables and a function.</span>

<span class="sd">        This method is a functional variant of `scal_prod`. I takes as asrgument a dictionary of variables,</span>
<span class="sd">        as returned by xxx_var_dict or xx_var_var_matrix (where xxx is a type), and a function.</span>



<span class="sd">        :param var_dict: a dictionary of variables, as returned by all the xxx_var_dict methods (e.g. integer_var_dict),</span>
<span class="sd">            but also multi-dimensional dictionaries, such as xxx_var_matrix (or var_cube).</span>
<span class="sd">        :param coef_fn: A function that takes one dictionary key and returns anumber. One-dimension dictionaries (such</span>
<span class="sd">            as integer_var_dict) have plain object as keys, but multi-dimensional dictionaries have tuples keys.</span>
<span class="sd">            For example, a binary_var_matrix returns a dictionary, the keys of which are 2-tuples.</span>
<span class="sd">        :param assume_alldifferent: an optional flag whichi ndicates whether variables values in the dictionary</span>
<span class="sd">            can be assumed to be all different. This is true when the dicitonary has been built by Docplex&#39;s</span>
<span class="sd">            Model.xxx_var-dict(), and thi sis the default behavior.</span>
<span class="sd">            For a custom-built dictionary, set the flag to False. A wrong flag value may yield incorrect results.</span>

<span class="sd">        :return: an expression, built as a scalar product of all variables in the dictionay, multiplied by the result of the function.</span>

<span class="sd">        Examples:</span>

<span class="sd">                &gt;&gt;&gt; m1 = m.binary_var_matrix(keys1=range(1,3), keys2=range(1,3), name=&#39;b&#39;)</span>
<span class="sd">                &gt;&gt;&gt; s = m.scala_product_f(m1, lambda keys: keys[0] + keys[1])</span>

<span class="sd">                returns 2 b_1_1 + 3 b_1_2 +3 b_2_1 + 4 b_2_2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_callable</span> \
            <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coef_fn</span><span class="p">,</span>
             <span class="s2">&quot;Functional scalar product requires a function taking variable keys as argument. A non-callable was passed: </span><span class="si">{0!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                 <span class="n">coef_fn</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregator</span><span class="o">.</span><span class="n">_scal_prod_f</span><span class="p">(</span><span class="n">var_dict</span><span class="p">,</span> <span class="n">coef_fn</span><span class="p">,</span> <span class="n">assume_alldifferent</span><span class="p">)</span></div>

    <span class="n">dotf</span> <span class="o">=</span> <span class="n">scal_prod_f</span>

<div class="viewcode-block" id="Model.sum"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.sum">[docs]</a>    <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a linear expression summing over an iterable over expressions or variables.</span>

<span class="sd">        Note:</span>
<span class="sd">           This method returns 0 if the argument is empty.</span>
<span class="sd">        </span>
<span class="sd">        :param args: An iterable returning linear expressions, variables or numbers.</span>

<span class="sd">        :return: A linear expression or 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregator</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.sumsq"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.sumsq">[docs]</a>    <span class="k">def</span> <span class="nf">sumsq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a quadratic expression summing squares of expressions.</span>

<span class="sd">        Each element of the list is squared and added to the result. Quadratic expressions</span>
<span class="sd">        are not accepted, as they cannot be squared.</span>

<span class="sd">        Note:</span>
<span class="sd">           This method returns 0 if the argument is an empty list or iterator.</span>

<span class="sd">        :param args: An iterable returning linear expressions, variables or numbers.</span>

<span class="sd">        :return: A quadratic expression (possibly constant).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregator</span><span class="o">.</span><span class="n">sumsq</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div>

    <span class="n">sum_squares</span> <span class="o">=</span> <span class="n">sumsq</span>

<div class="viewcode-block" id="Model.sum_vars"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.sum_vars">[docs]</a>    <span class="k">def</span> <span class="nf">sum_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a linear expression that sums variables.</span>

<span class="sd">        This method is faster than `Model.sum()` but accepts only variables.</span>

<span class="sd">        :param dvars: an iterable returning variables.</span>

<span class="sd">        :return: a linear expression equal to the sum of the variables.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregator</span><span class="o">.</span><span class="n">_sum_vars</span><span class="p">(</span><span class="n">dvars</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.sum_vars_all_different"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.sum_vars_all_different">[docs]</a>    <span class="k">def</span> <span class="nf">sum_vars_all_different</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">terms</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a linear expression equal to sum of a list of decision variables.</span>
<span class="sd">        The variable sequence is a list or an iterator of variables.</span>

<span class="sd">        This method is faster than the standard generic summation method due to the fact that it takes only</span>
<span class="sd">        variables and does not take expressions as arguments.</span>

<span class="sd">        :param terms: A list or an iterator on variables only, with no duplicates.</span>

<span class="sd">        :return: a linear expression equal to the sum of the variables.</span>

<span class="sd">        Note:</span>
<span class="sd">           If the variable iteration contains duplicates, this function returns an incorrect result.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vars_all_different</span><span class="p">(</span><span class="n">itervalues</span><span class="p">(</span><span class="n">terms</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">var_seq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_var_seq_all_different</span><span class="p">(</span><span class="n">terms</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregator</span><span class="o">.</span><span class="n">_sum_vars_all_different</span><span class="p">(</span><span class="n">var_seq</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.le_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.le_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">le_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a &quot;less than or equal to&quot; linear constraint.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method returns a constraint object, that is not added to the model.</span>
<span class="sd">            To add it to the model, use the :func:`add_constraint` method.</span>

<span class="sd">        Args:</span>
<span class="sd">            lhs: An object that can be converted to a linear expression, typically a variable,</span>
<span class="sd">                    a member of an expression.</span>
<span class="sd">            rhs: An object that can be converted to a linear expression, typically a variable,</span>
<span class="sd">                    a member of an expression.</span>
<span class="sd">            name (string): An optional string to name the constraint.</span>

<span class="sd">        :returns: An instance of :class:`docplex.mp.linear.LinearConstraint`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_le_constraint</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.ge_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.ge_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">ge_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a &quot;greater than or equal to&quot; linear constraint.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method returns a constraint object that is not added to the model.</span>
<span class="sd">            To add it to the model, use the :func:`add_constraint` method.</span>

<span class="sd">        Args:</span>
<span class="sd">            lhs: An object that can be converted to a linear expression, typically a variable,</span>
<span class="sd">                    a member of an expression.</span>
<span class="sd">            rhs: An object that can be converted to a linear expression, typically a variable,</span>
<span class="sd">                    a number of an expression.</span>
<span class="sd">            name (string): An optional string to name the constraint.</span>

<span class="sd">        :returns: An instance of :class:`docplex.mp.linear.LinearConstraint`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_ge_constraint</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.eq_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.eq_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">eq_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates an equality constraint.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method returns a constraint object that is not added to the model.</span>
<span class="sd">            To add it to the model, use the :func:`add_constraint` method.</span>

<span class="sd">        :param lhs: An object that can be converted to a linear expression, typically a variable,</span>
<span class="sd">                    a member of an expression.</span>
<span class="sd">        :param rhs: An object that can be converted to a linear expression, typically a variable,</span>
<span class="sd">                    a member of an expression.</span>
<span class="sd">        :param name: An optional string to name the constraint.</span>

<span class="sd">        :returns: An instance of :class:`docplex.mp.linear.LinearConstraint`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_eq_constraint</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.linear_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.linear_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">linear_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">ctsense</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a linear constraint.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method returns a constraint object that is not added to the model.</span>
<span class="sd">            To add it to the model, use the :func:`add_constraint` method.</span>

<span class="sd">        Args:</span>
<span class="sd">            lhs: An object that can be converted to a linear expression, typically a variable,</span>
<span class="sd">                    a member of an expression.</span>
<span class="sd">            rhs: An object that can be converted to a linear expression, typically a variable,</span>
<span class="sd">                    a number of an expression.</span>
<span class="sd">            ctsense: A constraint sense; accepts either a</span>
<span class="sd">                    value of type `ComparisonType` or a string (e.g &#39;le&#39;, &#39;eq&#39;, &#39;ge&#39;).</span>

<span class="sd">            name (string): An optional string to name the constraint.</span>

<span class="sd">        :returns: An instance of :class:`docplex.mp.linear.LinearConstraint`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_binary_constraint</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">ctsense</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">not_equal_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_neq_constraint</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_engine_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">eng</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">LinearConstraint</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">eng</span><span class="o">.</span><span class="n">create_linear_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">RangeConstraint</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">eng</span><span class="o">.</span><span class="n">create_range_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">IndicatorConstraint</span><span class="p">):</span>
            <span class="c1"># here check whether linear ct is trivial. if yes do not send to CPLEX</span>
            <span class="n">indicator</span> <span class="o">=</span> <span class="n">ct</span>
            <span class="n">linct</span> <span class="o">=</span> <span class="n">indicator</span><span class="o">.</span><span class="n">linear_constraint</span>
            <span class="k">if</span> <span class="n">linct</span><span class="o">.</span><span class="n">is_trivial</span><span class="p">():</span>
                <span class="n">is_feasible</span> <span class="o">=</span> <span class="n">linct</span><span class="o">.</span><span class="n">_is_trivially_feasible</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">is_feasible</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Indicator constraint </span><span class="si">{0!s}</span><span class="s2"> has a trivially feasible constraint (no effect)&quot;</span><span class="p">,</span>
                                 <span class="n">indicator</span><span class="p">)</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">2</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;indicator constraint </span><span class="si">{0!s}</span><span class="s2"> has a trivially infeasible constraint; variable invalidated&quot;</span><span class="p">,</span>
                        <span class="n">indicator</span><span class="p">)</span>
                    <span class="n">indicator</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">4</span>
            <span class="k">return</span> <span class="n">eng</span><span class="o">.</span><span class="n">create_logical_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">is_equivalence</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">EquivalenceConstraint</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">eng</span><span class="o">.</span><span class="n">create_logical_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">is_equivalence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">QuadraticConstraint</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">eng</span><span class="o">.</span><span class="n">create_quadratic_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">PwlConstraint</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">eng</span><span class="o">.</span><span class="n">create_pwl_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Expecting binary constraint, indicator or range, got: </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">def</span> <span class="nf">_notify_trivial_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">,</span> <span class="n">is_feasible</span><span class="p">):</span>
        <span class="n">self_trivial_warn_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trivial_cts_message_level</span>
        <span class="k">if</span> <span class="n">is_feasible</span> <span class="ow">and</span> <span class="n">self_trivial_warn_level</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_trivial_feasible</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">self_trivial_warn_level</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_trivial_infeasible</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1"># ---</span>
        <span class="c1"># hereafter we are sure to warn</span>
        <span class="k">if</span> <span class="n">ct</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># elif ctname:</span>
        <span class="c1">#     arg = ctname</span>
        <span class="c1"># elif ct.has_name():</span>
        <span class="c1">#     arg = ct.name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="n">str_maxed</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
        <span class="c1"># ---</span>
        <span class="n">ct_typename</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">short_typename</span> <span class="k">if</span> <span class="n">ct</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;constraint&quot;</span>
        <span class="n">ct_rank</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_constraints</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="c1"># BEWARE: do not use if arg here</span>
        <span class="c1"># because if arg is a constraint, boolean conversion won&#39;t work.</span>
        <span class="n">trivial_msg</span> <span class="o">=</span> <span class="s2">&quot;Adding trivially </span><span class="si">{3}</span><span class="s2">feasible </span><span class="si">{2}</span><span class="s2">: &#39;</span><span class="si">{0!s}</span><span class="s2">&#39;, pos: </span><span class="si">{1}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_feasible</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">trivial_msg</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">ct_rank</span><span class="p">,</span> <span class="n">ct_typename</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">trivial_msg</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">ct_rank</span><span class="p">,</span> <span class="n">ct_typename</span><span class="p">,</span> <span class="s1">&#39;in&#39;</span><span class="p">)</span>
                <span class="n">docplex_add_trivial_infeasible_ct</span><span class="p">(</span><span class="n">ct</span><span class="o">=</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_feasible</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">trivial_msg</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ct_rank</span><span class="p">,</span> <span class="n">ct_typename</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">trivial_msg</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ct_rank</span><span class="p">,</span> <span class="n">ct_typename</span><span class="p">,</span> <span class="s1">&#39;in&#39;</span><span class="p">)</span>
                <span class="n">docplex_add_trivial_infeasible_ct</span><span class="p">(</span><span class="n">ct</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_register_ct_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">,</span> <span class="n">arg_checker</span><span class="p">):</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="n">arg_checker</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="k">if</span> <span class="n">ctname</span><span class="p">:</span>
            <span class="n">ct_name_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span>
            <span class="k">if</span> <span class="n">ct_name_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">checker</span><span class="o">.</span><span class="n">check_duplicate_name</span><span class="p">(</span><span class="n">ctname</span><span class="p">,</span> <span class="n">ct_name_map</span><span class="p">,</span> <span class="s2">&quot;constraint&quot;</span><span class="p">)</span>
                <span class="n">ct_name_map</span><span class="p">[</span><span class="n">ctname</span><span class="p">]</span> <span class="o">=</span> <span class="n">ct</span>
            <span class="n">ct</span><span class="o">.</span><span class="n">_set_name</span><span class="p">(</span><span class="n">ctname</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_prepare_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">,</span> <span class="n">check_for_trivial_ct</span><span class="p">,</span> <span class="n">arg_checker</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="n">arg_checker</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="k">if</span> <span class="n">ct</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># sum([]) == 0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_trivial_constraint</span><span class="p">(</span><span class="n">ct</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ctname</span><span class="o">=</span><span class="n">ctname</span><span class="p">,</span> <span class="n">is_feasible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">elif</span> <span class="n">ct</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="c1"># happens with sum([]) and constant e.g. sum([]) == 2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_trivial_constraint</span><span class="p">(</span><span class="n">ct</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ctname</span><span class="o">=</span><span class="n">ctname</span><span class="p">,</span> <span class="n">is_feasible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Adding a trivially infeasible constraint&quot;</span>
            <span class="k">if</span> <span class="n">ctname</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39; with name: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ctname</span><span class="p">)</span>
            <span class="c1"># analogous to 0 == 1, model is sure to fail</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_ct_to_add</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;add_constraint&#39;</span><span class="p">)</span>
            <span class="c1"># -- watch for trivial cts e.g. linexpr(0) &lt;= linexpr(1)</span>
            <span class="k">if</span> <span class="n">check_for_trivial_ct</span> <span class="ow">and</span> <span class="n">ct</span><span class="o">.</span><span class="n">is_trivial</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">ct</span><span class="o">.</span><span class="n">_is_trivially_feasible</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_notify_trivial_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">,</span> <span class="n">is_feasible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">ct</span><span class="o">.</span><span class="n">_is_trivially_infeasible</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_notify_trivial_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">,</span> <span class="n">is_feasible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># check for already posted cts.</span>
        <span class="k">if</span> <span class="n">ct</span><span class="o">.</span><span class="n">_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;constraint has already been posted: </span><span class="si">{0!s}</span><span class="s2">, index is: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># --- name management ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_ct_name</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">,</span> <span class="n">checker</span><span class="p">)</span>
        <span class="c1"># ---</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_add_constraint_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">used_ct_name</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_names</span> <span class="k">else</span> <span class="n">ctname</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">AbstractConstraint</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="s1">&#39;as_logical_operand&#39;</span><span class="p">):</span>
            <span class="n">ct1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">logical_expr_to_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_constraint</span><span class="p">(</span><span class="n">ct1</span><span class="p">)</span>

        <span class="n">check_trivial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">check_trivial_constraints</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">used_ct_name</span><span class="p">,</span> <span class="n">check_for_trivial_ct</span><span class="o">=</span><span class="n">check_trivial</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_post_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ct</span>
        <span class="k">elif</span> <span class="n">ct</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">or</span> <span class="n">ct</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ct</span>

    <span class="k">def</span> <span class="nf">_post_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
        <span class="n">ct_engine_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_engine_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_one_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">ct_engine_index</span><span class="p">,</span> <span class="n">is_ctname_safe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ct</span>

    <span class="k">def</span> <span class="nf">pop_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">allcts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">allcts</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">lastct</span> <span class="o">=</span> <span class="n">allcts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ct_name</span> <span class="o">=</span> <span class="n">lastct</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">ct_name</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span><span class="p">[</span><span class="n">ct_name</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="c1"># already removed</span>
                <span class="k">pass</span>

        <span class="k">del</span> <span class="n">allcts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">ct_index</span> <span class="o">=</span> <span class="n">lastct</span><span class="o">.</span><span class="n">unchecked_index</span>
        <span class="k">assert</span> <span class="n">lastct</span><span class="o">.</span><span class="n">is_valid_index</span><span class="p">(</span><span class="n">ct_index</span><span class="p">)</span>

        <span class="c1"># remove from engine.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">lastct</span><span class="p">)</span>
        <span class="n">cscope</span> <span class="o">=</span> <span class="n">lastct</span><span class="o">.</span><span class="n">_get_index_scope</span><span class="p">()</span>
        <span class="c1">#cscope.reindex_all(self.__engine)</span>
        <span class="c1">#self._sync_constraint_indices(cscope.iter)</span>
        <span class="n">cscope</span><span class="o">.</span><span class="n">notify_deleted</span><span class="p">(</span><span class="n">ct_index</span><span class="p">)</span>
        <span class="c1"># unsubscribe exprs.</span>
        <span class="n">lastct</span><span class="o">.</span><span class="n">notify_deleted</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_remove_constraint_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">ct_name</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">ct_name</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span><span class="p">[</span><span class="n">ct_name</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="c1"># already removed</span>
                <span class="k">pass</span>

        <span class="n">ct_index</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">unchecked_index</span>
        <span class="k">if</span> <span class="n">ct</span><span class="o">.</span><span class="n">is_valid_index</span><span class="p">(</span><span class="n">ct_index</span><span class="p">):</span>
            <span class="c1"># remove from model.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">allcts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span>
                <span class="n">ctx</span> <span class="o">=</span> <span class="n">compute_is_index</span><span class="p">(</span><span class="n">allcts</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ctx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">allcts</span><span class="p">[</span><span class="n">ctx</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="c1"># valid index but not added, this is weird...</span>
                <span class="k">pass</span>

            <span class="c1"># remove from engine.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
            <span class="n">cscope</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">_get_index_scope</span><span class="p">()</span>
            <span class="n">cscope</span><span class="o">.</span><span class="n">reindex_all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">)</span>
            <span class="n">cscope</span><span class="o">.</span><span class="n">update_indices</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sync_constraint_indices</span><span class="p">(</span><span class="n">cscope</span><span class="p">)</span>
            <span class="c1"># unsubscribe exprs.</span>
            <span class="n">ct</span><span class="o">.</span><span class="n">notify_deleted</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_resolve_ct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct_arg</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">verbose</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">silent</span>
        <span class="k">if</span> <span class="n">context</span><span class="p">:</span>
            <span class="n">printed_context</span> <span class="o">=</span> <span class="n">context</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">printed_context</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct_arg</span><span class="p">,</span> <span class="n">AbstractConstraint</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ct_arg</span>
        <span class="k">elif</span> <span class="n">is_string</span><span class="p">(</span><span class="n">ct_arg</span><span class="p">):</span>
            <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_constraint_by_name</span><span class="p">(</span><span class="n">ct_arg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ct</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">no constraint with name: </span><span class="se">\&quot;</span><span class="si">{1}</span><span class="se">\&quot;</span><span class="s2"> - ignored&quot;</span><span class="p">,</span> <span class="n">printed_context</span><span class="p">,</span> <span class="n">ct_arg</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ct</span>
        <span class="k">elif</span> <span class="n">is_int</span><span class="p">(</span><span class="n">ct_arg</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">ct_arg</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ct_index</span> <span class="o">=</span> <span class="n">ct_arg</span>
                <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_constraint_by_index</span><span class="p">(</span><span class="n">ct_index</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ct</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">verbose</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">no constraint with index: </span><span class="se">\&quot;</span><span class="si">{1}</span><span class="se">\&quot;</span><span class="s2"> - ignored&quot;</span><span class="p">,</span> <span class="n">printed_context</span><span class="p">,</span> <span class="n">ct_arg</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">ct</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">not a valid index: </span><span class="se">\&quot;</span><span class="si">{1}</span><span class="se">\&quot;</span><span class="s2"> - ignored&quot;</span><span class="p">,</span> <span class="n">printed_context</span><span class="p">,</span> <span class="n">ct_arg</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">unexpected argument </span><span class="si">{1!s}</span><span class="s2">, expecting string or constraint&quot;</span><span class="p">,</span> <span class="n">printed_context</span><span class="p">,</span> <span class="n">ct_arg</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="Model.remove_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.remove_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">remove_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct_arg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes a constraint from the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            ct_arg: The constraint to remove. Accepts either a constraint object or a string.</span>
<span class="sd">                If passed a string, looks for a constraint with that name.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_ct</span><span class="p">(</span><span class="n">ct_arg</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s2">&quot;remove_constraint&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ct</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_in_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;constraint&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_remove_constraint_internal</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.clear_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">clear_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method removes all constraints from the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">remove_constraints</span><span class="p">(</span><span class="n">cts</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># special case to denote all</span>
        <span class="c1"># clear containers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># clear constraint index scopes.</span>
        <span class="k">for</span> <span class="n">ctscope</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctscopes</span><span class="p">:</span>
            <span class="n">ctscope</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="Model.remove_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.remove_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">remove_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method removes a batch of constraints from the model.</span>

<span class="sd">        :param cts: an iterable of constraints (linear, range, quadratic, indicators)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">doomed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_constraint_seq</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">remove_constraints</span><span class="p">(</span><span class="n">doomed</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_remove_constraints_internal</span><span class="p">(</span><span class="n">doomed</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_remove_constraints_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doomed</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">self_cts_by_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cts_by_name</span>
        <span class="n">doomed_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">doomed</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">self_cts_by_name</span><span class="p">:</span>
                <span class="n">dname</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">dname</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">self_cts_by_name</span><span class="p">[</span><span class="n">dname</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">doomed_indices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">_index</span><span class="p">)</span>
        <span class="c1"># update container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">_index</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">doomed_indices</span><span class="p">]</span>
        <span class="c1"># TODO: handle reindexing</span>
        <span class="n">doomed_scopes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">_get_index_scope</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">doomed</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">doomed_scopes</span><span class="p">:</span>
            <span class="n">ds</span><span class="o">.</span><span class="n">reindex_all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">)</span>
            <span class="n">ds</span><span class="o">.</span><span class="n">update_indices</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">doomed</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">notify_deleted</span><span class="p">()</span>

<div class="viewcode-block" id="Model.remove"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">removed</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method removes a constraint or a collection of constraints from the model.</span>

<span class="sd">        :param removed: accapts either a constraint or an iterable on constraints (linear, range, quadratic, indicators)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">removed</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraints</span><span class="p">(</span><span class="n">removed</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">removed</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.add_range"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_range">[docs]</a>    <span class="k">def</span> <span class="nf">add_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">rng_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a new range constraint to the model.</span>

<span class="sd">        A range constraint states that a linear</span>
<span class="sd">        expression has to stay within an interval `[lb..ub]`.</span>
<span class="sd">        Both `lb` and `ub` have to be float numbers with `lb` smaller than `ub`.</span>

<span class="sd">        The method creates a new range constraint and adds it to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            lb (float): A floating-point number.</span>
<span class="sd">            expr: A linear expression, e.g. X+Y+Z.</span>
<span class="sd">            ub (float): A floating-point number, which should be greater than `lb`.</span>
<span class="sd">            rng_name (string): An optional name for the range constraint.</span>

<span class="sd">        :returns: The newly created range constraint.</span>
<span class="sd">        :rtype: :class:`docplex.mp.constr.RangeConstraint`</span>

<span class="sd">        Raises:</span>
<span class="sd">            An exception if `lb` is greater than `ub`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rng</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">range_constraint</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">ub</span><span class="p">)</span>
        <span class="n">ctname</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_names</span> <span class="k">else</span> <span class="n">rng_name</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_constraint_internal</span><span class="p">(</span><span class="n">rng</span><span class="p">,</span> <span class="n">ctname</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ct</span></div>

<div class="viewcode-block" id="Model.indicator_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.indicator_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">indicator_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_var</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">active_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates and returns a new indicator constraint.</span>

<span class="sd">        The indicator constraint is not added to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            binary_var: The binary variable used to control the satisfaction of the linear constraint.</span>
<span class="sd">            linear_ct: A linear constraint (EQ, LE, GE).</span>
<span class="sd">            active_value: 0 or 1. The value used to trigger the satisfaction of the constraint. The default is 1.</span>
<span class="sd">            name (string): An optional name for the indicator constraint.</span>

<span class="sd">        :return:</span>
<span class="sd">            The newly created indicator constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_binary_var</span><span class="p">(</span><span class="n">binary_var</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_linear_constraint</span><span class="p">(</span><span class="n">linear_ct</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_zero_or_one</span><span class="p">(</span><span class="n">active_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_in_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_var</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;binary variable&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_in_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;linear_constraint&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_indicator_constraint</span><span class="p">(</span><span class="n">binary_var</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">active_value</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.add_indicator"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_indicator">[docs]</a>    <span class="k">def</span> <span class="nf">add_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_var</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">active_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a new indicator constraint to the model.</span>

<span class="sd">        An indicator constraint links (one-way) the value of a binary variable to</span>
<span class="sd">        the satisfaction of a linear constraint.</span>
<span class="sd">        If the binary variable equals the active value, then the constraint is satisfied, but</span>
<span class="sd">        otherwise the constraint may or may not be satisfied.</span>

<span class="sd">        Args:</span>
<span class="sd">             binary_var: The binary variable used to control the satisfaction of the linear constraint.</span>
<span class="sd">             linear_ct: A linear constraint (EQ, LE, GE).</span>
<span class="sd">             active_value: 0 or 1. The value used to trigger the satisfaction of the constraint. The default is 1.</span>
<span class="sd">             name (string): An optional name for the indicator constraint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly created indicator constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">iname</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_names</span> <span class="k">else</span> <span class="n">name</span>
        <span class="n">indicator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indicator_constraint</span><span class="p">(</span><span class="n">binary_var</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">active_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_indicator</span><span class="p">(</span><span class="n">indicator</span><span class="p">,</span> <span class="n">iname</span><span class="p">)</span></div>

    <span class="n">_indicator_trivial_feasible_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>
    <span class="n">_indicator_trivial_infeasible_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span>

    <span class="k">def</span> <span class="nf">_add_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indicator</span><span class="p">,</span> <span class="n">ind_name</span><span class="p">,</span> <span class="n">check_trivials</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">linear_ct</span> <span class="o">=</span> <span class="n">indicator</span><span class="o">.</span><span class="n">linear_constraint</span>
        <span class="k">if</span> <span class="n">check_trivials</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">check_trivial_constraints</span><span class="p">()</span> <span class="ow">and</span> <span class="n">linear_ct</span><span class="o">.</span><span class="n">is_trivial</span><span class="p">():</span>
            <span class="n">is_feasible</span> <span class="o">=</span> <span class="n">linear_ct</span><span class="o">.</span><span class="n">_is_trivially_feasible</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">is_feasible</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Indicator constraint </span><span class="si">{0!s}</span><span class="s2"> has a trivial feasible linear constraint (has no effect)&quot;</span><span class="p">,</span>
                             <span class="n">indicator</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indicator_trivial_feasible_idx</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;indicator constraint </span><span class="si">{0!s}</span><span class="s2"> has a trivial infeasible linear constraint - invalidated&quot;</span><span class="p">,</span>
                             <span class="n">indicator</span><span class="p">)</span>
                <span class="n">indicator</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indicator_trivial_infeasible_idx</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_constraint_internal</span><span class="p">(</span><span class="n">indicator</span><span class="p">,</span> <span class="n">ind_name</span><span class="p">)</span>

<div class="viewcode-block" id="Model.add_equivalence"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_equivalence">[docs]</a>    <span class="k">def</span> <span class="nf">add_equivalence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_var</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">true_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a new equivalence constraint to the model.</span>

<span class="sd">        An equivalence constraints links two-way the value of a binary variable to</span>
<span class="sd">        the satisfaction of a discrete linear constraint.</span>
<span class="sd">        If the binary variable equals the true value, then the constraint is satisfied,</span>
<span class="sd">        conversely if the constraint is satisfied, the binary variable is equal to the true value.</span>

<span class="sd">        Args:</span>
<span class="sd">             binary_var: The binary variable used to control the satisfaction of the linear constraint.</span>
<span class="sd">             linear_ct: A linear constraint (EQ, LE, GE).</span>
<span class="sd">             true_value: 0 or 1. The value used to trigger the satisfaction of the constraint. The default is 1.</span>
<span class="sd">             name (string): An optional name for the equivalence constraint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly created equivalence constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">equiv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">equivalence_constraint</span><span class="p">(</span><span class="n">binary_var</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">true_value</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">eq_name</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_names</span> <span class="k">else</span> <span class="n">name</span>
        <span class="n">eqct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_constraint_internal</span><span class="p">(</span><span class="n">equiv</span><span class="p">,</span> <span class="n">eq_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">eqct</span></div>

<div class="viewcode-block" id="Model.equivalence_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.equivalence_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">equivalence_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_var</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">true_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates and returns a new equivalence constraint.</span>

<span class="sd">        The newly created equivalence constraint is not added to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">             binary_var: The binary variable used to control the satisfaction of the linear constraint.</span>
<span class="sd">             linear_ct: A linear constraint (EQ, LE, GE).</span>
<span class="sd">             true_value: 0 or 1. The value used to mark the satisfaction of the constraint. The default is 1.</span>
<span class="sd">             name (string): An optional name for the equivalence constraint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly created equivalence constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_binary_var</span><span class="p">(</span><span class="n">binary_var</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_linear_constraint</span><span class="p">(</span><span class="n">linear_ct</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_zero_or_one</span><span class="p">(</span><span class="n">true_value</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_in_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_var</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;binary variable&quot;</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_in_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;linear_constraint&quot;</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_discrete_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span>
                                                        <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;Model.add_equivalence() requires a discrete constraint&#39;</span><span class="p">)</span>
        <span class="n">used_name</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_names</span> <span class="k">else</span> <span class="n">name</span>
        <span class="n">equiv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_equivalence_constraint</span><span class="p">(</span><span class="n">binary_var</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">,</span> <span class="n">true_value</span><span class="p">,</span> <span class="n">used_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">equiv</span></div>

<div class="viewcode-block" id="Model.add_equivalences"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_equivalences">[docs]</a>    <span class="k">def</span> <span class="nf">add_equivalences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_vars</span><span class="p">,</span> <span class="n">cts</span><span class="p">,</span> <span class="n">true_values</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a batch of equivalence constraints to the model.</span>

<span class="sd">        This method adds a batch of equivalence constraints to the model.</span>

<span class="sd">        :param binary_vars: a sequence of binary variables.</span>
<span class="sd">        :param cts: a sequence of discrete linear constraints</span>
<span class="sd">        :param true_values: the true values to use. Accepts either 1, 0 or a sequence of {0, 1} values.</span>
<span class="sd">        :param names: an optional sequence of names</span>

<span class="sd">        All sequences must have the same length.</span>

<span class="sd">        :return: a list of equivalence constraints.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_batch_logical_cts</span><span class="p">(</span><span class="n">binary_vars</span><span class="p">,</span> <span class="n">cts</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">true_values</span><span class="p">,</span> <span class="n">is_equivalence</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                           <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.add_equivalences&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.add_indicators"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_indicators">[docs]</a>    <span class="k">def</span> <span class="nf">add_indicators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_vars</span><span class="p">,</span> <span class="n">cts</span><span class="p">,</span> <span class="n">true_values</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a batch of indicator constraints to the model.</span>

<span class="sd">        This method adds a batch of indicator constraints to the model.</span>

<span class="sd">        :param binary_vars: a sequence of binary variables.</span>
<span class="sd">        :param cts: a sequence of discrete linear constraints</span>
<span class="sd">        :param true_values: the true values to use. Accepts either 1, 0 or a sequence of {0, 1} values.</span>
<span class="sd">        :param names: an optional sequence of names</span>

<span class="sd">        All sequences must have the same length.</span>

<span class="sd">        :return: a list of indicator constraints.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_batch_logical_cts</span><span class="p">(</span><span class="n">binary_vars</span><span class="p">,</span> <span class="n">cts</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">true_values</span><span class="p">,</span> <span class="n">is_equivalence</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                           <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.add_indicators&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_add_batch_logical_cts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_vars</span><span class="p">,</span> <span class="n">cts</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">true_values</span><span class="p">,</span> <span class="n">is_equivalence</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="n">bvars</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_var_seq</span><span class="p">(</span><span class="n">binary_vars</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="n">caller</span><span class="p">)</span>
        <span class="n">ctseq</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_constraint_seq</span><span class="p">(</span><span class="n">cts</span><span class="p">,</span> <span class="n">check_linear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">n_vars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">bvars</span><span class="p">)</span>
            <span class="n">n_cts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="c1"># if passed iterators, no len()</span>
            <span class="n">bvars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">bvars</span><span class="p">)</span>
            <span class="n">ctseq</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ctseq</span><span class="p">)</span>
            <span class="n">n_vars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">bvars</span><span class="p">)</span>
            <span class="n">n_cts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctseq</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">n_vars</span> <span class="o">!=</span> <span class="n">n_cts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;Model.add_equivalences(): binary_vars and linear cts must have same size.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">true_values</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">true_values</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">actual_true_values</span> <span class="o">=</span> <span class="n">generate_constant</span><span class="p">(</span><span class="n">true_values</span><span class="p">,</span> <span class="n">n_vars</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">true_values</span><span class="p">):</span>
            <span class="n">actual_true_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">true_values</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual_true_values</span><span class="p">)</span> <span class="o">!=</span> <span class="n">n_vars</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;Model.add_equivalences(): true_values has wrong size. expecting: </span><span class="si">{0}</span><span class="s1">, got: </span><span class="si">{1}</span><span class="s1">&#39;</span>
                           <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_vars</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual_true_values</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">true_values</span><span class="p">:</span>
                <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_zero_or_one</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;Model.add_equivalence(): true_values expects 0|1 or sequence of {{0, 1}}, got: </span><span class="si">{0!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">true_values</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_names</span><span class="p">:</span>
            <span class="n">c_names</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_string_seq</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="n">caller</span><span class="p">)</span>
            <span class="n">used_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">c_names</span><span class="p">]</span>
            <span class="c1">#     checker.typecheck_string(n, accept_empty=False, accept_none=True)</span>
            <span class="c1">#     used_names.append(n or &#39;&#39;)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">used_names</span> <span class="o">=</span> <span class="n">generate_constant</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">n_vars</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_equivalence</span><span class="p">:</span>
            <span class="c1"># check discrete</span>
            <span class="n">lcts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ctseq</span><span class="p">)</span>
            <span class="n">caller</span> <span class="o">=</span> <span class="s2">&quot;Model.add_equivalences&quot;</span> <span class="k">if</span> <span class="n">is_equivalence</span> <span class="k">else</span> <span class="s2">&quot;Model.add_indicators&quot;</span>
            <span class="n">caller</span> <span class="o">+=</span> <span class="s2">&quot; requires an iterable of discrete constraints&quot;</span>
            <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="n">lcts</span><span class="p">:</span>
                <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_discrete_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">caller</span><span class="p">)</span>
            <span class="n">eqcts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_batch_equivalence_constraints</span><span class="p">(</span><span class="n">bvars</span><span class="p">,</span> <span class="n">lcts</span><span class="p">,</span> <span class="n">actual_true_values</span><span class="p">,</span> <span class="n">used_names</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_equivalence_constraints_</span><span class="p">(</span><span class="n">eqcts</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">eqcts</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">indcts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_batch_indicator_constraints</span><span class="p">(</span><span class="n">bvars</span><span class="p">,</span> <span class="n">ctseq</span><span class="p">,</span> <span class="n">actual_true_values</span><span class="p">,</span> <span class="n">used_names</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_indicator_constraints_</span><span class="p">(</span><span class="n">indcts</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">indcts</span>

<div class="viewcode-block" id="Model.add_indicator_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_indicator_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">add_indicator_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indcts</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a batch of indicator constraints to the model</span>

<span class="sd">        :param indcts: an iterable returning indicator constraints.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`indicator_constraint`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ind_cts_list_</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">indcts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_logical_constraint_seq</span><span class="p">(</span><span class="n">ind_cts_list_</span><span class="p">,</span> <span class="n">true_if_equivalence</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ind_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">create_batch_logical_constraints</span><span class="p">(</span><span class="n">ind_cts_list_</span><span class="p">,</span> <span class="n">is_equivalence</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_block_cts</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logical_scope</span><span class="p">,</span> <span class="n">ind_cts_list_</span><span class="p">,</span> <span class="n">ind_indices</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ind_cts_list_</span></div>

    <span class="n">add_indicator_constraints_</span> <span class="o">=</span> <span class="n">add_indicator_constraints</span>

<div class="viewcode-block" id="Model.add_equivalence_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_equivalence_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">add_equivalence_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eqcts</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a batch of equivalence constraints to the model</span>

<span class="sd">        :param eqcts: an iterable returning equivalence constraints.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`equivalence_constraint`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eqcts_list_</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">eqcts</span><span class="p">)</span>  <span class="c1"># the list is traversed twice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_logical_constraint_seq</span><span class="p">(</span><span class="n">eqcts_list_</span><span class="p">,</span> <span class="n">true_if_equivalence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">eq_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">create_batch_logical_constraints</span><span class="p">(</span><span class="n">eqcts_list_</span><span class="p">,</span> <span class="n">is_equivalence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_block_cts</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logical_scope</span><span class="p">,</span> <span class="n">eqcts_list_</span><span class="p">,</span> <span class="n">eq_indices</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">eqcts_list_</span></div>

    <span class="n">add_equivalence_constraints_</span> <span class="o">=</span> <span class="n">add_equivalence_constraints</span>

<div class="viewcode-block" id="Model.if_then"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.if_then">[docs]</a>    <span class="k">def</span> <span class="nf">if_then</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">if_ct</span><span class="p">,</span> <span class="n">then_ct</span><span class="p">,</span> <span class="n">negate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates and returns an if-then constraint.</span>

<span class="sd">        An if-then constraint links two constraints ct1, ct2 such that when ct1 is satisfied then ct2 is also satisfied.</span>

<span class="sd">        :param if_ct: a linear constraint, the satisfaction of which governs the satisfaction of the `then_ct`</span>
<span class="sd">        :param then_ct: a linear constraint, which becomes satisfied as soon as `if_ct` is satisfied</span>
<span class="sd">            (or when it is not, depending on the `negate` flag).</span>
<span class="sd">        :param negate: an optional boolean flag (default is False). If True, `then_ct` is satisfied when `if_ct` is *not* satisfied.</span>

<span class="sd">        :return:</span>
<span class="sd">            an instance of IfThenConstraint, that is not added to the model.</span>
<span class="sd">            Use Model.add_constraint() or Model.add() to add it to the model.</span>

<span class="sd">        Note:</span>
<span class="sd">            This constraint relies on the status of the `if_ct` constraint, so this constraint must be discrete,</span>
<span class="sd">            otherwise an exception will be raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_linear_constraint</span><span class="p">(</span><span class="n">if_ct</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_linear_constraint</span><span class="p">(</span><span class="n">then_ct</span><span class="p">)</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_discrete_constraint</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="o">=</span><span class="n">if_ct</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;Model.if_then()&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_if_then_constraint</span><span class="p">(</span><span class="n">if_ct</span><span class="p">,</span> <span class="n">then_ct</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">negate</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.add_if_then"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_if_then">[docs]</a>    <span class="k">def</span> <span class="nf">add_if_then</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">if_ct</span><span class="p">,</span> <span class="n">then_ct</span><span class="p">,</span> <span class="n">negate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new if-then constraint and adds it to the model</span>

<span class="sd">        :param if_ct: a linear constraint, the satisfaction of which governs the satisfaction of the `then_ct`</span>
<span class="sd">        :param then_ct: a linear constraint, which becomes satisfied as soon as `if_ct` is satisfied</span>
<span class="sd">            (or when it is not, depending on the `negate` flag).</span>
<span class="sd">        :param negate: an optional boolean flag (default is False). If True, `then_ct` is satisfied when `if_ct` is *not* satisfied.</span>

<span class="sd">        :return:</span>
<span class="sd">            an instance of IfThenConstraint.</span>

<span class="sd">        Note:</span>
<span class="sd">            This constraint relies on the status of the `if_ct` constraint, so this constraint must be discrete,</span>
<span class="sd">            otherwise an exception will be raised. On the opposite, the `then_ct` constraint can be non-discrete.</span>

<span class="sd">            An alternative syntax is to use the `&gt;&gt;` operator on linear constraints:</span>

<span class="sd">                &gt;&gt;&gt; m.add(c1 &gt;&gt; c2)</span>

<span class="sd">            is exactly equivalent to:</span>

<span class="sd">                &gt;&gt;&gt; m.add_if_then(c1, c2)</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ifthen_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">if_then</span><span class="p">(</span><span class="n">if_ct</span><span class="p">,</span> <span class="n">then_ct</span><span class="p">,</span> <span class="n">negate</span><span class="o">=</span><span class="n">negate</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_constraint</span><span class="p">(</span><span class="n">ifthen_ct</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.range_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.range_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">range_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">rng_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new range constraint but does not add it to the model.</span>

<span class="sd">        A range constraint states that a linear</span>
<span class="sd">        expression has to stay within an interval `[lb..ub]`.</span>
<span class="sd">        Both `lb` and `ub` have to be floating-point numbers with `lb` smaller than `ub`.</span>

<span class="sd">        The method creates a new range constraint but does not add it to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            lb: A floating-point number.</span>
<span class="sd">            expr: A linear expression, e.g. X+Y+Z.</span>
<span class="sd">            ub: A floating-point number, which should be greater than `lb`.</span>
<span class="sd">            rng_name: An optional name for the range constraint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly created range constraint.</span>
<span class="sd">        Raises:</span>
<span class="sd">             An exception if `lb` is greater than `ub`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="s1">&#39;Model.range_constraint&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_num</span><span class="p">(</span><span class="n">ub</span><span class="p">,</span> <span class="s1">&#39;Model.range_constraint&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">rng_name</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">rng</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_range_constraint</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">rng_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rng</span></div>

<div class="viewcode-block" id="Model.add_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">add_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a new linear constraint to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            ct: A linear constraint of the form &lt;expr1&gt; &lt;op&gt; &lt;expr2&gt;, where both expr1 and expr2 are</span>
<span class="sd">                 linear expressions built from variables in the model, and &lt;op&gt; is a relational operator</span>
<span class="sd">                 among &lt;= (less than or equal), == (equal), and &gt;= (greater than or equal).</span>
<span class="sd">            ctname (string): An optional string used to name the constraint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly added constraint.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`add_constraint_`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_constraint_internal</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ct</span></div>

<div class="viewcode-block" id="Model.add_constraint_"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_constraint_">[docs]</a>    <span class="k">def</span> <span class="nf">add_constraint_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a new linear constraint to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            ct: A linear constraint of the form &lt;expr1&gt; &lt;op&gt; &lt;expr2&gt;, where both expr1 and expr2 are</span>
<span class="sd">                 linear expressions built from variables in the model, and &lt;op&gt; is a relational operator</span>
<span class="sd">                 among &lt;= (less than or equal), == (equal), and &gt;= (greater than or equal).</span>
<span class="sd">            ctname (string): An optional string used to name the constraint.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method does the same as `docplex.mp.model.Model.add_constraint()` except that it has no return value.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`add_constraint`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_constraint_internal</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">ctname</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">ct</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">ct</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_constraints_</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_constraint_</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="Model.add_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">add_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a batch of linear constraints to the model in one operation.</span>

<span class="sd">        Each constraint from the `cts` iterable is added to the model.</span>
<span class="sd">        If present, the `names` iterable is used to set names to the constraints.</span>

<span class="sd">        Example:</span>
<span class="sd">                # list</span>
<span class="sd">                &gt;&gt;&gt; m.add_constraints([x &gt;= 1, y&lt;= 3], [&quot;c1&quot;, &quot;c2&quot;])</span>
<span class="sd">                # comprehension</span>
<span class="sd">                &gt;&gt;&gt; m.add_constraints((xs[i] &gt;= i for i in range(N)))</span>

<span class="sd">        Args:</span>
<span class="sd">            cts: An iterable of linear constraints; can be a list, a set or a comprehensions.</span>
<span class="sd">                Any Python object, which can be iterated on and yield consttraint objects.</span>
<span class="sd">            names: An optional iterable on strings. ANy Python object which can be iterated on</span>
<span class="sd">                and yield strings. The default value is None, meaning no names are set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of the newly added constraints.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`add_constraints_`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_iterable</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">is_string</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">names</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Model.add_constraints() expects a sequence of strings or a non-empty string&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_new_constraint_block2</span><span class="p">(</span><span class="n">cts</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_new_constraint_block1</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.add_constraints_"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_constraints_">[docs]</a>    <span class="k">def</span> <span class="nf">add_constraints_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a batch of linear constraints to the model in one operation.</span>

<span class="sd">        Same as `docplex.model.Model.add_constraints()` except that is does not return anything.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_iterable</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_new_constraint_block2</span><span class="p">(</span><span class="n">cts</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_new_constraint_block1</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">add_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lbs</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">ubs</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="n">lbsl</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_num_seq</span><span class="p">(</span><span class="n">lbs</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.add_ranges.lbs&quot;</span><span class="p">)</span>
        <span class="n">ubsl</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_num_seq</span><span class="p">(</span><span class="n">ubs</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.add_ranges.ubs&quot;</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_iterable</span><span class="p">(</span><span class="n">exprs</span><span class="p">)</span>
        <span class="n">range_names</span> <span class="o">=</span> <span class="n">names</span> <span class="k">if</span> <span class="n">names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_names</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_range_block</span><span class="p">(</span><span class="n">lbsl</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">ubsl</span><span class="p">,</span> <span class="n">range_names</span><span class="p">)</span>

    <span class="c1"># ----------------------------------------------------</span>
    <span class="c1"># objective</span>
    <span class="c1"># ----------------------------------------------------</span>

<div class="viewcode-block" id="Model.minimize"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.minimize">[docs]</a>    <span class="k">def</span> <span class="nf">minimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets an expression as the expression to be minimized.</span>

<span class="sd">        The argument is converted to a linear expression. Accepted types are variables (instances of</span>
<span class="sd">        :class:`docplex.mp.linear.Var` class), linear expressions (instances of</span>
<span class="sd">        :class:`docplex.mp.linear.LinearExpr`), or numbers.</span>

<span class="sd">        :param expr: A linear expression or a variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">Minimize</span><span class="p">,</span> <span class="n">expr</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.maximize"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.maximize">[docs]</a>    <span class="k">def</span> <span class="nf">maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets an expression as the expression to be maximized.</span>

<span class="sd">        The argument is converted to a linear expression. Accepted types are variables (instances of</span>
<span class="sd">        :class:`docplex.mp.linear.Var` class), linear expressions (instances of</span>
<span class="sd">        :class:`docplex.mp.linear.LinearExpr`), or numbers.</span>

<span class="sd">        :param expr: A linear expression or a variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">Maximize</span><span class="p">,</span> <span class="n">expr</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_make_lex_priorities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nb_objectives</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">nb_objectives</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_compile_multiobj_expr_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">caller</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="c1"># converts an exprs argument to a (possibly empty) list of expressions.</span>
        <span class="c1"># no side-effect is performed here, the caller has to take action.</span>
        <span class="n">caller_string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">caller</span><span class="p">)</span> <span class="k">if</span> <span class="n">caller</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exprs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">accept_empty</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">requires a non-empty list of linear expressions, got: </span><span class="si">{1!r}</span><span class="s2">&quot;</span><span class="p">,</span>
                             <span class="n">caller_string</span><span class="p">,</span> <span class="n">exprs</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">[]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">requires a non-empty list of linear expressions, got: </span><span class="si">{1!r}</span><span class="s2">&quot;</span><span class="p">,</span>
                             <span class="n">caller_string</span><span class="p">,</span> <span class="n">exprs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_indexable</span><span class="p">(</span><span class="n">exprs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">exprs</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_to_linear_operand</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">exprs</span>

            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">DOcplexException</span><span class="p">):</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">requires an indexable sequence of linear expressions, </span><span class="si">{1!r}</span><span class="s2"> was passed&quot;</span><span class="p">,</span>
            <span class="n">caller_string</span><span class="p">,</span> <span class="n">exprs</span><span class="p">)</span>


    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">supports_multi_objective</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span><span class="o">.</span><span class="n">_supports_multi_objective</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_supports_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">ok</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">supports_multi_objective</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ok</span>

    <span class="k">def</span> <span class="nf">check_multi_objective_support</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">ok</span><span class="p">,</span> <span class="n">why</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">supports_multi_objective</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">why</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="n">why</span><span class="p">)</span>

<div class="viewcode-block" id="Model.minimize_static_lex"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.minimize_static_lex">[docs]</a>    <span class="k">def</span> <span class="nf">minimize_static_lex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">abstols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">objnames</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets a list of expressions to be minimized in a lexicographic solve.</span>
<span class="sd">        exprs must be an ordered sequence of objective functions, that are minimized.</span>

<span class="sd">        The argument is converted to a list of linear expressions. Accepted types for the list elements are variables</span>
<span class="sd">        (instances of :class:`docplex.mp.linear.Var` class), linear expressions (instances of</span>
<span class="sd">        :class:`docplex.mp.linear.LinearExpr`), or numbers.</span>

<span class="sd">        Warning:</span>
<span class="sd">           This method requires CPLEX 12.9</span>

<span class="sd">        Args:</span>
<span class="sd">            exprs: a list of linear expressions or variables</span>
<span class="sd">            abstols: if defined, a list of absolute tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            reltols: if defined, a list of relative tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            objnames:  if defined, a list of names for objectives having the same size as the `exprs` argument.</span>


<span class="sd">        *New in version 2.9*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_lex_multi_objective</span><span class="p">(</span><span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">Minimize</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">abstols</span><span class="o">=</span><span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">objnames</span><span class="p">,</span>
                                     <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.minimize_static_lex()&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.maximize_static_lex"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.maximize_static_lex">[docs]</a>    <span class="k">def</span> <span class="nf">maximize_static_lex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">abstols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">objnames</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets a list of expressions to be maximized in a lexicographic solve.</span>
<span class="sd">        exprs defines an ordered sequence of objective functions that are maximized.</span>

<span class="sd">        The argument is converted to a list of linear expressions. Accepted types for the list elements are variables</span>
<span class="sd">        (instances of :class:`docplex.mp.linear.Var` class), linear expressions (instances of</span>
<span class="sd">        :class:`docplex.mp.linear.LinearExpr`), or numbers.</span>

<span class="sd">        Warning:</span>
<span class="sd">            This method requires CPLEX 12.9</span>

<span class="sd">        Args:</span>
<span class="sd">            exprs: a list of linear expressions or variables</span>
<span class="sd">            abstols: if defined, a list of absolute tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            reltols: if defined, a list of relative tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            objnames:  if defined, a list of names for objectives having the same size as the `exprs` argument.</span>


<span class="sd">        *New in version 2.9*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_lex_multi_objective</span><span class="p">(</span><span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">Maximize</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">abstols</span><span class="o">=</span><span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">objnames</span><span class="p">,</span>
                                     <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.maximize_static_lex()&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.is_minimized"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.is_minimized">[docs]</a>    <span class="k">def</span> <span class="nf">is_minimized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks whether the model is a minimization model.</span>

<span class="sd">        Note:</span>
<span class="sd">            This returns True even if the expression to minimize is a constant.</span>
<span class="sd">            To check whether the model has a non-constant objective, use :func:`is_optimized`.</span>

<span class="sd">        Returns:</span>
<span class="sd">           Boolean: True if the model is a minimization model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_sense</span> <span class="ow">is</span> <span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">Minimize</span></div>

<div class="viewcode-block" id="Model.is_maximized"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.is_maximized">[docs]</a>    <span class="k">def</span> <span class="nf">is_maximized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks whether the model is a maximization model.</span>

<span class="sd">        Note:</span>
<span class="sd">           This returns True even if the expression to maximize is a constant.</span>
<span class="sd">           To check whether the model has a non-constant objective, use :func:`is_optimized`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Boolean: True if the model is a maximization model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_sense</span> <span class="ow">is</span> <span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">Maximize</span></div>

<div class="viewcode-block" id="Model.objective_coef"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.objective_coef">[docs]</a>    <span class="k">def</span> <span class="nf">objective_coef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the objective coefficient of a variable.</span>

<span class="sd">        The objective coefficient is the coefficient of the given variable in</span>
<span class="sd">        the model&#39;s objective expression. If the variable is not explicitly</span>
<span class="sd">        mentioned in the objective, it returns 0.</span>

<span class="sd">        :param dvar: The decision variable for which to compute the objective coefficient.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The objective coefficient of the variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_var</span><span class="p">(</span><span class="n">dvar</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_coef</span><span class="p">(</span><span class="n">dvar</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_objective_coef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span><span class="o">.</span><span class="n">unchecked_get_coef</span><span class="p">(</span><span class="n">dvar</span><span class="p">)</span>

<div class="viewcode-block" id="Model.remove_objective"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.remove_objective">[docs]</a>    <span class="k">def</span> <span class="nf">remove_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Clears the current objective.</span>

<span class="sd">        This is equivalent to setting &quot;minimize 0&quot;.</span>
<span class="sd">        Any subsequent solve will look only for a feasible solution.</span>
<span class="sd">        You can detect this state by calling :func:`has_objective` on the model.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">default_objective_sense</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_default_objective_expr</span><span class="p">())</span></div>

<div class="viewcode-block" id="Model.is_optimized"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.is_optimized">[docs]</a>    <span class="k">def</span> <span class="nf">is_optimized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks whether the model has a non-constant objective expression.</span>

<span class="sd">        A model with a constant objective will only search for a feasible solution when solved.</span>
<span class="sd">        This happens either if no objective has been assigned to the model,</span>
<span class="sd">        or if the objective has been removed with :func:`remove_objective`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Boolean: True, if the model has a non-constant objective expression.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_multi_objective</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span><span class="o">.</span><span class="n">is_constant</span><span class="p">()</span></div>

<div class="viewcode-block" id="Model.set_multi_objective"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.set_multi_objective">[docs]</a>    <span class="k">def</span> <span class="nf">set_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">abstols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets a list of objectives.</span>

<span class="sd">        Warning:</span>
<span class="sd">            This method requires CPLEX 12.9 or above</span>

<span class="sd">        Args:</span>
<span class="sd">            sense: Either an instance of :class:`docplex.mp.basic.ObjectiveSense` (Minimize or Maximize),</span>
<span class="sd">                or a string: &quot;min&quot; or &quot;max&quot;.</span>
<span class="sd">            exprs: Is converted to a list of expressions. Accepted types for this list items are variables,</span>
<span class="sd">                linear expressions or numbers.</span>
<span class="sd">            priorities: a list of priorities having the same size as the `exprs` argument. Priorities</span>
<span class="sd">                define how objectives are grouped together into sub-problems, and in which order these sub-problems</span>
<span class="sd">                are solved (in decreasing order of priorities). If not defined, allexpressions are assumed to share the same priority,</span>
<span class="sd">                and are combined with `weights`.</span>
<span class="sd">            weights: if defined, a list of weights having the same size as the `exprs` argument. Weights define</span>
<span class="sd">                how objectives with same priority are blended together to define the associated sub-problem&#39;s</span>
<span class="sd">                objective that is optimized. If not defined, weights are assumed to be all equal to 1.</span>
<span class="sd">            abstols: if defined, a list of absolute tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            reltols: if defined, a list of relative tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            names:  if defined, a list of names for objectives having the same size as the `exprs` argument.</span>

<span class="sd">        Note:</span>
<span class="sd">            When using a number for an objective, the search will not optimize but only look for a feasible solution.</span>

<span class="sd">        *New in version 2.9.*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective_sense</span><span class="p">(</span><span class="n">sense</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_multi_objective_exprs</span><span class="p">(</span><span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="o">=</span><span class="n">priorities</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span>
                                        <span class="n">abstols</span><span class="o">=</span><span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
                                        <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.set_multi_objective()&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.set_lex_multi_objective"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.set_lex_multi_objective">[docs]</a>    <span class="k">def</span> <span class="nf">set_lex_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">abstols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets a list of objectives to be solved in a lexicographic fashion.</span>

<span class="sd">        Objective expressions are listed in decreasing priority.</span>

<span class="sd">        Warning:</span>
<span class="sd">            This method requires CPLEX 12.9</span>

<span class="sd">        Args:</span>
<span class="sd">            sense: Either an instance of :class:`docplex.mp.basic.ObjectiveSense` (Minimize or Maximize),</span>
<span class="sd">                or a string: &quot;min&quot; or &quot;max&quot;.</span>
<span class="sd">            exprs: Is converted to a list of expressions. Accepted types for this list items are variables,</span>
<span class="sd">                linear expressions or numbers.</span>

<span class="sd">            abstols: if defined, a list of absolute tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            reltols: if defined, a list of relative tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            names:  if defined, a list of names for objectives having the same size as the `exprs` argument.</span>

<span class="sd">        Note:</span>
<span class="sd">            When using a number for an objective, the search will not optimize but only look for a feasible solution.</span>

<span class="sd">        *New in version 2.9.*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_lex_multi_objective</span><span class="p">(</span> <span class="n">sense</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">abstols</span><span class="o">=</span><span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.set_lex_multi_objective&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_set_lex_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">caller</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective_sense</span><span class="p">(</span><span class="n">sense</span><span class="p">)</span>
        <span class="n">lex_exprs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compile_multiobj_expr_list</span><span class="p">(</span><span class="n">exprs</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="n">caller</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">lex_priorities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_lex_priorities</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">exprs</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_multi_objective_internal</span><span class="p">(</span><span class="n">lex_exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="o">=</span><span class="n">lex_priorities</span><span class="p">,</span>
                                           <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                           <span class="n">abstols</span><span class="o">=</span><span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
                                           <span class="n">caller</span><span class="o">=</span><span class="n">caller</span><span class="p">)</span>

<div class="viewcode-block" id="Model.set_multi_objective_exprs"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.set_multi_objective_exprs">[docs]</a>    <span class="k">def</span> <span class="nf">set_multi_objective_exprs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                  <span class="n">abstols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Defines a list of blended objectives.</span>

<span class="sd">        Objectives with the same priority are combined using weights. Then, objectives are optimized in a</span>
<span class="sd">        lexicographic fashion by decreasing priority.</span>

<span class="sd">        Args:</span>
<span class="sd">            exprs: Is converted to a list of linear expressions. Accepted types for this list items are variables,</span>
<span class="sd">                linear expressions or numbers.</span>
<span class="sd">            priorities: if defined, a list of priorities having the same size as the `exprs` argument. Priorities</span>
<span class="sd">                define how objectives are grouped together into sub-problems, and in which order these sub-problems</span>
<span class="sd">                are solved (in decreasing order of priorities).</span>
<span class="sd">            weights: if defined, a list of weights having the same size as the `exprs` argument. Weights define</span>
<span class="sd">                how objectives with same priority are blended together to define the associated sub-problem</span>
<span class="sd">                objective that is optimized.</span>
<span class="sd">            abstols: if defined, a list of absolute tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            reltols:if defined, a list of relative tolerances having the same size as the `exprs` argument.</span>
<span class="sd">            names: if defined, a list of names for objectives having the same size as the `exprs` argument.</span>

<span class="sd">        Note:</span>
<span class="sd">            When using a number for an objective, the search will not optimize but only look for a feasible solution.</span>

<span class="sd">        *New in version 2.9.*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_multi_objective_exprs</span><span class="p">(</span><span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.set_multi_objective()&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_set_multi_objective_exprs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                  <span class="n">abstols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">exprs_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compile_multiobj_expr_list</span><span class="p">(</span><span class="n">exprs</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="n">caller</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_multi_objective_internal</span><span class="p">(</span><span class="n">exprs_</span><span class="p">,</span> <span class="n">priorities</span><span class="o">=</span><span class="n">priorities</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span>
                                           <span class="n">abstols</span><span class="o">=</span><span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="o">=</span><span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span> <span class="n">clear_objective</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                           <span class="n">caller</span><span class="o">=</span><span class="n">caller</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_multi_objective_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span>
                                      <span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="p">,</span>
                                      <span class="n">names</span><span class="p">,</span> <span class="n">clear_objective</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># INTERNAL: assumes exprs is a valid list of linear expressions</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">exprs</span><span class="p">):</span>
            <span class="n">expr0</span> <span class="o">=</span> <span class="n">exprs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Multi-objective has been converted to single objective: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">str_maxed</span><span class="p">(</span><span class="n">expr0</span><span class="p">,</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">16</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_objective_expr</span><span class="p">(</span><span class="n">expr0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">notify_used</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_objective</span><span class="p">()</span> <span class="ow">and</span> <span class="n">clear_objective</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_clear_objective_expr</span><span class="p">()</span>

            <span class="k">def</span> <span class="nf">refine_caller</span><span class="p">(</span><span class="n">caller_</span><span class="p">,</span> <span class="n">qualifier</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">caller_</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">caller_</span>
                <span class="k">elif</span> <span class="n">caller_</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">caller_</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">qualifier</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">caller_</span><span class="p">,</span> <span class="n">qualifier</span><span class="p">)</span>

            <span class="n">abstols_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_typecheck_optional_num_seq</span><span class="p">(</span><span class="n">abstols</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="n">refine_caller</span><span class="p">(</span><span class="n">caller</span><span class="p">,</span> <span class="s1">&#39;abstols&#39;</span><span class="p">))</span>
            <span class="n">reltols_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_typecheck_optional_num_seq</span><span class="p">(</span><span class="n">reltols</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="n">refine_caller</span><span class="p">(</span><span class="n">caller</span><span class="p">,</span> <span class="s1">&#39;reltols&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_engine_multi_objective_exprs</span><span class="p">(</span><span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">abstols_</span><span class="p">,</span> <span class="n">reltols_</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_clear_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">zero_exprs</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_new_default_objective_expr</span><span class="p">()]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_engine_multi_objective_exprs</span><span class="p">(</span><span class="n">zero_exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                               <span class="n">abstols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">reltols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_engine_multi_objective_exprs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exprs</span><span class="p">,</span> <span class="n">priorities</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">abstols</span><span class="p">,</span> <span class="n">reltols</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">old_multi_objective_exprs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="o">.</span><span class="n">exprs</span>
        <span class="n">eng</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
        <span class="k">if</span> <span class="n">eng</span><span class="p">:</span>
            <span class="n">nb_exprs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">exprs</span><span class="p">)</span>
            <span class="n">eng</span><span class="o">.</span><span class="n">set_multi_objective_exprs</span><span class="p">(</span><span class="n">new_multiobjexprs</span><span class="o">=</span><span class="n">exprs</span><span class="p">,</span>
                                          <span class="n">old_multiobjexprs</span><span class="o">=</span><span class="n">old_multi_objective_exprs</span><span class="p">,</span>
                                          <span class="n">priorities</span><span class="o">=</span><span class="n">priorities</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span>
                                          <span class="n">abstols</span><span class="o">=</span><span class="n">MultiObjective</span><span class="o">.</span><span class="n">as_optional_sequence</span><span class="p">(</span><span class="n">abstols</span><span class="p">,</span> <span class="n">nb_exprs</span><span class="p">),</span>
                                          <span class="n">reltols</span><span class="o">=</span><span class="n">MultiObjective</span><span class="o">.</span><span class="n">as_optional_sequence</span><span class="p">(</span><span class="n">reltols</span><span class="p">,</span> <span class="n">nb_exprs</span><span class="p">),</span>
                                          <span class="n">objnames</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">old_multi_objective_exprs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">old_multi_objective_exprs</span><span class="p">:</span>
                <span class="n">expr</span><span class="o">.</span><span class="n">notify_unsubscribed</span><span class="p">(</span><span class="n">subscriber</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Model.clear_multi_objective"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear_multi_objective">[docs]</a>    <span class="k">def</span> <span class="nf">clear_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Clears all multi-objective data.</span>

<span class="sd">        Clears everything related to multi-objective, if the model had previously defined</span>
<span class="sd">        multi-objectives. Sets th emodel with a single objective of zero.</span>

<span class="sd">        If the model had not defined multi-objectives, this method does nothing.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clear_multi_objective</span><span class="p">()</span></div>


    <span class="k">def</span> <span class="nf">has_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span><span class="o">.</span><span class="n">is_zero</span><span class="p">()</span>

<div class="viewcode-block" id="Model.has_multi_objective"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.has_multi_objective">[docs]</a>    <span class="k">def</span> <span class="nf">has_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns True if the model has multi objectives defined</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_multi_objective_exprs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="o">.</span><span class="n">number_of_objectives</span>

    <span class="k">def</span> <span class="nf">iter_multi_objective_tuples</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="o">.</span><span class="n">itertuples</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">iter_multi_objective_exprs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="o">.</span><span class="n">iter_exprs</span><span class="p">()</span>

<div class="viewcode-block" id="Model.set_objective"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.set_objective">[docs]</a>    <span class="k">def</span> <span class="nf">set_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets a new objective.</span>

<span class="sd">        Args:</span>
<span class="sd">            sense: Either an instance of :class:`docplex.mp.basic.ObjectiveSense` (Minimize or Maximize),</span>
<span class="sd">                or a string: &quot;min&quot; or &quot;max&quot;.</span>
<span class="sd">            expr: Is converted to an expression. Accepted types are variables,</span>
<span class="sd">                linear expressions, quadratic expressions or numbers.</span>

<span class="sd">        Note:</span>
<span class="sd">            When using a number, the search will not optimize but only look for a feasible solution.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective_sense</span><span class="p">(</span><span class="n">sense</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective_expr</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">set_objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sense</span><span class="p">):</span>
        <span class="n">actual_sense</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_sense</span><span class="p">(</span><span class="n">sense</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objective_sense</span> <span class="o">=</span> <span class="n">actual_sense</span>
        <span class="n">eng</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
        <span class="k">if</span> <span class="n">eng</span><span class="p">:</span>
            <span class="c1"># when ending the model, the engine is None here</span>
            <span class="n">eng</span><span class="o">.</span><span class="n">set_objective_sense</span><span class="p">(</span><span class="n">actual_sense</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property is used to get or set the direction of the optimization as an instance of</span>
<span class="sd">        :class:`docplex.mp.basic.ObjectiveSense`, either Minimize or Maximize.</span>

<span class="sd">        This property also accepts strings as arguments: &#39;min&#39; for minimize and &#39;max&#39; for maximize.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_sense</span>

    <span class="nd">@objective_sense</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_sense</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective_sense</span><span class="p">(</span><span class="n">new_sense</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_objective_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_objexpr</span><span class="p">,</span> <span class="n">clear_multiobj</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_multi_objective</span><span class="p">()</span> <span class="ow">and</span> <span class="n">clear_multiobj</span><span class="p">:</span>
            <span class="c1"># Need also to set all attributes to default values so that the model won&#39;t be treated as multi-objective</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_clear_multi_objective</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">new_objexpr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_default_objective_expr</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_to_expr</span><span class="p">(</span><span class="n">new_objexpr</span><span class="p">)</span>
            <span class="c1">#expr.keep()</span>
            <span class="n">expr</span><span class="o">.</span><span class="n">notify_used</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">eng</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
        <span class="n">current_objective_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span>
        <span class="k">if</span> <span class="n">eng</span><span class="p">:</span>
            <span class="c1"># when ending the model, the engine is None here</span>
            <span class="n">eng</span><span class="o">.</span><span class="n">set_objective_expr</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">current_objective_expr</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">current_objective_expr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">current_objective_expr</span><span class="o">.</span><span class="n">notify_unsubscribed</span><span class="p">(</span><span class="n">subscriber</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span> <span class="o">=</span> <span class="n">expr</span>

    <span class="k">def</span> <span class="nf">_clear_objective_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">current_objective_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">current_objective_expr</span><span class="o">.</span><span class="n">is_zero</span><span class="p">():</span>
            <span class="n">eng</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
            <span class="n">current_objective_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span>
            <span class="n">zero_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_default_objective_expr</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">eng</span><span class="p">:</span>
                <span class="c1"># when ending the model, the engine is None here</span>
                <span class="n">eng</span><span class="o">.</span><span class="n">set_objective_expr</span><span class="p">(</span><span class="n">new_objexpr</span><span class="o">=</span><span class="n">zero_expr</span><span class="p">,</span> <span class="n">old_objexpr</span><span class="o">=</span><span class="n">current_objective_expr</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">current_objective_expr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">current_objective_expr</span><span class="o">.</span><span class="n">notify_unsubscribed</span><span class="p">(</span><span class="n">subscriber</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span> <span class="o">=</span> <span class="n">zero_expr</span>

<div class="viewcode-block" id="Model.get_objective_expr"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_objective_expr">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This method returns the expression used as the model objective.</span>

<span class="sd">        Note:</span>
<span class="sd">            The default objective is a constant zero expression.</span>

<span class="sd">        Returns:</span>
<span class="sd">            an expression.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">objective_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property is used to get or set the expression used as the model objective.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span>

    <span class="nd">@objective_expr</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">objective_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective_expr</span><span class="p">(</span><span class="n">new_expr</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">notify_expr_modified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">objexpr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span>
        <span class="k">if</span> <span class="n">event</span> <span class="ow">and</span> <span class="n">expr</span> <span class="ow">is</span> <span class="n">objexpr</span> <span class="ow">or</span> <span class="n">expr</span> <span class="ow">is</span> <span class="n">objexpr</span><span class="o">.</span><span class="n">linear_part</span><span class="p">:</span>
            <span class="c1"># old and new are the same</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">update_objective</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">notify_expr_replaced</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old_expr</span><span class="p">,</span> <span class="n">new_expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">old_expr</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">set_objective_expr</span><span class="p">(</span><span class="n">new_objexpr</span><span class="o">=</span><span class="n">new_expr</span><span class="p">,</span> <span class="n">old_objexpr</span><span class="o">=</span><span class="n">old_expr</span><span class="p">)</span>
            <span class="n">new_expr</span><span class="o">.</span><span class="n">grab_subscribers</span><span class="p">(</span><span class="n">old_expr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_new_default_objective_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">linear_expr</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_can_solve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_cplex</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">_make_end_infodict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">as_name_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">dict</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">prepare_actual_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># prepares the actual context that will be used for a solve</span>

        <span class="c1"># use the provided context if any, or the self.context otherwise</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span>

        <span class="n">arg_context</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;context&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg_context</span><span class="p">,</span> <span class="n">Context</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;Expecting instance of docplex.mp.Context, </span><span class="si">{0!r}</span><span class="s1"> was passed&#39;</span><span class="p">,</span> <span class="n">arg_context</span><span class="p">)</span>
        <span class="n">cloned</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">arg_context</span>

        <span class="c1"># update the context with provided kwargs</span>
        <span class="k">for</span> <span class="n">argname</span><span class="p">,</span> <span class="n">argval</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="c1"># skip context argname if any</span>
            <span class="k">if</span> <span class="n">argname</span> <span class="o">==</span> <span class="s2">&quot;url&quot;</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is_url_valid</span><span class="p">(</span><span class="n">argval</span><span class="p">))</span> <span class="ow">and</span> <span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">docloud</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">argname</span> <span class="o">==</span> <span class="s1">&#39;clean_before_solve&#39;</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">argname</span> <span class="o">!=</span> <span class="s2">&quot;context&quot;</span> <span class="ow">and</span> <span class="n">argval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">cloned</span><span class="p">:</span>
                    <span class="n">context</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">override</span><span class="p">()</span>
                    <span class="n">cloned</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">context</span><span class="o">.</span><span class="n">update_key_value</span><span class="p">(</span><span class="n">argname</span><span class="p">,</span> <span class="n">argval</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">context</span>

<div class="viewcode-block" id="Model.solve"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.solve">[docs]</a>    <span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Starts a solve operation on the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            context (optional): An instance of context to be used in instead of</span>
<span class="sd">                the context this model was built with.</span>
<span class="sd">            cplex_parameters (optional): A set of CPLEX parameters to use</span>
<span class="sd">                instead of the parameters defined as</span>
<span class="sd">                ``context.cplex_parameters``.</span>
<span class="sd">                Accepts either a RootParameterGroup object (obtained by cloning the model&#39;s</span>
<span class="sd">                parameters), or a dict of path-like names and values.</span>
<span class="sd">            checker (optional): a string which controls which type of checking is performed.</span>
<span class="sd">                Possible values are:</span>
<span class="sd">                - &#39;std&#39; (the default) performs type checks on arguments to methods; checks that numerical</span>
<span class="sd">                arguments are numbers, but will not check for NaN or infinity.</span>
<span class="sd">                - &#39;numeric&#39; checks that numerical arguments are valid numbers, neither NaN nor</span>
<span class="sd">                math.infinity</span>
<span class="sd">                - &#39;full&#39; performs all possible checks, the union of &#39;std&#39; and &#39;numeric&#39; checks.</span>
<span class="sd">                - &#39;off&#39; performs no checking at all. Disabling all checks might improve performance, but only when</span>
<span class="sd">                it is safe to do so.</span>
<span class="sd">            log_output (optional): if ``True``, solver logs are output to</span>
<span class="sd">                stdout. If this is a stream, solver logs are output to that</span>
<span class="sd">                stream object. Overwrites the ``context.solver.log_output``</span>
<span class="sd">                parameter.</span>
<span class="sd">            clean_before_solve (optional): a boolean (default is False).</span>
<span class="sd">                Solve normally picks up where the previous solve left, but if this flag is set to ``True``,</span>
<span class="sd">                a fresh solve is started, with no memory of the previous solutions.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A :class:`docplex.mp.solution.SolveSolution` object if the solve operation managed to create</span>
<span class="sd">            a feasible solution, else None.</span>
<span class="sd">            The reason why solve returned None includes not only errors, but also proper cases of infeasibilties</span>
<span class="sd">            or unboundedness. When solve returns None, use Model.solve_details to check the status</span>
<span class="sd">            of the latest solve operation: Model.solve_details always returns</span>
<span class="sd">            a :class:`docplex.mp.sdetails.SolveDetails` object, whether or not</span>
<span class="sd">            a solution has been found. This object contains detailed information about the latest solve operation.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`solve_details`</span>
<span class="sd">            :class:`docplex.mp.sdetails.SolveDetails`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_optimized</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;No objective to optimize - searching for a feasible solution&quot;</span><span class="p">)</span>

        <span class="n">lex_mipstart</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;_lex_mipstart&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">lex_timelimits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;lex_timelimits&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">lex_mipgaps</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;lex_mipgaps&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_actual_context</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">lex_timelimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">lex_timelimits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># This will be handled as a single-objective ==&gt; set timelimit parameter</span>
            <span class="n">context</span><span class="o">.</span><span class="n">cplex_parameters</span><span class="o">.</span><span class="n">timelimit</span> <span class="o">=</span> <span class="n">lex_timelimits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lex_mipgaps</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">lex_mipgaps</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># This will be handled as a single-objective ==&gt; set mipgap parameter</span>
            <span class="n">context</span><span class="o">.</span><span class="n">cplex_parameters</span><span class="o">.</span><span class="n">mip</span><span class="o">.</span><span class="n">tolerances</span><span class="o">.</span><span class="n">mipgap</span> <span class="o">=</span> <span class="n">lex_mipgaps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


        <span class="c1"># log stuff</span>
        <span class="n">saved_context_log_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output</span>
        <span class="n">saved_log_output_stream</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_output</span>
        <span class="c1"># because self.log_output is a property, if we want to keep track</span>
        <span class="c1"># of the actual object returned, we need to store it in a variable instead</span>
        <span class="c1"># of calling self.log_output again</span>
        <span class="n">a_stream</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">a_stream</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output_as_stream</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log_output</span> <span class="o">=</span> <span class="n">a_stream</span>

            <span class="n">forced_docloud</span> <span class="o">=</span> <span class="n">context_must_use_docloud</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">have_credentials</span> <span class="o">=</span> <span class="n">context_has_docloud_credentials</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">do_warn</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">forced_docloud</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">have_credentials</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_cloud</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">lex_mipstart</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;DOcplexcloud context has no valid credentials: </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="p">,</span>
                               <span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">docloud</span><span class="p">)</span>

            <span class="c1"># from now on docloud_context is None</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">has_cplex</span><span class="p">:</span>
                <span class="c1"># if CPLEX is installed go for it</span>
                <span class="n">force_clean_before_solve</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clean_before_solve&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_local</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">force_clean_before_solve</span><span class="p">,</span> <span class="n">lex_timelimits</span><span class="p">,</span> <span class="n">lex_mipgaps</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">have_credentials</span><span class="p">:</span>
                <span class="c1"># no context passed as argument, no Cplex installed, try model&#39;s own context</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_cloud</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">lex_mipstart</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># no way to solve.. really</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;CPLEX runtime not found: please install CPLEX or solve this model on DOcplexcloud&quot;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a_stream</span><span class="p">:</span>
                    <span class="n">a_stream</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">if</span> <span class="n">a_stream</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a_stream</span><span class="p">,</span> <span class="s2">&quot;flush&quot;</span><span class="p">):</span>
                <span class="n">a_stream</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">a_stream</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a_stream</span><span class="p">,</span> <span class="s2">&quot;custom_close&quot;</span><span class="p">):</span>
                <span class="n">a_stream</span><span class="o">.</span><span class="n">custom_close</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">saved_log_output_stream</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_output</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_log_output_as_stream</span><span class="p">(</span><span class="n">saved_log_output_stream</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">saved_context_log_output</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output</span> <span class="o">=</span> <span class="n">saved_context_log_output</span></div>

    <span class="k">def</span> <span class="nf">_connect_progress_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL... connect progre        if self._solved_as_mip():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">connect_progress_listeners</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="c1"># elif self._progress_listeners:</span>
        <span class="c1"># elif self._progress_listeners:</span>
        <span class="c1">#     self.warning(&quot;Model: \&quot;{}\&quot; is not a MIP problem, progress listeners are disabled&quot;, self.name)</span>

    <span class="k">def</span> <span class="nf">_disconnect_progress_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">pl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="p">:</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">_disconnect</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_notify_solve_hit_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solve_details</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">if</span> <span class="n">solve_details</span> <span class="ow">and</span> <span class="n">solve_details</span><span class="o">.</span><span class="n">has_hit_limit</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;solve: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solve_details</span><span class="o">.</span><span class="n">status</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_solve_local</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">force_clean_before_solve</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lex_timelimits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lex_mipgaps</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Starts a solve operation on the local machine.</span>

<span class="sd">        Note:</span>
<span class="sd">        This method will never try to solve on DOcplexcloud, regardless of whether the model</span>
<span class="sd">        has an attached DOcplexcloud context.</span>
<span class="sd">        If CPLEX is not available, an error is raised.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: a (possibly new) context whose parameters override those of the modle</span>
<span class="sd">                during this solve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Solution object if the solve operation succeeded, None otherwise.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="n">apply_thread_limitations</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">notify_start_solve</span><span class="p">()</span>

        <span class="n">auto_publish_details</span> <span class="o">=</span> <span class="n">is_auto_publishing_solve_details</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="n">auto_publish_solution</span> <span class="o">=</span> <span class="p">(</span><span class="n">auto_publishing_result_output_names</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">auto_publish_kpis_table</span> <span class="o">=</span> <span class="p">(</span><span class="n">auto_publishing_kpis_table_names</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="n">the_env</span> <span class="o">=</span> <span class="n">get_environment</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">is_in_docplex_worker</span><span class="p">()</span> <span class="ow">and</span> <span class="n">auto_publish_details</span><span class="p">:</span>
            <span class="c1"># publish kpi automatically</span>
            <span class="n">env_kpi_hook</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">kpd</span><span class="p">:</span> <span class="n">the_env</span><span class="o">.</span><span class="n">update_solve_details</span><span class="p">(</span><span class="n">kpd</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">kpi_recorder</span> <span class="o">=</span> <span class="n">_KpiRecorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                            <span class="n">clock</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">kpi_reporting</span><span class="o">.</span><span class="n">filter_level</span><span class="p">,</span>
                                            <span class="n">publish_hook</span><span class="o">=</span><span class="n">env_kpi_hook</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_progress_listener</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kpi_recorder</span><span class="p">)</span>


        <span class="c1"># connect progress listeners (if any) if problem is mip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect_progress_listeners</span><span class="p">()</span>

        <span class="c1"># call notifyStart on progress listeners</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fire_start_solve_listeners</span><span class="p">()</span>
        <span class="c1"># notify hooks only on solve_local</span>

        <span class="n">self_solve_hooks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_hooks</span>
        <span class="c1"># The following block used to be published only if auto_publish_details.</span>
        <span class="c1"># It is now modified so that notify start is always performed,</span>
        <span class="c1"># then we update solve details only if they need to be published</span>
        <span class="c1"># [[[</span>
        <span class="n">self_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_statistics</span><span class="p">()</span>
        <span class="n">kpis</span> <span class="o">=</span> <span class="n">make_new_kpis_dict</span><span class="p">(</span><span class="n">allkpis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="p">,</span>
                                  <span class="n">int_vars</span><span class="o">=</span><span class="n">self_stats</span><span class="o">.</span><span class="n">number_of_integer_variables</span><span class="p">,</span>
                                  <span class="n">continuous_vars</span><span class="o">=</span><span class="n">self_stats</span><span class="o">.</span><span class="n">number_of_continuous_variables</span><span class="p">,</span>
                                  <span class="n">linear_constraints</span><span class="o">=</span><span class="n">self_stats</span><span class="o">.</span><span class="n">number_of_linear_constraints</span><span class="p">,</span>
                                  <span class="n">bin_vars</span><span class="o">=</span><span class="n">self_stats</span><span class="o">.</span><span class="n">number_of_binary_variables</span><span class="p">,</span>
                                  <span class="n">quadratic_constraints</span><span class="o">=</span><span class="n">self_stats</span><span class="o">.</span><span class="n">number_of_quadratic_constraints</span><span class="p">,</span>
                                  <span class="n">total_constraints</span><span class="o">=</span><span class="n">self_stats</span><span class="o">.</span><span class="n">number_of_constraints</span><span class="p">,</span>
                                  <span class="n">total_variables</span><span class="o">=</span><span class="n">self_stats</span><span class="o">.</span><span class="n">number_of_variables</span><span class="p">)</span>
        <span class="c1"># implementation for https://github.ibm.com/IBMDecisionOptimization/dd-planning/issues/2491</span>
        <span class="n">problem_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_cplex_problem_type</span><span class="p">()</span>
        <span class="n">kpis</span><span class="p">[</span><span class="s1">&#39;STAT.cplex.modelType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">problem_type</span>
        <span class="n">kpis</span><span class="p">[</span><span class="s1">&#39;MODEL_DETAIL_OBJECTIVE_SENSE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_sense</span><span class="o">.</span><span class="n">verb</span>
        <span class="c1"># self_solve_hooks if for backward compatibility only. Should</span>
        <span class="c1"># really use env instead</span>
        <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">self_solve_hooks</span><span class="p">:</span>
            <span class="n">h</span><span class="o">.</span><span class="n">notify_start_solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kpis</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">the_env</span><span class="o">.</span><span class="n">notify_start_solve</span><span class="p">(</span><span class="n">kpis</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auto_publish_details</span><span class="p">:</span>
            <span class="n">get_environment</span><span class="p">()</span><span class="o">.</span><span class="n">update_solve_details</span><span class="p">(</span><span class="n">kpis</span><span class="p">)</span>
        <span class="c1"># ]]]</span>
        <span class="c1"># --- solve is protected in try/except block</span>
        <span class="n">has_solution</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">reported_obj</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">engine_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unknown_status</span>
        <span class="n">self_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
        <span class="n">self_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">_get_raw_cplex_parameters</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">self_params</span> <span class="ow">and</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">self_params</span><span class="p">:</span>
            <span class="n">saved_params</span> <span class="o">=</span> <span class="p">{</span><span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">self_params</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">saved_params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">saved_clean_before_solve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_before_solve</span> <span class="k">if</span> <span class="n">force_clean_before_solve</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="n">new_solution</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">force_clean_before_solve</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean_before_solve</span> <span class="o">=</span> <span class="n">force_clean_before_solve</span>
            <span class="n">used_parameters</span> <span class="o">=</span> <span class="n">parameters</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">_get_raw_cplex_parameters</span><span class="p">()</span>
            <span class="c1"># assert used_parameters is not None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_parameters_to_engine</span><span class="p">(</span><span class="n">used_parameters</span><span class="p">)</span>

            <span class="n">new_solution</span> <span class="o">=</span> <span class="n">self_engine</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">lex_timelimits</span><span class="o">=</span><span class="n">lex_timelimits</span><span class="p">,</span>
                                             <span class="n">lex_mipgaps</span><span class="o">=</span><span class="n">lex_mipgaps</span><span class="p">)</span>
            <span class="n">has_solution</span> <span class="o">=</span> <span class="n">new_solution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_solution</span><span class="p">(</span><span class="n">new_solution</span><span class="p">)</span>
            <span class="n">reported_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reported_objective_value</span><span class="p">()</span>

            <span class="c1"># store solve status as returned by the engine.</span>
            <span class="n">engine_status</span> <span class="o">=</span> <span class="n">self_engine</span><span class="o">.</span><span class="n">get_solve_status</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_last_solve_status</span> <span class="o">=</span> <span class="n">engine_status</span>

        <span class="k">except</span> <span class="n">DOcplexException</span> <span class="k">as</span> <span class="n">docpx_e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_solution</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">docpx_e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_solution</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----------------- Python exception: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">solve_details</span> <span class="o">=</span> <span class="n">self_engine</span><span class="o">.</span><span class="n">get_solve_details</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_solve_hit_limit</span><span class="p">(</span><span class="n">solve_details</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_solve_details</span> <span class="o">=</span> <span class="n">solve_details</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fire_end_solve_listeners</span><span class="p">(</span><span class="n">has_solution</span><span class="p">,</span> <span class="n">reported_obj</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_progress_listeners</span><span class="p">()</span>

            <span class="c1"># call hooks</span>
            <span class="n">get_environment</span><span class="p">()</span><span class="o">.</span><span class="n">notify_end_solve</span><span class="p">(</span><span class="n">engine_status</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_publish_details</span><span class="p">:</span>
                <span class="c1"># Only kept for backward compatibility</span>
                <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">self_solve_hooks</span><span class="p">:</span>
                    <span class="n">h</span><span class="o">.</span><span class="n">notify_end_solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">has_solution</span><span class="p">,</span> <span class="n">engine_status</span><span class="p">,</span> <span class="n">reported_obj</span><span class="p">,</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">_make_end_infodict</span><span class="p">())</span>  <span class="c1"># pragma: no cover</span>
                    <span class="n">h</span><span class="o">.</span><span class="n">update_solve_details</span><span class="p">(</span><span class="n">solve_details</span><span class="o">.</span><span class="n">as_worker_dict</span><span class="p">())</span>  <span class="c1"># pragma: no cover</span>
                <span class="c1"># actual right mean to do it</span>
                <span class="n">details</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">details</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">solve_details</span><span class="o">.</span><span class="n">as_worker_dict</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">new_solution</span><span class="p">:</span>
                    <span class="n">kpis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kpis_as_dict</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">use_names</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

                    <span class="k">def</span> <span class="nf">publish_name_fn</span><span class="p">(</span><span class="n">kn</span><span class="p">):</span>
                        <span class="k">return</span> <span class="s1">&#39;KPI.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">kn</span>

                    <span class="n">name_values</span> <span class="o">=</span> <span class="p">{</span><span class="n">publish_name_fn</span><span class="p">(</span><span class="n">kn</span><span class="p">):</span> <span class="n">kv</span> <span class="k">for</span> <span class="n">kn</span><span class="p">,</span> <span class="n">kv</span> <span class="ow">in</span> <span class="n">iteritems</span><span class="p">(</span><span class="n">kpis</span><span class="p">)}</span>
                    <span class="n">details</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">name_values</span><span class="p">)</span>
                    <span class="n">details</span><span class="p">[</span><span class="s1">&#39;PROGRESS_CURRENT_OBJECTIVE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_solution</span><span class="o">.</span><span class="n">objective_value</span>
                <span class="n">get_environment</span><span class="p">()</span><span class="o">.</span><span class="n">update_solve_details</span><span class="p">(</span><span class="n">details</span><span class="p">)</span>

            <span class="c1"># save solution</span>
            <span class="k">if</span> <span class="n">new_solution</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">auto_publish_solution</span><span class="p">:</span>
                    <span class="n">write_result_output</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">get_environment</span><span class="p">(),</span>
                                     <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
                                     <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                                     <span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">)</span>

                <span class="c1"># save kpi</span>
                <span class="k">if</span> <span class="n">auto_publish_kpis_table</span><span class="p">:</span>
                    <span class="n">write_kpis_table</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">get_environment</span><span class="p">(),</span>
                                     <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
                                     <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                                     <span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">)</span>


            <span class="c1"># restore parameters in sync with model, if necessary</span>
            <span class="k">if</span> <span class="n">saved_params</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">saved_params</span><span class="p">):</span>
                    <span class="n">self_engine</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">saved_clean_before_solve</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean_before_solve</span> <span class="o">=</span> <span class="n">saved_clean_before_solve</span>

        <span class="k">return</span> <span class="n">new_solution</span>

<div class="viewcode-block" id="Model.get_solve_status"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_solve_status">[docs]</a>    <span class="k">def</span> <span class="nf">get_solve_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the solve status of the last successful solve.</span>

<span class="sd">        If the model has been solved successfully, returns the status stored in the</span>
<span class="sd">        model solution. Otherwise returns None.</span>

<span class="sd">        :returns: The solve status of the last successful solve, a enumerated value of type</span>
<span class="sd">            `docplex.utils.JobSolveStatus`</span>

<span class="sd">        Note: The status returned by Cplex is stored as `status` in the solve_details of the model.</span>

<span class="sd">        &gt;&gt;&gt; m.solve_details.status</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`docplex.mp.SolveDetails.status` to get the Cplex status as a string (eg. &quot;optimal&quot;)</span>
<span class="sd">            :func:`docplex.mp.SolveDetails.status_code` to get the Cplex status as an integer code..</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_solve_status</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solve_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the solve status of the last successful solve.</span>

<span class="sd">        If the model has been solved successfully, returns the status stored in the</span>
<span class="sd">        model solution. Otherwise returns None`.</span>

<span class="sd">        :returns: The solve status of the last successful solve, a string, or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_solve_status</span>

    <span class="k">def</span> <span class="nf">_new_docloud_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine_factory</span><span class="o">.</span><span class="n">new_docloud_engine</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                                                       <span class="n">docloud_context</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">docloud</span><span class="p">,</span>
                                                       <span class="n">log_output</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">log_output_as_stream</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_solve_cloud</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">lex_mipstart</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">cplex_parameters</span>
        <span class="c1"># see if we can reuse the local docloud engine if any?</span>
        <span class="n">docloud_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_docloud_engine</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notify_start_solve</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fire_start_solve_listeners</span><span class="p">()</span>
        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">docloud_engine</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">lex_mipstart</span><span class="o">=</span><span class="n">lex_mipstart</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_solution</span><span class="p">(</span><span class="n">new_solution</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solve_details</span> <span class="o">=</span> <span class="n">docloud_engine</span><span class="o">.</span><span class="n">get_solve_details</span><span class="p">()</span>

        <span class="c1"># store solve status as returned by the engine.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_solve_status</span> <span class="o">=</span> <span class="n">docloud_engine</span><span class="o">.</span><span class="n">get_solve_status</span><span class="p">()</span>
        <span class="n">reported_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reported_objective_value</span><span class="p">()</span>

        <span class="n">solve_details</span> <span class="o">=</span> <span class="n">docloud_engine</span><span class="o">.</span><span class="n">get_solve_details</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_notify_solve_hit_limit</span><span class="p">(</span><span class="n">solve_details</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solve_details</span> <span class="o">=</span> <span class="n">solve_details</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fire_end_solve_listeners</span><span class="p">(</span><span class="n">new_solution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">reported_obj</span><span class="p">)</span>
        <span class="c1"># return solution from cloud engine: either None or a solution instance</span>
        <span class="k">return</span> <span class="n">new_solution</span>

    <span class="k">def</span> <span class="nf">solve_cloud</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Starts execution of the model on the cloud.</span>
        <span class="c1">#</span>
        <span class="c1"># This method accepts a context (an instance of Context) to be used when</span>
        <span class="c1"># solving on the cloud. If the context argument is None or invalid, then it will</span>
        <span class="c1"># use the model&#39;s own instance of Context, set at model creation time.</span>
        <span class="c1">#</span>
        <span class="c1"># Note:</span>
        <span class="c1">#    This method will always solve the model on the cloud, whether or not CPLEX</span>
        <span class="c1">#    is available on the local machine.</span>
        <span class="c1">#</span>
        <span class="c1"># Args:</span>
        <span class="c1">#    context: An optional context to use on the cloud. If None, uses the model&#39;s Context instance, if any.</span>
        <span class="c1">#</span>
        <span class="c1"># :returns: A :class:`docplex.mp.solution.SolveSolution` object if the solve operation succeeded, else None.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">context</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">docloud</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;docloud&#39;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_cloud</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;context is None: cannot solve on the cloud&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">has_credentials</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">docloud</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_cloud</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;DOcplexcloud context has no valid credentials: </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">docloud</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">notify_start_solve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">notify_solve_failed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solve_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This property returns detailed information about the latest solve,</span>
<span class="sd">        an instance of :class:`docplex.mp.solution.SolveDetails`.</span>

<span class="sd">        When the latest solve did return a Solution instance, this property</span>
<span class="sd">        returns the solve details corresponding to the solution; when no</span>
<span class="sd">        solution has been found (in other terms, the latest solve operation</span>
<span class="sd">        returned None), it still returns a SolveDetails object, containing a</span>
<span class="sd">        CPLEX code identifying the reason why no solution could be found</span>
<span class="sd">        (for example, infeasibility or unboundedness).</span>

<span class="sd">        See Also:</span>
<span class="sd">            :class:`docplex.mp.sdetails.SolveDetails`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="k">import</span> <span class="n">copy</span> <span class="k">as</span> <span class="n">shallow_copy</span>

        <span class="k">return</span> <span class="n">shallow_copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solve_details</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_solve_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_details</span>

    <span class="k">def</span> <span class="nf">notify_solve_relaxed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relaxed_solution</span><span class="p">,</span> <span class="n">solve_details</span><span class="p">):</span>
        <span class="c1"># INTERNAL: used by relaxer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solve_details</span> <span class="o">=</span> <span class="n">solve_details</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_solution</span><span class="p">(</span><span class="n">relaxed_solution</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">relaxed_solution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notify_start_solve</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notify_solve_failed</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_resolve_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sense_arg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        INTERNAL</span>
<span class="sd">        :param sense_arg:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">sense_arg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_handler</span><span class="p">,</span> <span class="n">default_sense</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># raise if invalid</span>

<div class="viewcode-block" id="Model.solve_lexicographic"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.solve_lexicographic">[docs]</a>    <span class="k">def</span> <span class="nf">solve_lexicographic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">goals</span><span class="p">,</span>
                            <span class="n">senses</span><span class="o">=</span><span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">Minimize</span><span class="p">,</span>
                            <span class="n">abstols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">reltols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="c1">#tolerances=None,</span>
                            <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Performs a lexicographic solve from an ordered collection of goals.</span>

<span class="sd">        Deprecated: From CPLEX 12.9,</span>
<span class="sd">        :meth:`~docplex.mp.model.Model.set_multi_objective` should be used</span>
<span class="sd">        instead.</span>

<span class="sd">        :param goals: An ordered collection of linear expressions.</span>

<span class="sd">        :param senses: Either an ordered sequence of senses, one sense, or</span>
<span class="sd">           None. The default is None, in which case the solve uses a Minimize</span>
<span class="sd">           sense. Each sense can be either a sense object, that is either</span>
<span class="sd">           `ObjectiveSense.Minimize` or `Maximize`, or a string &quot;min&quot; or &quot;max&quot;.</span>

<span class="sd">        :param abstols: if defined, accepts either a number or a list of numbers having the same size as the `exprs` argument,</span>
<span class="sd">            interpreted as absolute tolerances. If passed asingle number, this tolerance number will be used for all</span>
<span class="sd">            passes.</span>

<span class="sd">        :param reltols: if defined, accepts either a number or a list of numbers having the same size as the `exprs` argument,</span>
<span class="sd">            interpreted as absolute tolerances. If passed asingle number, this tolerance number will be used for all</span>
<span class="sd">            passes.</span>

<span class="sd">        Note:</span>
<span class="sd">            tolerances are used at each step to constraint the previous</span>
<span class="sd">            objective value to be be &#39;no worse&#39; than the value found in the</span>
<span class="sd">            last pass. For example, if relative tolerance is 2% and pass #1 has</span>
<span class="sd">            found an objective of 100, then pass #2 will constraint the first</span>
<span class="sd">            goal to be no greater than 102 if minimizing, or</span>
<span class="sd">            no less than 98, if maximizing.</span>

<span class="sd">            - The parameter &#39;tolerances&#39; of previous versions is now deprecated, use instead the `reltols`</span>
<span class="sd">              and `abstols` parameters.</span>

<span class="sd">        Return:</span>
<span class="sd">            If successful, returns a tuple with all pass solutions, reversed else None.</span>
<span class="sd">            The current solution of the model is the first solution in the tuple.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Will be deprecated with CPLEX 12.9 multi-objective support&quot;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
        <span class="n">actual_goals</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">gi</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">goals</span><span class="p">):</span>
            <span class="n">goal_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">_to_expr</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">goal_name</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">name</span>

            <span class="n">actual_goals</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">goal_name</span> <span class="ow">or</span> <span class="s2">&quot;pass</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gi</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">goal_expr</span><span class="p">))</span>

        <span class="n">nb_goals</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual_goals</span><span class="p">)</span>
        <span class="c1"># --- senses ---</span>
        <span class="n">abstols_</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">reltols_</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># compile tolerances to abstols, reltols</span>

        <span class="k">if</span> <span class="n">abstols</span><span class="p">:</span>
            <span class="n">abstols_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_typecheck_optional_num_seq</span><span class="p">(</span><span class="n">abstols</span><span class="p">,</span> <span class="n">expected_size</span><span class="o">=</span><span class="n">nb_goals</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.solve_lexicographic&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reltols</span><span class="p">:</span>
            <span class="n">reltols_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_typecheck_optional_num_seq</span><span class="p">(</span><span class="n">reltols</span><span class="p">,</span> <span class="n">expected_size</span><span class="o">=</span><span class="n">nb_goals</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.solve_lexicographic&#39;</span><span class="p">)</span>

        <span class="n">tolerances</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;tolerances&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tolerances</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;tolerances is deprecated, use abstols, reltols as in Model.set_multi_objective()&quot;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_number</span><span class="p">(</span><span class="n">tolerances</span><span class="p">):</span>
                <span class="n">reltols_</span> <span class="o">=</span> <span class="p">[</span><span class="n">tolerances</span><span class="p">]</span> <span class="o">*</span> <span class="n">nb_goals</span>
                <span class="n">abstols_</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1e-4</span><span class="p">]</span> <span class="o">*</span> <span class="n">nb_goals</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tolerances</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">abst</span><span class="p">,</span> <span class="n">relt</span> <span class="o">=</span> <span class="n">tolerances</span>
                    <span class="n">abstols_</span> <span class="o">=</span> <span class="p">[</span><span class="n">abst</span><span class="p">]</span> <span class="o">*</span> <span class="n">nb_goals</span>
                    <span class="n">reltols_</span> <span class="o">=</span> <span class="p">[</span><span class="n">relt</span><span class="p">]</span> <span class="o">*</span> <span class="n">nb_goals</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;tolerances expects None, a 2-tuple of numbers, or a sequence of 2-tuples, </span><span class="si">{1!r}</span><span class="s1"> was passed&#39;</span><span class="p">,</span>
                               <span class="n">tolerances</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">is_indexable</span><span class="p">(</span><span class="n">tolerances</span><span class="p">):</span>
                <span class="n">abstols_</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">reltols_</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">tol</span> <span class="ow">in</span> <span class="n">tolerances</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">abst</span><span class="p">,</span> <span class="n">relt</span> <span class="o">=</span> <span class="n">tol</span>
                        <span class="n">abstols_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abst</span><span class="p">)</span>
                        <span class="n">reltols_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">relt</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;tolerances expects None, a 2-tuple of numbers, or a sequence of 2-tuples&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">abstols_</span><span class="p">)</span> <span class="o">!=</span> <span class="n">nb_goals</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;sequence of tolerances must have same length as goals&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;unexpected tolerances&quot;</span><span class="p">,</span> <span class="n">tolerances</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">abstols_</span><span class="p">:</span>
            <span class="n">abstols_</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1e-6</span><span class="p">]</span> <span class="o">*</span> <span class="n">nb_goals</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">reltols_</span><span class="p">:</span>
            <span class="n">reltols_</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1e-4</span><span class="p">]</span> <span class="o">*</span> <span class="n">nb_goals</span>

        <span class="n">dump_pass_files</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;dump_lps&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">old_objective_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span>
        <span class="n">old_objective_sense</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_sense</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">goals</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;solve_lexicographic requires a non-empty list of goals, got: </span><span class="si">{0!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">goals</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_indexable</span><span class="p">(</span><span class="n">goals</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;solve_lexicographic requires an indexable sequence of goals, got: </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">goals</span><span class="p">)</span>

        <span class="n">pass_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">senses</span><span class="p">,</span> <span class="n">accept_string</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">senses</span> <span class="o">=</span> <span class="n">generate_constant</span><span class="p">(</span><span class="n">ObjectiveSense</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">senses</span><span class="p">),</span> <span class="n">count_max</span><span class="o">=</span><span class="n">nb_goals</span><span class="p">)</span>

        <span class="c1"># keep extra constraints, in order to remove them at the end.</span>
        <span class="n">extra_cts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cplex_param_key</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="n">cplex_parameters_key</span>
        <span class="n">ctx_params</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cplex_param_key</span><span class="p">)</span>
        <span class="n">iter_pass_params</span> <span class="o">=</span> <span class="n">generate_constant</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">nb_goals</span><span class="p">)</span>
        <span class="n">baseline_params</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># parameters to restore at each iteration, default is to do nothing</span>
        <span class="k">if</span> <span class="n">ctx_params</span> <span class="ow">and</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">ctx_params</span><span class="p">):</span>
            <span class="c1"># must pop out the list as normal solve won&#39;t have it.</span>
            <span class="n">pass_params</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">cplex_param_key</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pass_params</span><span class="p">)</span> <span class="o">!=</span> <span class="n">nb_goals</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;List of parameters should have same length as goals, expecting: </span><span class="si">{0}</span><span class="s2"> but a list of size </span><span class="si">{1}</span><span class="s2"> was passed&quot;</span><span class="p">,</span>
                           <span class="n">nb_goals</span><span class="p">,</span> <span class="n">pass_params</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">iter_pass_params</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">pass_params</span><span class="p">)</span>
                <span class="n">baseline_params</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">parameters</span>  <span class="c1"># need to clear/reset parameters at each pass</span>

        <span class="c1"># --- main loop ---</span>
        <span class="n">prev_step</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">all_solutions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">solve_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">current_sol</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">goal_name</span><span class="p">,</span> <span class="n">goal_expr</span><span class="p">),</span> <span class="n">next_sense</span><span class="p">,</span> <span class="n">abstol</span><span class="p">,</span> <span class="n">reltol</span> <span class="ow">in</span> <span class="n">izip</span><span class="p">(</span><span class="n">actual_goals</span><span class="p">,</span> <span class="n">senses</span><span class="p">,</span> <span class="n">abstols_</span><span class="p">,</span> <span class="n">reltols_</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">goal_expr</span><span class="o">.</span><span class="n">is_constant</span><span class="p">()</span> <span class="ow">and</span> <span class="n">pass_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Constant expression in lexicographic solve: </span><span class="si">{0!s}</span><span class="s2">, skipped&quot;</span><span class="p">,</span> <span class="n">goal_expr</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="n">pass_count</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="n">pass_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">prev_goal</span><span class="p">,</span> <span class="n">prev_obj</span><span class="p">,</span> <span class="n">prev_sense</span> <span class="o">=</span> <span class="n">prev_step</span>
                    <span class="n">tolerance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">abstol</span><span class="p">,</span> <span class="n">reltol</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">prev_obj</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">prev_sense</span><span class="o">.</span><span class="n">is_minimize</span><span class="p">():</span>
                        <span class="n">pass_ct</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">_post_constraint</span><span class="p">(</span><span class="n">prev_goal</span> <span class="o">&lt;=</span> <span class="n">prev_obj</span> <span class="o">+</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pass_ct</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">_post_constraint</span><span class="p">(</span><span class="n">prev_goal</span> <span class="o">&gt;=</span> <span class="n">prev_obj</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">)</span>

                    <span class="n">extra_cts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pass_ct</span><span class="p">)</span>


                <span class="n">sense</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_sense</span><span class="p">(</span><span class="n">next_sense</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;lexicographic: starting pass </span><span class="si">%d</span><span class="s2">, </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pass_count</span><span class="p">,</span> <span class="n">sense</span><span class="o">.</span><span class="n">verb</span><span class="p">,</span> <span class="n">goal_name</span><span class="p">)</span>
                <span class="n">m</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">sense</span><span class="p">,</span> <span class="n">goal_expr</span><span class="p">)</span>
                <span class="c1"># print(&quot;-- current objective is: {0!s}&quot;.format(goal_expr))</span>
                <span class="k">if</span> <span class="n">dump_pass_files</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="n">pass_basename</span> <span class="o">=</span> <span class="s1">&#39;lex_</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">#</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">goal_name</span><span class="p">,</span> <span class="n">pass_count</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dump_as_lp</span><span class="p">(</span><span class="n">basename</span><span class="o">=</span><span class="n">pass_basename</span><span class="p">)</span>

                <span class="c1"># --- update pass parameters, if any</span>
                <span class="n">pass_param</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">iter_pass_params</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pass_param</span><span class="p">:</span>
                    <span class="c1"># print(&#39;applying custom parameters&#39;)</span>
                    <span class="c1"># pass_param.print_information()</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">update_cplex_parameters</span><span class="p">(</span><span class="n">pass_param</span><span class="p">)</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">cplex_parameters</span><span class="o">.</span><span class="n">print_information</span><span class="p">()</span>
                <span class="c1"># ---</span>
                <span class="k">if</span> <span class="n">current_sol</span> <span class="ow">and</span> <span class="n">pass_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">solve_kwargs</span><span class="p">[</span><span class="s1">&#39;_lex_mipstart&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_sol</span>
                <span class="n">current_sol</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="o">**</span><span class="n">solve_kwargs</span><span class="p">)</span>
                <span class="c1"># restore params if need be</span>
                <span class="k">if</span> <span class="n">baseline_params</span><span class="p">:</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">cplex_parameters</span> <span class="o">=</span> <span class="n">baseline_params</span>

                <span class="k">if</span> <span class="n">current_sol</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">current_sol</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="s2">&quot;lex_</span><span class="si">{0}</span><span class="s2">_</span><span class="si">{1}</span><span class="s2">_</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">goal_name</span><span class="p">,</span> <span class="n">pass_count</span><span class="p">))</span>
                    <span class="n">current_obj</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">objective_value</span>
                    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_obj</span><span class="p">)</span>
                    <span class="n">prev_step</span> <span class="o">=</span> <span class="p">(</span><span class="n">goal_expr</span><span class="p">,</span> <span class="n">current_obj</span><span class="p">,</span> <span class="n">sense</span><span class="p">)</span>
                    <span class="n">all_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_sol</span><span class="p">)</span>


                <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;lexicographic fails. pass #</span><span class="si">%d</span><span class="s2">, stop!&quot;</span><span class="p">,</span> <span class="n">pass_count</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># print(&quot;-&gt; start restoring model at end of lexicographic&quot;)</span>
            <span class="k">while</span> <span class="n">extra_cts</span><span class="p">:</span>
                <span class="c1"># using LIFO logic to avoid holes in indices.</span>
                <span class="n">ct_to_remove</span> <span class="o">=</span> <span class="n">extra_cts</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="c1"># print(&quot;* removing constraint: name: {0}, idx: {1}&quot;.format(ct_to_remove.name, ct_to_remove.index))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pop_constraint</span><span class="p">()</span> <span class="c1"># self._remove_constraint_internal(ct_to_remove)</span>
            <span class="c1"># restore objective whatsove</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">old_objective_sense</span><span class="p">,</span> <span class="n">old_objective_expr</span><span class="p">)</span>
            <span class="c1"># print(&quot;&lt;- end restoring model at end of lexicographic&quot;)</span>

        <span class="c1"># return a solution or None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_solutions</span><span class="p">)</span> <span class="o">==</span> <span class="n">nb_goals</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">all_solutions</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># error inside loop</span>
            <span class="k">return</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">_has_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_set_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_solution</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        INTERNAL: Sets this solution as the model&#39;s current solution.</span>
<span class="sd">        Copies values to variables (for now, let&#39;s think more about this)</span>
<span class="sd">        :param new_solution:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span> <span class="o">=</span> <span class="n">new_solution</span>

    <span class="k">def</span> <span class="nf">check_has_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># see if we can refine messages here...</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Model&lt;</span><span class="si">{0}</span><span class="s2">&gt; has not been solved yet&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Model&lt;</span><span class="si">{0}</span><span class="s2">&gt; did not solve successfully&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_solved_as_mip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">caller</span><span class="p">,</span> <span class="n">do_raise</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_mip_for_mipstarts</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solved_as_mip</span><span class="p">():</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">  is only available for MIP problems&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">caller</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">do_raise</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># either a MIP or we don&#39;t care...</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="Model.add_mip_start"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_mip_start">[docs]</a>    <span class="k">def</span> <span class="nf">add_mip_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mip_start_sol</span><span class="p">,</span> <span class="n">effort_level</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Adds a (possibly partial) solution to use as a starting point for a MIP.</span>

<span class="sd">        This is valid only for models with binary or integer decision variables.</span>
<span class="sd">        The given solution must contain the value for at least one binary or integer variable.</span>

<span class="sd">        This feature is also known as warm start.</span>

<span class="sd">        Args:</span>
<span class="sd">            mip_start_sol (:class:`docplex.mp.solution.SolveSolution`): The solution object to use as a starting point.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_solved_as_mip</span><span class="p">(</span><span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.add_mip_start&quot;</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">mip_start_</span> <span class="o">=</span> <span class="n">mip_start_sol</span><span class="o">.</span><span class="n">as_mip_start</span><span class="p">()</span>
                <span class="n">mip_start_</span><span class="o">.</span><span class="n">check_as_mip_start</span><span class="p">()</span>
                <span class="n">effort</span> <span class="o">=</span> <span class="n">EffortLevel</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">effort_level</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mipstarts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">mip_start_</span><span class="p">,</span> <span class="n">effort</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;add_mip_starts expects solution, </span><span class="si">{0!r}</span><span class="s2"> was passed&quot;</span><span class="p">,</span> <span class="n">mip_start_sol</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mip_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the list of MIP start solutions (a list of instances of :class:`docplex.mp.solution.SolveSolution`)</span>
<span class="sd">        attached to the model if MIP starts have been defined, possibly an empty list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Model.mip_starts is deprecated. Use Model.iter_mip_starts instead&quot;</span>
                      <span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_mip_starts</span><span class="p">()]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_mip_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the number of MIP start associated with the model.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mipstarts</span><span class="p">)</span>

<div class="viewcode-block" id="Model.iter_mip_starts"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_mip_starts">[docs]</a>    <span class="k">def</span> <span class="nf">iter_mip_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns an iterator on the MIP starts associated with</span>
<span class="sd">         the model.</span>

<span class="sd">         It returns tuples of size 2:</span>
<span class="sd">            - first element is a solution (an instance of :class:`docplex.mp.solution.SolveSolution`)</span>
<span class="sd">            - second is an enumerated value of type :class:`docplex.mp.constants.EffortLevel`</span>

<span class="sd">        *New in version 2.10*</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mipstarts</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.clear_mip_starts"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear_mip_starts">[docs]</a>    <span class="k">def</span> <span class="nf">clear_mip_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Clears all MIP starts associated with the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mipstarts</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Model.remove_mip_start"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.remove_mip_start">[docs]</a>    <span class="k">def</span> <span class="nf">remove_mip_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mipstart</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes one MIP start from the list of MIP starts associated with the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            mipstart: A MIP start solution, an instance of :class:`docplex.mp.solution.SolveSolution`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Model.remove_mip_start is deprecated.&quot;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Model.mip_start does not work: use clear_mip_starts and set new mip starts&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.read_mip_starts"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.read_mip_starts">[docs]</a>    <span class="k">def</span> <span class="nf">read_mip_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mst_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Read MIP starts from a file.</span>

<span class="sd">        Reads the file and returns a list of (solution, effort_level) tuples.</span>

<span class="sd">        :param mst_path: the path to mip start file (in CPLEX MST file format)</span>

<span class="sd">        :return: a list of tuples of size 2; the first element is an instance of `SolveSolution`</span>
<span class="sd">            and the second element is an enumerated value of type `EffortLevel`</span>

<span class="sd">        See Also:</span>
<span class="sd">            :class: `docplex.mp.constants.EffortLevel`</span>
<span class="sd">            :class: `docplex.mp.solution.SolveSolution`</span>

<span class="sd">        * New in version 2.10*</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_solved_as_mip</span><span class="p">(</span><span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.read_mip_starts&quot;</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">docplex.mp.mst_xml_reader</span> <span class="k">import</span> <span class="n">read_mst_file</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">check_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mst_path</span><span class="p">,</span> <span class="s2">&quot;MST&quot;</span><span class="p">,</span> <span class="n">expected_extensions</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.mst&quot;</span><span class="p">,</span> <span class="s2">&quot;.xml&quot;</span><span class="p">),</span>
                                     <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.read_mip_starts&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Reading mip starts from file: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mst_path</span><span class="p">))</span>
        <span class="n">mip_starts</span> <span class="o">=</span> <span class="n">read_mst_file</span><span class="p">(</span><span class="n">mst_path</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mip_starts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">mip_starts</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Found no MIP starts in file: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mst_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Read </span><span class="si">{0}</span><span class="s2"> MIP starts in file: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mip_starts</span><span class="p">),</span> <span class="n">mst_path</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mipstarts</span> <span class="o">=</span> <span class="n">mip_starts</span>
            <span class="k">return</span> <span class="n">mip_starts</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># do not overwrite current mip starts (IMHO)</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Model.set_lp_start_basis"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.set_lp_start_basis">[docs]</a>    <span class="k">def</span> <span class="nf">set_lp_start_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar_stats</span><span class="p">,</span> <span class="n">lct_stats</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Provides an initial basis for a LP problem.</span>

<span class="sd">        :param dvar_stats: an ordered sequence (list) of basis status objects, one for</span>
<span class="sd">            each decision variable in the model.</span>
<span class="sd">        :param lct_stats: an ordered sequence (list) of basis status objects, one for each linear constraint</span>
<span class="sd">            in the model</span>

<span class="sd">        Note:</span>
<span class="sd">            Basis status are values of the enumerated type :class:`docplex.mp.constants.BasisStatus`.</span>

<span class="sd">        See Also:</span>
<span class="sd">             :class:`docplex.mp.constants.BasisStatus`.</span>

<span class="sd">        * New in version 2.10*</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l_dvar_stats</span> <span class="o">=</span> <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_initial_lp_stats</span>\
            <span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">stats</span><span class="o">=</span> <span class="n">dvar_stats</span><span class="p">,</span> <span class="n">stat_type</span><span class="o">=</span><span class="s1">&#39;variable&#39;</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.set_lp_start_basis&#39;</span><span class="p">)</span>
        <span class="n">l_lct_stats</span> <span class="o">=</span> <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_initial_lp_stats</span>\
            <span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">stats</span><span class="o">=</span><span class="n">lct_stats</span><span class="p">,</span> <span class="n">stat_type</span><span class="o">=</span><span class="s1">&#39;constraint&#39;</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.set_lp_start_basis&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">set_lp_start</span><span class="p">(</span><span class="n">l_dvar_stats</span><span class="p">,</span> <span class="n">l_lct_stats</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">objective_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the value of the objective expression in the solution of the last solve.</span>
<span class="sd">        In case of a multi-objective, only the value of the first objective is returned</span>

<span class="sd">        Raises an exception if the model has not been solved successfully.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_has_solution</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_value</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_objective_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">multi_objective_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the list of values of the objective expressions in the solution of the last solve.</span>

<span class="sd">        Raises an exception if the model has not been solved successfully.</span>

<span class="sd">        *New in version 2.9*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_has_solution</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective_values</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_multi_objective_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">multi_objective_values</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">blended_objective_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the list of values of the blended objective expressions based on the decreasing</span>
<span class="sd">        order of priorities in the solution of the last solve.</span>

<span class="sd">        Raises an exception if the model has not been solved successfully.</span>

<span class="sd">        *New in version 2.9.*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_has_solution</span><span class="p">()</span>
        <span class="n">blended_obj_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">get_blended_objective_value_by_priority</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">blended_obj_values</span>

    <span class="k">def</span> <span class="nf">_reported_objective_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">failure_obj</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">objective_value</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span> <span class="k">else</span> <span class="n">failure_obj</span>

    <span class="k">def</span> <span class="nf">_resolve_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path_arg</span><span class="p">,</span> <span class="n">basename_arg</span><span class="p">,</span> <span class="n">extension</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">if</span> <span class="n">is_string</span><span class="p">(</span><span class="n">path_arg</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path_arg</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">path_arg</span> <span class="o">==</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
                    <span class="n">path_arg</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_output_path</span><span class="p">(</span><span class="n">extension</span><span class="p">,</span> <span class="n">basename_arg</span><span class="p">,</span> <span class="n">path_arg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># add extension if not present (but not twice!)</span>
                <span class="k">return</span> <span class="n">path_arg</span> <span class="k">if</span> <span class="n">path_arg</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">extension</span><span class="p">)</span> <span class="k">else</span> <span class="n">path_arg</span> <span class="o">+</span> <span class="n">extension</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">path_arg</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_output_path</span><span class="p">(</span><span class="n">extension</span><span class="p">,</span> <span class="n">basename_arg</span><span class="p">,</span> <span class="n">path_arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_make_output_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extension</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">make_output_path2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">extension</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

    <span class="n">lp_format</span> <span class="o">=</span> <span class="n">LP_format</span>

    <span class="k">def</span> <span class="nf">_get_printer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">printer_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;full_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_full_obj</span><span class="p">}</span>
        <span class="n">printer</span> <span class="o">=</span> <span class="n">ModelPrinterFactory</span><span class="o">.</span><span class="n">new_printer</span><span class="p">(</span><span class="n">exchange_format</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">printer_kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">printer</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">if</span> <span class="n">do_raise</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Unsupported output format: </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">)</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">silent</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unsupported output format: </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">printer</span>

    <span class="k">def</span> <span class="nf">dump_as_lp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">)</span>

<div class="viewcode-block" id="Model.export_as_lp"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.export_as_lp">[docs]</a>    <span class="k">def</span> <span class="nf">export_as_lp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Exports a model in LP format.</span>

<span class="sd">        Args:</span>
<span class="sd">            basename: Controls the basename with which the model is printed.</span>
<span class="sd">                Accepts None, a plain string, or a string format.</span>
<span class="sd">                if None, uses the model&#39;s name;</span>
<span class="sd">                if passed a plain string, the string is used in place of the model&#39;s name;</span>
<span class="sd">                if passed a string format (either with %s or {0}, it is used to format the</span>
<span class="sd">                model name to produce the basename of the written file.</span>

<span class="sd">            path: A path to write file, expects a string path or None.</span>
<span class="sd">                can be either a directory, in which case the basename</span>
<span class="sd">                that was computed with the basename argument, is appended to the directory to produce</span>
<span class="sd">                the file.</span>
<span class="sd">                If given a full path, the path is directly used to write the file, and</span>
<span class="sd">                the basename argument is not used.</span>
<span class="sd">                If passed None, the output directory will be ``tempfile.gettempdir()``.</span>

<span class="sd">            hide_user_names: A Boolean indicating whether or not to keep user names for</span>
<span class="sd">                variables and constraints. If True, all names are replaced by `x1`, `x2`, ... for variables,</span>
<span class="sd">                and `c1`, `c2`, ... for constraints.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Assuming the model&#39;s name is `mymodel`:</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; m.export_as_lp()</span>
<span class="sd">            </span>
<span class="sd">            will write ``mymodel.lp`` in ``gettempdir()``.</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; m.export_as_lp(basename=&quot;foo&quot;)</span>
<span class="sd">            </span>
<span class="sd">            will write ``foo.lp`` in ``gettempdir()``.</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; m.export_as_lp(basename=&quot;foo&quot;, path=&quot;e:/home/docplex&quot;)</span>

<span class="sd">            will write file ``e:/home/docplex/foo.lp``.</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; m.export_as_lp(&quot;e/home/docplex/bar.lp&quot;)</span>
<span class="sd">            </span>
<span class="sd">            will write file ``e:/home/docplex/bar.lp``.</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; m.export_as_lp(basename=&quot;docplex_%s&quot;, path=&quot;e/home/&quot;) </span>
<span class="sd">            </span>
<span class="sd">            will write file ``e:/home/docplex/docplex_mymodel.lp``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.export_as_sav"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.export_as_sav">[docs]</a>    <span class="k">def</span> <span class="nf">export_as_sav</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Exports a model in CPLEX SAV format.</span>

<span class="sd">        Exporting to SAV format requires that CPLEX is installed and</span>
<span class="sd">        available in PYTHONPATH. If the CPLEX DLL cannot be found, an exception is raised.</span>

<span class="sd">        Args:</span>
<span class="sd">            basename: Controls the basename with which the model is printed.</span>
<span class="sd">                Accepts None, a plain string, or a string format.</span>
<span class="sd">                If None, the model&#39;s name is used.</span>
<span class="sd">                If passed a plain string, the string is used in place of the model&#39;s name.</span>
<span class="sd">                If passed a string format (either with %s or {0}), it is used to format the</span>
<span class="sd">                model name to produce the basename of the written file.</span>

<span class="sd">            path: A path to write the file, expects a string path or None.</span>
<span class="sd">                Can be a directory, in which case the basename</span>
<span class="sd">                that was computed with the basename argument, is appended to the directory to produce</span>
<span class="sd">                the file.</span>
<span class="sd">                If given a full path, the path is directly used to write the file, and</span>
<span class="sd">                the basename argument is not used.</span>
<span class="sd">                If passed None, the output directory will be ``tempfile.gettempdir()``.</span>

<span class="sd">        Examples:</span>
<span class="sd">            See the documentation of  :func:`export_as_lp` for examples of pathname generation.</span>
<span class="sd">            The logic is identical for both methods.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_export</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">use_engine</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">exchange_format</span><span class="o">=</span><span class="n">SAV_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.export_as_mps"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.export_as_mps">[docs]</a>    <span class="k">def</span> <span class="nf">export_as_mps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Exports a model in MPS format.</span>

<span class="sd">        Exporting to MPS format requires that CPLEX is installed and</span>
<span class="sd">        available in PYTHONPATH. If the CPLEX DLL cannot be found, an exception is raised.</span>

<span class="sd">        Args:</span>
<span class="sd">            basename: Controls the basename with which the model is printed.</span>
<span class="sd">                Accepts None, a plain string, or a string format.</span>
<span class="sd">                If None, the model&#39;s name is used.</span>
<span class="sd">                If passed a plain string, the string is used in place of the model&#39;s name.</span>
<span class="sd">                If passed a string format (either with %s or {0}), it is used to format the</span>
<span class="sd">                model name to produce the basename of the written file.</span>

<span class="sd">            path: A path to write the file, expects a string path or None.</span>
<span class="sd">                Can be a directory, in which case the basename</span>
<span class="sd">                that was computed with the basename argument, is appended to the directory to produce</span>
<span class="sd">                the file.</span>
<span class="sd">                If given a full path, the path is directly used to write the file, and</span>
<span class="sd">                the basename argument is not used.</span>
<span class="sd">                If passed None, the output directory will be ``tempfile.gettempdir()``.</span>

<span class="sd">        Examples:</span>
<span class="sd">            See the documentation of  :func:`export_as_lp` for examples of pathname generation.</span>
<span class="sd">            The logic is identical for both methods.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_export</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">use_engine</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">exchange_format</span><span class="o">=</span><span class="n">MPS_format</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_export</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span>
                            <span class="n">use_engine</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">hide_user_names</span><span class="o">=</span><span class="n">hide_user_names</span><span class="p">,</span>
                            <span class="n">exchange_format</span><span class="o">=</span><span class="n">exchange_format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_export</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span>
                            <span class="n">hide_user_names</span><span class="o">=</span><span class="n">hide_user_names</span><span class="p">,</span>
                            <span class="n">exchange_format</span><span class="o">=</span><span class="n">exchange_format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">use_engine</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="c1"># path is either a nonempty path string or None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">extension</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">extension</span> <span class="o">=</span> <span class="n">exchange_format</span><span class="o">.</span><span class="n">extension</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Not a supported exchange format: </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">)</span>

        <span class="c1"># combination of path/directory and basename resolution are done in resolve_path</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">extension</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_export_to_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="p">,</span> <span class="n">use_engine</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;model file: </span><span class="si">{0}</span><span class="s2"> overwritten&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">_export_to_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">use_engine</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_setup</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">use_engine</span><span class="p">:</span>
                <span class="c1"># rely on engine for the dump</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_cplex</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span>
                        <span class="s2">&quot;Exporting to </span><span class="si">{0}</span><span class="s2"> requires CPLEX, but a local CPLEX installation could not be found, file: </span><span class="si">{1}</span><span class="s2"> could not be written&quot;</span><span class="p">,</span>
                        <span class="n">exchange_format</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># a path is not a stream but anyway it will work</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_export_to_stream</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="n">hide_user_names</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">exchange_format</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">path</span>

        <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot open file: </span><span class="se">\&quot;</span><span class="si">{0}</span><span class="se">\&quot;</span><span class="s2">, model: </span><span class="si">{1}</span><span class="s2"> not exported&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">_export_to_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">):</span>
        <span class="n">printer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_printer</span><span class="p">(</span><span class="n">exchange_format</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">printer</span><span class="p">:</span>
            <span class="n">printer</span><span class="o">.</span><span class="n">set_mangle_names</span><span class="p">(</span><span class="n">hide_user_names</span><span class="p">)</span>
            <span class="n">printer</span><span class="o">.</span><span class="n">printModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">)</span>

<div class="viewcode-block" id="Model.export_to_stream"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.export_to_stream">[docs]</a>    <span class="k">def</span> <span class="nf">export_to_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Export the model to an output stream in LP format.</span>

<span class="sd">        A stream can be one of:</span>
<span class="sd">            - a string, interpreted as a system path,</span>
<span class="sd">            - None, interpreted as `stdout`, or</span>
<span class="sd">            - a Python file-type object (e.g. a StringIO() instance).</span>
<span class="sd">                </span>
<span class="sd">        Args:</span>
<span class="sd">            stream: An object defining where the output will be sent.</span>
<span class="sd">            </span>
<span class="sd">            hide_user_names: An optional Boolean indicating whether or not to keep user names for</span>
<span class="sd">                variables and constraints. If True, all names are replaced by `x1`, `x2`, ... for variables,</span>
<span class="sd">                and `c1`, `c2`, ,... for constraints. Default is to keep user names.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_export_to_stream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.export_as_lp_string"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.export_as_lp_string">[docs]</a>    <span class="k">def</span> <span class="nf">export_as_lp_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Exports the model to a string in LP format.</span>

<span class="sd">        The output string contains the model in LP format.</span>

<span class="sd">        Args:</span>
<span class="sd">            hide_user_names: An optional Boolean indicating whether or not to keep user names for</span>
<span class="sd">                variables and constraints. If True, all names are replaced by `x1`, `x2`, ... for variables,</span>
<span class="sd">                and `c1`, `c2`, ... for constraints. Default is to keep user names.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string, containing the model exported in LP format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_to_string</span><span class="p">(</span><span class="n">hide_user_names</span><span class="p">,</span> <span class="n">LP_format</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lp_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_as_lp_string</span><span class="p">()</span>

<div class="viewcode-block" id="Model.export_as_mps_string"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.export_as_mps_string">[docs]</a>    <span class="k">def</span> <span class="nf">export_as_mps_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Exports the model to a string in MPS format.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string, containing the model exported in MPS format.</span>

<span class="sd">        *New in version 2.13*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_export_as_cplex_string</span><span class="p">(</span><span class="n">MPS_format</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.export_as_sav_string"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.export_as_sav_string">[docs]</a>    <span class="k">def</span> <span class="nf">export_as_sav_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Exports the model to a string of bytes in SAV format.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string of bytes..</span>

<span class="sd">        *New in version 2.13*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_export_as_cplex_string</span><span class="p">(</span><span class="n">SAV_format</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_export_as_cplex_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xformat</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_cplex</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Exporting to </span><span class="si">{0}</span><span class="s2"> requires CPLEX, but a local CPLEX installation could not be found&quot;</span><span class="p">,</span>
                       <span class="n">xformat</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># INTERNAL</span>
        <span class="kn">from</span> <span class="nn">io</span> <span class="k">import</span> <span class="n">BytesIO</span>
        <span class="n">bs</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">bs</span><span class="p">,</span> <span class="n">xformat</span><span class="p">)</span>
        <span class="n">raw_res</span> <span class="o">=</span> <span class="n">bs</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">xformat</span><span class="o">.</span><span class="n">is_binary</span><span class="p">:</span>
            <span class="c1"># for b, by in enumerate(raw_res):</span>
            <span class="c1">#     nl = (b % 21 == 20)</span>
            <span class="c1">#     print(f&quot; {by}&quot;, end=&#39;\n&#39; if nl else &#39;&#39;)</span>
            <span class="c1"># print()</span>
            <span class="k">return</span> <span class="n">raw_res</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">raw_res</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">fileencoding</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">export_to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange_format</span><span class="o">=</span><span class="n">LP_format</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">oss</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_export_to_stream</span><span class="p">(</span><span class="n">oss</span><span class="p">,</span> <span class="n">hide_user_names</span><span class="p">,</span> <span class="n">exchange_format</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">oss</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">export_parameters_as_prm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># path is either a nonempty path string or None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># combination of path/directory and basename resolution are done in resolve_path</span>
        <span class="n">prm_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;.prm&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">export_prm_to_path</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">prm_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prm_path</span>

    <span class="k">def</span> <span class="nf">export_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">docplex.mp.anno</span> <span class="k">import</span> <span class="n">ModelAnnotationPrinter</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># combination of path/directory and basename resolution are done in resolve_path</span>
        <span class="n">anno_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;.ann&#39;</span><span class="p">)</span>
        <span class="n">ap</span> <span class="o">=</span> <span class="n">ModelAnnotationPrinter</span><span class="p">()</span>
        <span class="n">ap</span><span class="o">.</span><span class="n">print_to_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anno_path</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">anno_path</span>

    <span class="k">def</span> <span class="nf">check_problem_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature</span><span class="p">,</span> <span class="n">requires_solution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_qxp</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solve_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> are not available, model is not solved yet&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">feature</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">requires_solution</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> require a solution, but model is not solved with a solution&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">feature</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solved_as_lp</span><span class="p">():</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">accept_qxp</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">solves_as_qxp</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> are not available for QP/QCP problems&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">feature</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solved_as_mip</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> are not available for integer problems&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">feature</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_dual_value1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">):</span>
        <span class="c1"># PRIVATE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_problem_type</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="s1">&#39;dual values&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_ct_added_to_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_ct</span><span class="p">)</span>
        <span class="n">dvs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dual_values</span><span class="p">([</span><span class="n">linear_ct</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">dvs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="Model.dual_values"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.dual_values">[docs]</a>    <span class="k">def</span> <span class="nf">dual_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the dual values of a sequence of linear constraints.</span>

<span class="sd">        Note: the model must a pure LP: no integer or binary variable, no piecewise, no SOS.</span>
<span class="sd">        The model must also be solved successfully before calling this method.</span>

<span class="sd">        :param cts: a sequence of linear constraints.</span>

<span class="sd">        :return: a sequence of float numbers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_problem_type</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="s1">&#39;dual values&#39;</span><span class="p">)</span>
        <span class="n">checked_lcts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_constraint_seq</span><span class="p">(</span><span class="n">cts</span><span class="p">,</span> <span class="n">check_linear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dual_values</span><span class="p">(</span><span class="n">checked_lcts</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_dual_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts</span><span class="p">):</span>
        <span class="c1"># PRIVATE</span>
        <span class="n">checked_lcts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_cts_added_to_model</span><span class="p">(</span><span class="n">mdl</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts</span> <span class="o">=</span> <span class="n">cts</span><span class="p">)</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span>
        <span class="n">sol</span><span class="o">.</span><span class="n">ensure_dual_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_engine</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">sol</span><span class="o">.</span><span class="n">get_dual_values</span><span class="p">(</span><span class="n">checked_lcts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_slack_value1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
        <span class="c1"># private</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_ct_added_to_model</span><span class="p">(</span><span class="n">mdl</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="o">=</span><span class="n">ct</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_has_solution</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_slack_values</span><span class="p">([</span><span class="n">ct</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="Model.slack_values"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.slack_values">[docs]</a>    <span class="k">def</span> <span class="nf">slack_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the slack values for a sequence of constraints.</span>

<span class="sd">        Slack values are available for linear, quadratic and indicator constraints.</span>
<span class="sd">        The model must be solved successfully before calling this method.</span>

<span class="sd">        :param cts: a sequence of constraints.</span>
<span class="sd">        :return: a list of float values, in the same order as the constraints.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_has_solution</span><span class="p">()</span>
        <span class="n">ckr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="n">cts1</span> <span class="o">=</span> <span class="n">ckr</span><span class="o">.</span><span class="n">typecheck_constraint_seq</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span>
        <span class="n">cts2</span> <span class="o">=</span> <span class="n">ckr</span><span class="o">.</span><span class="n">typecheck_cts_added_to_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts1</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_slack_values</span><span class="p">(</span><span class="n">cts2</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_slack_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cts</span><span class="p">):</span>
        <span class="n">checked_cts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_constraint_seq</span><span class="p">(</span><span class="n">cts</span><span class="p">)</span>
        <span class="c1"># ---</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span>
        <span class="n">sol</span><span class="o">.</span><span class="n">ensure_slack_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_engine</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">sol</span><span class="o">.</span><span class="n">get_slacks</span><span class="p">(</span><span class="n">checked_cts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_reduced_cost1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="c1"># PRIVATE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_problem_type</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="s1">&#39;reduced costs&#39;</span><span class="p">)</span>
        <span class="c1">#self._checker.typecheck_var(dvar)</span>
        <span class="n">rcs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reduced_costs</span><span class="p">([</span><span class="n">dvar</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">rcs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="Model.reduced_costs"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.reduced_costs">[docs]</a>    <span class="k">def</span> <span class="nf">reduced_costs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the reduced costs for a variable iterable.</span>

<span class="sd">         Note: the model must a pure LP: no integer or binary variable, no piecewise, no SOS.</span>
<span class="sd">         The model must also be solved successfully before calling this method.</span>

<span class="sd">        :param dvars: a sequence of variables.</span>
<span class="sd">        :return: a list of float numbers, in the same order as the variable sequence.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_problem_type</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="s1">&#39;reduced costs&#39;</span><span class="p">)</span>
        <span class="n">checked_vars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_var_seq</span><span class="p">(</span><span class="n">dvars</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.reduced_costs&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reduced_costs</span><span class="p">(</span><span class="n">checked_vars</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_reduced_costs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">):</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span>
        <span class="k">assert</span> <span class="n">sol</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">sol</span><span class="o">.</span><span class="n">ensure_reduced_costs</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_engine</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">sol</span><span class="o">.</span><span class="n">get_reduced_costs</span><span class="p">(</span><span class="n">dvars</span><span class="p">)</span>

<div class="viewcode-block" id="Model.quadratic_dual_slacks"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.quadratic_dual_slacks">[docs]</a>    <span class="k">def</span> <span class="nf">quadratic_dual_slacks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns quadratic dual slacks as a dict of dicts.</span>

<span class="sd">        :param args: accepts either no arguments, in which case returns quadratic dual slacks</span>
<span class="sd">           for all quadratic constraints in the model, or a list of quadratic constraints.</span>

<span class="sd">        :return: a Python dictionary, whose keys are quadratic constraints, and</span>
<span class="sd">            values are dictionaries from variables to quadratic dual slacks.</span>

<span class="sd">        *New in version 2.15*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nb_args</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">nb_args</span><span class="p">:</span>
            <span class="n">qcts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_quadratic_constraints</span><span class="p">()</span>
        <span class="k">elif</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">nb_args</span><span class="p">:</span>
            <span class="n">qcts</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">qcts</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Model.quadratic_dual_slacks expects either an iteratble on quadratic constraints, or no args.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">check_problem_type</span><span class="p">(</span><span class="s1">&#39;quadratic_dual_slacks&#39;</span><span class="p">,</span> <span class="n">requires_solution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_qxp</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">cpx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cplex</span><span class="p">(</span><span class="n">do_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">msgfn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;Quadratic dual slacks require CPLEX library&quot;</span><span class="p">)</span>
        <span class="n">checked_qcts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_quadratic_constraint_seq</span><span class="p">(</span><span class="n">qcts</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">checked_qcts</span><span class="p">:</span>
            <span class="n">qixs</span> <span class="o">=</span> <span class="p">[</span><span class="n">qc</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">qc</span> <span class="ow">in</span> <span class="n">checked_qcts</span><span class="p">]</span>
            <span class="n">cpx_qdss</span> <span class="o">=</span> <span class="n">cpx</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">get_quadratic_dualslack</span><span class="p">(</span><span class="n">qixs</span><span class="p">)</span>
            <span class="n">qds_as_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">checked_qcts</span><span class="p">[</span><span class="n">q</span><span class="p">]:</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_var_by_index</span><span class="p">(</span><span class="n">idx</span><span class="p">):</span> <span class="n">qds</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">qds</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cpx_sp</span><span class="o">.</span><span class="n">ind</span><span class="p">,</span> <span class="n">cpx_sp</span><span class="o">.</span><span class="n">val</span><span class="p">)}</span> \
                        <span class="k">for</span> <span class="n">q</span><span class="p">,</span> <span class="n">cpx_sp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cpx_qdss</span><span class="p">)</span> <span class="p">}</span>
            <span class="k">return</span> <span class="n">qds_as_dict</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span></div>

    <span class="k">def</span> <span class="nf">_var_basis_status1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvar</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_basis_statuses</span><span class="p">([</span><span class="n">dvar</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="Model.var_basis_statuses"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.var_basis_statuses">[docs]</a>    <span class="k">def</span> <span class="nf">var_basis_statuses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns basis status for a batch of variables.</span>

<span class="sd">        :param dvars: an iterable returning variables.</span>
<span class="sd">        :return: a list of basis status, of type :class:`docplex.mp.constants.BasisStatus`.</span>
<span class="sd">            The order of the list is the order in which variables were returned by the iterable.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_problem_type</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="s1">&#39;basis status&#39;</span><span class="p">,</span> <span class="n">requires_solution</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">accept_qxp</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">checked_vars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_var_seq</span><span class="p">(</span><span class="n">dvars</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_basis_status</span><span class="p">(</span><span class="n">checked_vars</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_var_basis_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generic_get_basis_status</span><span class="p">(</span><span class="n">dvars</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                               <span class="n">sol_getter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s_</span><span class="p">,</span> <span class="n">dvs_</span><span class="p">:</span> <span class="n">s_</span><span class="o">.</span><span class="n">get_var_basis_statuses</span><span class="p">(</span><span class="n">dvs_</span><span class="p">))</span>

<div class="viewcode-block" id="Model.linear_constraint_basis_statuses"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.linear_constraint_basis_statuses">[docs]</a>    <span class="k">def</span> <span class="nf">linear_constraint_basis_statuses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lcts</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns basis status for a batch of linear constraints.</span>

<span class="sd">        :param lcts: an iterable returning linear constraints.</span>
<span class="sd">        :return: a list of basis status, of type :class:`docplex.mp.constants.BasisStatus`.</span>
<span class="sd">            The order of the list is the order in which constraints were returned by the iterable.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_problem_type</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="s1">&#39;basis status&#39;</span><span class="p">,</span> <span class="n">requires_solution</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">accept_qxp</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">checked_lincts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_constraint_seq</span><span class="p">(</span><span class="n">lcts</span><span class="p">,</span> <span class="n">check_linear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_range</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linearct_basis_status</span><span class="p">(</span><span class="n">checked_lincts</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_linearct_basis_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lcts</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generic_get_basis_status</span>\
            <span class="p">(</span><span class="n">lcts</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sol_getter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s_</span><span class="p">,</span> <span class="n">cts_</span><span class="p">:</span> <span class="n">s_</span><span class="o">.</span><span class="n">get_linearct_basis_statuses</span><span class="p">(</span><span class="n">cts_</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_generic_get_basis_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objs</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">sol_getter</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span>
        <span class="k">if</span> <span class="n">sol</span><span class="p">:</span>
            <span class="n">sol</span><span class="o">.</span><span class="n">ensure_basis_statuses</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_engine</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">sol_getter</span><span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span> <span class="c1">#sol.get_linearct_basis_statuses(lcts)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">basis_tuple</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">get_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">basis</span> <span class="o">=</span> <span class="n">basis_tuple</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">basis</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No basis is available&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">BasisStatus</span><span class="o">.</span><span class="n">NotABasisStatus</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span> <span class="n">BasisStatus</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">basis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">]</span>

<div class="viewcode-block" id="Model.has_basis"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.has_basis">[docs]</a>    <span class="k">def</span> <span class="nf">has_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns True if the model contains basis information.</span>

<span class="sd">        *New in version 2.9*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution</span>
        <span class="k">if</span> <span class="n">sol</span><span class="p">:</span>
            <span class="n">sol</span><span class="o">.</span><span class="n">ensure_basis_statuses</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_engine</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">sol</span><span class="o">.</span><span class="n">_has_basis</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">var_basis</span><span class="p">,</span> <span class="n">linct_basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">get_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">var_basis</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span></div>

    <span class="k">def</span> <span class="nf">_write_cplex_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">extension</span><span class="p">,</span> <span class="n">cpx_write_fn</span><span class="p">,</span> <span class="n">check_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">m_</span><span class="p">:</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">check_fn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">export_basename</span> <span class="o">=</span> <span class="n">normalize_basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">force_lowercase</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">export_path</span> <span class="o">=</span> <span class="n">make_output_path2</span><span class="p">(</span><span class="n">actual_name</span><span class="o">=</span><span class="n">export_basename</span><span class="p">,</span>
                                        <span class="n">extension</span><span class="o">=</span><span class="n">extension</span><span class="p">,</span>
                                        <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                                        <span class="n">basename_fmt</span><span class="o">=</span><span class="n">basename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">export_path</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;CPLEX library is required for </span><span class="si">{0}</span><span class="s2"> export - file </span><span class="si">{1}</span><span class="s2"> not written&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">export_path</span><span class="p">)</span>
            <span class="n">cpx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cplex</span><span class="p">(</span><span class="n">do_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">msgfn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">msg</span><span class="p">)</span>
            <span class="n">cpx_write_fn</span><span class="p">(</span><span class="n">cpx</span><span class="p">,</span> <span class="n">export_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">export_path</span>

    <span class="k">def</span> <span class="nf">_check_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_basis</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;No basis data is available for model &#39;</span><span class="si">{0}</span><span class="s2">&#39;- cannot write basis file&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">export_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_cplex_file</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;basis&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="n">basename</span><span class="p">,</span>
                                      <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;.bas&#39;</span><span class="p">,</span>
                                      <span class="n">cpx_write_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cpx_</span><span class="p">,</span> <span class="n">path_</span><span class="p">:</span> <span class="n">cpx_</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">basis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">path_</span><span class="p">),</span>
                                      <span class="n">check_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">m_</span><span class="p">:</span> <span class="n">m_</span><span class="o">.</span><span class="n">_check_basis</span><span class="p">())</span>
        <span class="c1"># if not self.has_basis():</span>
        <span class="c1">#     self.fatal(&quot;No basis data is available for model &#39;{0}&#39;- cannot write basis file&quot;,</span>
        <span class="c1">#                self.name)</span>
        <span class="c1"># else:</span>
        <span class="c1">#     sol_basename = normalize_basename(self.name, force_lowercase=True)</span>
        <span class="c1">#     bas_path = make_output_path2(actual_name=sol_basename,</span>
        <span class="c1">#                                  extension=&quot;.bas&quot;,</span>
        <span class="c1">#                                  path=path,</span>
        <span class="c1">#                                  basename_fmt=basename)</span>
        <span class="c1">#     if bas_path:</span>
        <span class="c1">#         cpx = self.get_cplex(do_raise=False)</span>
        <span class="c1">#         if not cpx:</span>
        <span class="c1">#             self.fatal(&quot;CPLEX library is required for basis export - file {} not written&quot;, bas_path)</span>
        <span class="c1">#         else:</span>
        <span class="c1">#             cpx.solution.basis.write(bas_path)</span>
        <span class="c1">#             return bas_path</span>


    <span class="n">DEFAULT_VAR_VALUE_QUOTED_SOLUTION_FMT</span> <span class="o">=</span> <span class="s1">&#39;  </span><span class="se">\&quot;</span><span class="si">{varname}</span><span class="se">\&quot;</span><span class="s1">={value:.</span><span class="si">{prec}</span><span class="s1">f}&#39;</span>
    <span class="n">DEFAULT_VAR_VALUE_UNQUOTED_SOLUTION_FMT</span> <span class="o">=</span> <span class="s1">&#39;  </span><span class="si">{varname}</span><span class="s1">={value:.</span><span class="si">{prec}</span><span class="s1">f}&#39;</span>
    <span class="n">DEFAULT_OBJECTIVE_FMT</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">: {1:.</span><span class="si">{prec}</span><span class="s2">f}&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">supports_logical_constraints</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span><span class="o">.</span><span class="n">_supports_logical_constraints</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_supports_logical_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">ok</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">supports_logical_constraints</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ok</span>
    
    <span class="n">_is_cplex_ce</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">is_cplex_ce</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_is_cplex_ce</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="o">.</span><span class="n">has_cplex</span><span class="p">():</span>
                <span class="n">_is_cplex_ce</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1001</span><span class="p">):</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">integer_var</span><span class="p">()</span>
                        <span class="n">m</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">v</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">)</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">_is_cplex_ce</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">except</span> <span class="n">DOcplexLimitsExceeded</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">_is_cplex_ce</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_is_cplex_ce</span>
        

    <span class="k">def</span> <span class="nf">check_logical_constraint_support</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">ok</span><span class="p">,</span> <span class="n">why</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">supports_logical_constraints</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">why</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="n">why</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_has_username_with_spaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">has_user_name</span><span class="p">()</span> <span class="ow">and</span> <span class="s1">&#39; &#39;</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

<div class="viewcode-block" id="Model.print_solution"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.print_solution">[docs]</a>    <span class="k">def</span> <span class="nf">print_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">print_zeros</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                       <span class="n">objective_fmt</span><span class="o">=</span><span class="n">DEFAULT_OBJECTIVE_FMT</span><span class="p">,</span>
                       <span class="n">var_value_fmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Prints the values of the model variables after a solve.</span>

<span class="sd">        Only valid after a successful solve. If the model has not been solved successfully, an</span>
<span class="sd">        exception is raised.</span>

<span class="sd">        Args:</span>
<span class="sd">            print_zeros (Boolean): If False, only non-zero values are printed. Default is False.</span>

<span class="sd">            objective_fmt : A format string in format syntax. The default printout is objective: xx where xx is formatted as a float with prec digits. The value of prec is computed automatically by DOcplex, either 0 if the objective expression is discrete or the model&#39;s float precision.</span>

<span class="sd">            var_value_fmt : A format string to format the variable name and value. Again, the default uses the automatically computed precision.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_has_solution</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">var_value_fmt</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_username_with_spaces</span><span class="p">():</span>
                <span class="n">var_value_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_VAR_VALUE_QUOTED_SOLUTION_FMT</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">var_value_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_VAR_VALUE_UNQUOTED_SOLUTION_FMT</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_objective</span><span class="p">():</span>
            <span class="n">var_value_fmt</span> <span class="o">=</span> <span class="n">var_value_fmt</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
        <span class="c1"># scope of variables.</span>
        <span class="n">iter_vars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">print_zeros</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="c1"># if some username has a whitespace, use quoted format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">print_zeros</span><span class="o">=</span><span class="n">print_zeros</span><span class="p">,</span>
                              <span class="n">header_fmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">value_fmt</span><span class="o">=</span><span class="n">var_value_fmt</span><span class="p">,</span>
                              <span class="n">iter_vars</span><span class="o">=</span><span class="n">iter_vars</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.report"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.report">[docs]</a>    <span class="k">def</span> <span class="nf">report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Prints the value of the objective and the KPIs.</span>
<span class="sd">        Only valid after a successful solve, otherwise states that the model is not solved.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_solution</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_multi_objective</span><span class="p">():</span>
                <span class="n">mobj_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective_values</span><span class="p">()</span>
                <span class="n">prec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_precision</span>
                <span class="n">s_mobjs</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;{0:.</span><span class="si">{prec}</span><span class="s2">f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mo</span><span class="p">,</span> <span class="n">prec</span><span class="o">=</span><span class="n">prec</span><span class="p">)</span> <span class="k">for</span> <span class="n">mo</span> <span class="ow">in</span> <span class="n">mobj_values</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* model </span><span class="si">{0}</span><span class="s2"> solved with objectives = [</span><span class="si">{1}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">s_mobjs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">used_prec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_precision</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* model </span><span class="si">{0}</span><span class="s2"> solved with objective = {1:.</span><span class="si">{prec}</span><span class="s2">f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                                                <span class="bp">self</span><span class="o">.</span><span class="n">_objective_value</span><span class="p">(),</span> <span class="n">prec</span><span class="o">=</span><span class="n">used_prec</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">report_kpis</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Model </span><span class="si">{0}</span><span class="s2"> has not been solved successfully, no reporting done.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.report_kpis"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.report_kpis">[docs]</a>    <span class="k">def</span> <span class="nf">report_kpis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selected_kpis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kpi_format</span><span class="o">=</span><span class="s1">&#39;*  KPI: {1:&lt;</span><span class="si">{0}</span><span class="s1">} = &#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Prints the values of the KPIs.</span>

<span class="sd">        KPIs require a solution to be evaluated. This solution can be passed explicitly as a parameter,</span>
<span class="sd">        or the model is assumed to be solved with a valid solution.</span>

<span class="sd">        :param solution: an instance of `SolveSolution`. If not passed, the model solution is</span>
<span class="sd">            queried. If the model has no solution, an exception is raised.</span>
<span class="sd">        :param selected_kpis: an optional iterable returning the KPIs to print.</span>
<span class="sd">            The default behavior is to print all kpis.</span>
<span class="sd">        :param kpi_format: an optional format to print the KPi name and its value.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :class: `docplex.mp.solution.SolveSolution`</span>
<span class="sd">            :func: `new_solution`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kpi_num_format</span> <span class="o">=</span> <span class="n">kpi_format</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_meta_format</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="p">,)</span>
        <span class="n">kpi_str_format</span> <span class="o">=</span> <span class="n">kpi_format</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="si">{2!s}</span><span class="s1">&#39;</span>
        <span class="n">printed_kpis</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">selected_kpis</span> <span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">selected_kpis</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_kpis</span><span class="p">())</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">max_kpi_name_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">printed_kpis</span><span class="p">)</span> <span class="c1"># max() raises ValueError on empty</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">max_kpi_name_len</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">kpi</span> <span class="ow">in</span> <span class="n">printed_kpis</span><span class="p">:</span>
            <span class="n">kpi_value</span> <span class="o">=</span> <span class="n">kpi</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_number</span><span class="p">(</span><span class="n">kpi_value</span><span class="p">):</span>
                <span class="n">k_format</span> <span class="o">=</span> <span class="n">kpi_num_format</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">k_format</span> <span class="o">=</span> <span class="n">kpi_str_format</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">k_format</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">type</span><span class="p">(</span><span class="n">kpi</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
                <span class="c1"># infamous mix of str and unicode. Should happen only</span>
                <span class="c1"># in py2. Let&#39;s convert things</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k_format</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">k_format</span> <span class="o">=</span> <span class="n">k_format</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">k_format</span> <span class="o">=</span> <span class="n">k_format</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>


            <span class="n">output</span> <span class="o">=</span> <span class="n">k_format</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">max_kpi_name_len</span><span class="p">,</span> <span class="n">kpi</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">kpi_value</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">UnicodeEncodeError</span><span class="p">:</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">encoding</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">encoding</span> <span class="k">else</span> <span class="s1">&#39;ascii&#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span>
                                    <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;backslashreplace&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.kpis_as_dict"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.kpis_as_dict">[docs]</a>    <span class="k">def</span> <span class="nf">kpis_as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kpi_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">objective_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_names</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns KPI values in a solution as a dictionary.</span>

<span class="sd">        Each KPI has a value in the solution. This method returns a dictionary of KPI values,</span>
<span class="sd">        indexed by KPI objects.</span>

<span class="sd">        :param solution: an instance of solution, as returned by solve(). If not passed, will</span>
<span class="sd">            use the model&#39;s solution. If no solution is present, an exception is raised.</span>
<span class="sd">        :param kpi_filter: an optional predicate to filter some kpis.</span>
<span class="sd">            If provided, accepts a function taking one KPI as argument and</span>
<span class="sd">            returning a boolean. By default, all KPIs are returned.</span>
<span class="sd">        :param objective_key: an optional string key for th eobjective value. If present, the</span>
<span class="sd">            value of the objective is added to the dictionary, with this key. By default, this parameter</span>
<span class="sd">            is None and the objective is *not* appended to the dictionary.</span>
<span class="sd">        :param use_names: a flag which determines whether keys in the resulting dict</span>
<span class="sd">            are KPI objects or kpi names. Default is to use KPI names.</span>

<span class="sd">        :return:</span>
<span class="sd">            A dictionary mapping KPIs, or KPI names to values.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :class:`docplex.mp.solution.SolveSolution`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">kpi_filter</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kpi_filter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">use_names</span><span class="p">:</span>
            <span class="n">kpi_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">kpi</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">kpi</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span> <span class="k">for</span> <span class="n">kpi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_kpis</span><span class="p">()</span> <span class="k">if</span> <span class="n">kpi_filter</span><span class="p">(</span><span class="n">kpi</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kpi_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">kpi</span><span class="p">:</span> <span class="n">kpi</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span> <span class="k">for</span> <span class="n">kpi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_kpis</span><span class="p">()</span> <span class="k">if</span> <span class="n">kpi_filter</span><span class="p">(</span><span class="n">kpi</span><span class="p">)}</span>
        <span class="k">if</span> <span class="n">objective_key</span><span class="p">:</span>
            <span class="n">kpi_dict</span><span class="p">[</span><span class="n">objective_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">objective_value</span>
        <span class="k">return</span> <span class="n">kpi_dict</span></div>

    <span class="k">def</span> <span class="nf">_report_lexicographic_goals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">goal_name_values</span><span class="p">,</span> <span class="n">kpi_header_format</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">kpi_format</span> <span class="o">=</span> <span class="n">kpi_header_format</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_meta_format</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span> <span class="c1"># be safe even integer KPIs might yield floats</span>
        <span class="n">printed_kpis</span> <span class="o">=</span> <span class="n">goal_name_values</span> <span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">goal_name_values</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_kpis</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">goal_name</span><span class="p">,</span> <span class="n">goal_expr</span> <span class="ow">in</span> <span class="n">printed_kpis</span><span class="p">:</span>
            <span class="n">goal_value</span> <span class="o">=</span> <span class="n">goal_expr</span><span class="o">.</span><span class="n">solution_value</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">kpi_format</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">goal_name</span><span class="p">,</span> <span class="n">goal_value</span><span class="p">))</span>

<div class="viewcode-block" id="Model.iter_kpis"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_kpis">[docs]</a>    <span class="k">def</span> <span class="nf">iter_kpis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator over all KPIs in the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">           An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.kpi_by_name"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.kpi_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">kpi_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">try_match</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">match_case</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Fetches a KPI from a string.</span>

<span class="sd">        This method fetches a KPI from a string, using either exact naming or trying</span>
<span class="sd">        to match a substring of the KPI name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (string): The string to be matched.</span>
<span class="sd">            try_match (Boolean): If True, returns KPI whose name is not equal to the</span>
<span class="sd">                argument, but contains it. Default is True.</span>
<span class="sd">            match_case: If True, looks for a case-exact match, else ignores case. Default is False.</span>
<span class="sd">            do_raise: If True, raise an exception when no KPI is found.</span>

<span class="sd">        Example:</span>
<span class="sd">            If the KPI name is &quot;Total CO2 Cost&quot; then fetching with argument `co2` and `match_case` to False</span>
<span class="sd">            will succeed. If `match_case` is True, then no KPI will be returned.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The KPI expression if found. If the search fails, either raises an exception or returns a dummy</span>
<span class="sd">            constant expression with 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">kpi</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="p">)):</span>
            <span class="n">kpi_name</span> <span class="o">=</span> <span class="n">kpi</span><span class="o">.</span><span class="n">name</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">kpi_name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">try_match</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">match_case</span><span class="p">:</span>
                    <span class="n">ok</span> <span class="o">=</span> <span class="n">kpi_name</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ok</span> <span class="o">=</span> <span class="n">kpi_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="o">&gt;=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">kpi</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">do_raise</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;Cannot find any KPI matching: &quot;</span><span class="si">{0:s}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_zero_expr</span><span class="p">()</span></div>

<div class="viewcode-block" id="Model.kpi_value_by_name"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.kpi_value_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">kpi_value_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">solution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">try_match</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">match_case</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a KPI value from a KPI name.</span>

<span class="sd">        This method fetches a KPI value from a string, using either exact naming or trying</span>
<span class="sd">        to match a substring of the KPI name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The string to be matched.</span>
<span class="sd">            solution: an optional solution. If not present, assume the model is solved</span>
<span class="sd">                and use the model solution.</span>
<span class="sd">            try_match (Bool): If True, returns KPI whose name is not equal to the</span>
<span class="sd">                argument, but contains it. Default is True.</span>
<span class="sd">            match_case: If True, looks for a case-exact match, else ignores case. Default is False.</span>
<span class="sd">            do_raise: If True, raise an exception when no matching KPI is found.</span>

<span class="sd">        Example:</span>
<span class="sd">            If the KPI name is &quot;Total CO2 Cost&quot; then fetching with argument `co2` and `match_case` to False</span>
<span class="sd">            will succeed. If `match_case` is True, then no KPI will be returned.</span>

<span class="sd">        Note:</span>
<span class="sd">            KPIs require a solution to be evaluated. This solution can be passed explicitly as a parameter,</span>
<span class="sd">            or the model is assumed to be solved with a valid solution.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The KPI value.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :class: `docplex.mp.solution.SolveSolution`</span>
<span class="sd">            :func: `new_solution`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kpi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kpi_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">try_match</span><span class="p">,</span> <span class="n">match_case</span><span class="o">=</span><span class="n">match_case</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="n">do_raise</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">kpi</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.add_kpi"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_kpi">[docs]</a>    <span class="k">def</span> <span class="nf">add_kpi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kpi_arg</span><span class="p">,</span> <span class="n">publish_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a Key Performance Indicator to the model.</span>

<span class="sd">        Key Performance Indicators (KPIs) are objects that can be evaluated after a solve().</span>
<span class="sd">        Typical use is with decision expressions, the evaluation of which return the expression&#39;s solution value.</span>

<span class="sd">        KPI values are displayed with the method :func:`report_kpis`.</span>

<span class="sd">        Args:</span>
<span class="sd">            kpi_arg:  Accepted arguments are either an expression,</span>
<span class="sd">                        a lambda function with two arguments (model + solution)</span>
<span class="sd">                        or an instance of a subclass of abstract class KPI.</span>

<span class="sd">            publish_name (string, optional): The published name of the KPI.</span>

<span class="sd">        Note:</span>
<span class="sd">            - If no publish_name is provided, DOcplex will try to access a</span>
<span class="sd">              &#39;name&#39; attribute of the argument; if none exists, it will use the</span>
<span class="sd">              string representation of the argument , as returned by `str()`.</span>
<span class="sd">            - expression KPIs are seperate from the model. In other terms,</span>
<span class="sd">              adding KPIs does not change the model (and matrix) being solved.</span>

<span class="sd">        Examples:</span>
<span class="sd">            `model.add_kpi(x+y+z, &quot;Total Profit&quot;)` adds the expression `(x+y+z)` as a KPI with the name &quot;Total Profit&quot;.</span>

<span class="sd">            `model.add_kpi(x+y+z)` adds the expression `(x+y+z)` as a KPI with</span>
<span class="sd">            the name &quot;x+y+z&quot;, assuming variables x,y,z have names &#39;x&#39;, &#39;y&#39;, &#39;z&#39; (resp.)</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly added KPI instance.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :class:`docplex.mp.kpi.KPI`,</span>
<span class="sd">            :class:`docplex.mp.kpi.DecisionKPI`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">publish_name</span><span class="p">,</span> <span class="n">accept_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.add_kpi(): &quot;</span><span class="p">)</span>
        <span class="n">new_kpi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_kpi</span><span class="p">(</span><span class="n">kpi_arg</span><span class="p">,</span> <span class="n">publish_name</span><span class="p">)</span>
        <span class="n">new_kpi_name</span> <span class="o">=</span> <span class="n">new_kpi</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">new_kpi_name</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">kp</span>  <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;Duplicate KPI name: </span><span class="se">\&quot;</span><span class="si">{0!s}</span><span class="se">\&quot;</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="n">new_kpi_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_kpi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_kpi</span></div>

<div class="viewcode-block" id="Model.remove_kpi"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.remove_kpi">[docs]</a>    <span class="k">def</span> <span class="nf">remove_kpi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kpi_arg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes a Key Performance Indicator from the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            kpi_arg:  A KPI instance that was previously added to the model. Accepts either a KPI object or a string.</span>
<span class="sd">                If passed a string, looks for a KPI with that name.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :func:`add_kpi`</span>
<span class="sd">            :class:`docplex.mp.kpi.KPI`,</span>
<span class="sd">            :class:`docplex.mp.kpi.DecisionKPI`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_string</span><span class="p">(</span><span class="n">kpi_arg</span><span class="p">):</span>
            <span class="n">kpi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kpi_by_name</span><span class="p">(</span><span class="n">kpi_arg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">kpi</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">kpi</span><span class="p">)</span>
                <span class="n">kpi</span><span class="o">.</span><span class="n">notify_removed</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">kp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">kp</span> <span class="ow">is</span> <span class="n">kpi_arg</span><span class="p">:</span>
                    <span class="n">kx</span> <span class="o">=</span> <span class="n">k</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">kx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">kx</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">removed_kpi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">kx</span><span class="p">)</span>
                <span class="n">removed_kpi</span><span class="o">.</span><span class="n">notify_removed</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Model.remove_kpi(): cannot interpret this either as a string or as a KPI: </span><span class="si">{0!r}</span><span class="s1"> - ignored&#39;</span><span class="p">,</span> <span class="n">kpi_arg</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.clear_kpis"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear_kpis">[docs]</a>    <span class="k">def</span> <span class="nf">clear_kpis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Clears all KPIs defined in the model.</span>

<span class="sd">        </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span> <span class="o">=</span> <span class="p">[]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_kpis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allkpis</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">progress_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the list of progress listeners.</span>

<span class="sd">        Deprecated: From version 2.10.x,</span>
<span class="sd">        :meth:`~docplex.mp.model.Model.iter_progress_listeners` should be used</span>
<span class="sd">        instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Model.progress_listeners is deprecated, use Model.iter_kpis instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_progress_listeners</span><span class="p">())</span>

<div class="viewcode-block" id="Model.add_progress_listener"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_progress_listener">[docs]</a>    <span class="k">def</span> <span class="nf">add_progress_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a progress listener to the model.</span>

<span class="sd">        A progress listener is a subclass of :class:~docplex.mp.ProgressListener:</span>

<span class="sd">        :param listener:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_progress_listener</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_progress_listener</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_add_progress_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>

<div class="viewcode-block" id="Model.remove_progress_listener"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.remove_progress_listener">[docs]</a>    <span class="k">def</span> <span class="nf">remove_progress_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Remove a progress listener from the model.</span>

<span class="sd">        :param listener:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_progress_listeners"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_progress_listeners">[docs]</a>    <span class="k">def</span> <span class="nf">iter_progress_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator on the progress listeners attached to the model.</span>

<span class="sd">        :return: an iterator.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_progress_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the number of progress listeners attached to the model.</span>

<span class="sd">        :return: an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="p">)</span>

<div class="viewcode-block" id="Model.clear_progress_listeners"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear_progress_listeners">[docs]</a>    <span class="k">def</span> <span class="nf">clear_progress_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Remove all progress listeners from the model.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span> <span class="o">=</span> <span class="p">[]</span></div>

    <span class="k">def</span> <span class="nf">_fire_start_solve_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">notify_start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_fire_end_solve_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">has_solution</span><span class="p">,</span> <span class="n">objective_value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">notify_end</span><span class="p">(</span><span class="n">has_solution</span><span class="p">,</span> <span class="n">objective_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fire_jobid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jobid</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">notify_jobid</span><span class="p">(</span><span class="n">jobid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fire_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_data</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_progress_listeners</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">notify_progress</span><span class="p">(</span><span class="n">progress_data</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">prettyprint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">ModelPrinterFactory</span><span class="o">.</span><span class="n">new_pretty_printer</span><span class="p">()</span><span class="o">.</span><span class="n">printModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>

    <span class="n">pprint</span> <span class="o">=</span> <span class="n">prettyprint</span>

    <span class="k">def</span> <span class="nf">pprint_as_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">oss</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
        <span class="n">ModelPrinterFactory</span><span class="o">.</span><span class="n">new_pretty_printer</span><span class="p">()</span><span class="o">.</span><span class="n">printModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">oss</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">oss</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>


<div class="viewcode-block" id="Model.clone"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clone">[docs]</a>    <span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">clone_kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Makes a deep copy of the model, possibly with a new name.</span>
<span class="sd">        Decision variables, constraints, and objective are copied.</span>

<span class="sd">        Args:</span>
<span class="sd">            new_name (string): The new name to use. If None is provided, returns a &quot;Copy of xxx&quot; where xxx is the original model name.</span>

<span class="sd">        :returns: A new model.</span>

<span class="sd">        :rtype: :class:`docplex.mp.model.Model`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_name</span><span class="o">=</span><span class="n">new_name</span><span class="p">,</span> <span class="o">**</span><span class="n">clone_kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">copy_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">removed_cts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lp_relax</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">observed_vars</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">new_kwargs</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">lp_relax_fail</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;LP relaxation cannot handle </span><span class="si">{0}</span><span class="s2">, found: </span><span class="si">{1!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

        <span class="c1"># INTERNAL</span>
        <span class="n">actual_copy_name</span> <span class="o">=</span> <span class="n">copy_name</span> <span class="ow">or</span> <span class="s2">&quot;Copy of </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="c1"># copy kwargs</span>
        <span class="n">copy_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_kwargs</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">copy_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">new_kwargs</span><span class="p">)</span>

        <span class="n">copy_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="c1"># pass copy of initial context</span>
        <span class="c1"># plus override kwargs (e.g. log_output)</span>
        <span class="n">copy_model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">actual_copy_name</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">copy_context</span><span class="p">,</span> <span class="o">**</span><span class="n">copy_kwargs</span><span class="p">)</span>

        <span class="c1"># clone variable containers</span>
        <span class="n">ctn_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ctn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_var_containers</span><span class="p">():</span>
            <span class="n">copied_ctn</span> <span class="o">=</span> <span class="n">ctn</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_model</span><span class="p">)</span>
            <span class="n">copy_model</span><span class="o">.</span><span class="n">_add_var_container</span><span class="p">(</span><span class="n">copied_ctn</span><span class="p">)</span>
            <span class="n">ctn_map</span><span class="p">[</span><span class="n">ctn</span><span class="p">]</span> <span class="o">=</span> <span class="n">copied_ctn</span>

        <span class="c1"># clone variables</span>
        <span class="n">var_mapping</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">ret_observed_vars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">continuous</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">continuous_vartype</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_generated</span><span class="p">():</span>
                <span class="n">copied_type</span> <span class="o">=</span> <span class="n">continuous</span> <span class="k">if</span> <span class="n">lp_relax</span> <span class="k">else</span> <span class="n">v</span><span class="o">.</span><span class="n">vartype</span>
                <span class="n">copied_var</span> <span class="o">=</span> <span class="n">copy_model</span><span class="o">.</span><span class="n">_var</span><span class="p">(</span><span class="n">copied_type</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">lb</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">ub</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="n">var_ctn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">_container</span>
                <span class="k">if</span> <span class="n">var_ctn</span><span class="p">:</span>
                    <span class="n">copied_var</span><span class="o">.</span><span class="n">_container</span> <span class="o">=</span> <span class="n">ctn_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">var_ctn</span><span class="p">)</span>
                <span class="n">var_mapping</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">copied_var</span>
                <span class="k">if</span> <span class="n">observed_vars</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">observed_vars</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="n">o</span><span class="p">:</span>
                            <span class="n">ret_observed_vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>


        <span class="c1"># clone PWL functions and add them to var_mapping</span>
        <span class="k">for</span> <span class="n">pwl_func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_pwl_functions</span><span class="p">():</span>
            <span class="n">copied_pwl_func</span> <span class="o">=</span> <span class="n">pwl_func</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_model</span><span class="p">,</span> <span class="n">var_mapping</span><span class="p">)</span>
            <span class="n">var_mapping</span><span class="p">[</span><span class="n">pwl_func</span><span class="p">]</span> <span class="o">=</span> <span class="n">copied_pwl_func</span>

        <span class="c1"># copy constraints</span>
        <span class="n">setof_removed_cts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">removed_cts</span><span class="p">)</span> <span class="k">if</span> <span class="n">removed_cts</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="n">linear_cts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_constraints</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ct</span><span class="o">.</span><span class="n">is_generated</span><span class="p">()</span> <span class="ow">and</span> <span class="n">ct</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">setof_removed_cts</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">PwlConstraint</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">lp_relax</span><span class="p">:</span>
                        <span class="n">lp_relax_fail</span><span class="p">(</span><span class="s2">&quot;piecewise linear constraints&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="k">if</span> <span class="n">ct</span><span class="o">.</span><span class="n">is_linear</span><span class="p">():</span>
                    <span class="n">linear_cts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_model</span><span class="p">,</span> <span class="n">var_mapping</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">ct</span><span class="o">.</span><span class="n">is_logical</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">lp_relax</span><span class="p">:</span>
                        <span class="n">lp_relax_fail</span><span class="p">(</span><span class="s2">&quot;logical constraints&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">linear_cts</span><span class="p">:</span>
                            <span class="c1"># add stored linear cts</span>
                            <span class="n">copy_model</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(</span><span class="n">linear_cts</span><span class="p">)</span>
                            <span class="n">linear_cts</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="n">copy_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_model</span><span class="p">,</span> <span class="n">var_mapping</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">linear_cts</span><span class="p">:</span>
            <span class="n">copy_model</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(</span><span class="n">linear_cts</span><span class="p">)</span>

        <span class="c1"># clone objective</span>
        <span class="n">copy_model</span><span class="o">.</span><span class="n">set_objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_sense</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_multi_objective</span><span class="p">():</span>
            <span class="n">multi_objective</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span>
            <span class="n">exprs</span> <span class="o">=</span> <span class="n">multi_objective</span><span class="o">.</span><span class="n">exprs</span>
            <span class="n">nb_exprs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">exprs</span><span class="p">)</span>
            <span class="n">copied_exprs</span> <span class="o">=</span> <span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_model</span><span class="p">,</span> <span class="n">var_mapping</span><span class="p">)</span> <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">]</span>
            <span class="n">copy_model</span><span class="o">.</span><span class="n">set_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_sense</span><span class="p">,</span>
                                           <span class="n">exprs</span><span class="o">=</span><span class="n">copied_exprs</span><span class="p">,</span>
                                           <span class="n">priorities</span><span class="o">=</span><span class="n">multi_objective</span><span class="o">.</span><span class="n">priorities</span><span class="p">,</span>
                                           <span class="n">weights</span><span class="o">=</span><span class="n">multi_objective</span><span class="o">.</span><span class="n">weights</span><span class="p">,</span>
                                           <span class="n">abstols</span><span class="o">=</span><span class="n">MultiObjective</span><span class="o">.</span><span class="n">as_optional_sequence</span><span class="p">(</span><span class="n">multi_objective</span><span class="o">.</span><span class="n">abstols</span><span class="p">,</span>
                                                                                       <span class="n">nb_exprs</span><span class="p">),</span>
                                           <span class="n">reltols</span><span class="o">=</span><span class="n">MultiObjective</span><span class="o">.</span><span class="n">as_optional_sequence</span><span class="p">(</span><span class="n">multi_objective</span><span class="o">.</span><span class="n">reltols</span><span class="p">,</span>
                                                                                       <span class="n">nb_exprs</span><span class="p">),</span>
                                           <span class="n">names</span><span class="o">=</span><span class="n">multi_objective</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">copy_model</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objective_sense</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objective_expr</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_model</span><span class="p">,</span> <span class="n">var_mapping</span><span class="p">))</span>

        <span class="c1"># clone kpis</span>
        <span class="k">for</span> <span class="n">kpi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_kpis</span><span class="p">():</span>
            <span class="n">copy_model</span><span class="o">.</span><span class="n">add_kpi</span><span class="p">(</span><span class="n">kpi</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_model</span><span class="p">,</span> <span class="n">var_mapping</span><span class="p">))</span>

        <span class="c1"># clone sos</span>
        <span class="k">if</span> <span class="n">lp_relax</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">sos</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_sos</span><span class="p">():</span>
                <span class="c1"># generate sos as a constraint</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;LP relaxation translates SOS as a constraint: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sos</span><span class="p">)</span>
                <span class="n">sos_lhs</span> <span class="o">=</span> <span class="n">copy_model</span><span class="o">.</span><span class="n">sum_vars</span><span class="p">(</span><span class="n">var_mapping</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">sos</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">())</span>
                <span class="n">sos_rhs</span> <span class="o">=</span> <span class="n">sos</span><span class="o">.</span><span class="n">sos_type</span><span class="o">.</span><span class="n">value</span>
                <span class="n">copy_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sos_lhs</span> <span class="o">==</span> <span class="n">sos_rhs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">sos</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_sos</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">sos</span><span class="o">.</span><span class="n">is_generated</span><span class="p">():</span>
                    <span class="n">copy_model</span><span class="o">.</span><span class="n">_create_engine_sos</span><span class="p">(</span><span class="n">sos</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">copy_model</span><span class="p">,</span> <span class="n">var_mapping</span><span class="p">))</span>

        <span class="c1"># parameters</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">iter_params</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">is_nondefault</span><span class="p">():</span>
                <span class="c1"># copy value to new parames</span>
                <span class="n">newp</span> <span class="o">=</span> <span class="n">copy_model</span><span class="o">.</span><span class="n">get_parameter_from_id</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cpx_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">newp</span><span class="p">:</span>
                    <span class="n">newp</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>


        <span class="k">if</span> <span class="n">observed_vars</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">copy_model</span><span class="p">,</span> <span class="n">ret_observed_vars</span>

        <span class="k">return</span> <span class="n">copy_model</span>

    <span class="k">def</span> <span class="nf">refresh_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">do_setup</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># compatibility with AbtractModel</span>
        <span class="k">pass</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># compatibility with AbtractModel</span>
        <span class="k">pass</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">def</span> <span class="nf">_sync_constraint_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cscope</span><span class="p">):</span>
        <span class="c1"># INTERNAL: check only when CPLEX is present.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">check_sync_indices</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">check_constraint_indices</span><span class="p">(</span><span class="n">cscope</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">cscope</span><span class="o">.</span><span class="n">cplex_scope</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_sync_var_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">check_sync_indices</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">check_var_indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_variables</span><span class="p">())</span>

<div class="viewcode-block" id="Model.end"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.end">[docs]</a>    <span class="k">def</span> <span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Terminates a model instance.</span>

<span class="sd">        Since this method destroys the objects associated with the model, you must not use the model</span>
<span class="sd">        after you call this member function.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clear_internal</span><span class="p">(</span><span class="n">terminate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the root parameter group of the model.</span>

<span class="sd">        The root parameter group models the parameter hierarchy.</span>
<span class="sd">        It is the way to access any CPLEX parameter and get or set its value.</span>

<span class="sd">        Examples:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">               model.parameters.mip.tolerances.mipgap</span>

<span class="sd">            Returns the parameter itself, an instance of the `Parameter` class.</span>

<span class="sd">            To get the value of the parameter, use the `get()` method, as in:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">               model.parameters.mip.tolerances.mipgap.get()</span>
<span class="sd">               &gt;&gt;&gt; 0.0001</span>

<span class="sd">            To change the value of the parameter, use a standard Python assignment:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">               model.parameters.mip.tolerances.mipgap = 0.05</span>
<span class="sd">               model.parameters.mip.tolerances.mipgap.get()</span>
<span class="sd">              &gt;&gt;&gt; 0.05</span>

<span class="sd">            Assignment is equivalent to the `set()` method:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">               model.parameters.mip.tolerances.mipgap.set(0.02)</span>
<span class="sd">               model.parameters.mip.tolerances.mipgap.get()</span>
<span class="sd">               &gt;&gt;&gt; 0.02</span>

<span class="sd">        Returns:</span>
<span class="sd">            The root parameter group, an instance of the `ParameterGroup` class.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">context_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">cplex_parameters</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synced_params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sync_params</span><span class="p">(</span><span class="n">context_params</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_synced_params</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">context_params</span>

<div class="viewcode-block" id="Model.get_parameter_from_id"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.get_parameter_from_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_parameter_from_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter_cpx_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Finds a parameter from a CPLEX id code.</span>

<span class="sd">        Args:</span>
<span class="sd">            parameter_cpx_id: A CPLEX parameter id (positive integer, for example, 2009 is mipgap).</span>

<span class="sd">        :returns: An instance of :class:`docplex.mp.params.parameters.Parameter` if found, else None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">parameter_cpx_id</span> <span class="o">&gt;=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">generate_params</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">cpx_id</span> <span class="o">==</span> <span class="n">parameter_cpx_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">p</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">get_engine_parameter_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_parameters_to_engine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_one_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">param</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_apply_parameters_to_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters_to_use</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="k">if</span> <span class="n">parameters_to_use</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">self_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">parameters_to_use</span><span class="p">:</span>
                <span class="n">self_engine</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">param</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_cplex_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">caller</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">self_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_engine</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">self_engine</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s1">&#39;cplex_local&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{1}</span><span class="s2"> is only for Cplex, engine is &#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">self_engine</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">caller</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">self_engine</span>

    <span class="k">def</span> <span class="nf">set_hidden_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter_id</span><span class="p">,</span> <span class="n">param_value</span><span class="p">):</span>
        <span class="n">self_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_cplex_engine</span><span class="p">(</span><span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.set_hidden_parameter&quot;</span><span class="p">)</span>
        <span class="n">self_engine</span><span class="o">.</span><span class="n">set_parameter_from_id</span><span class="p">(</span><span class="n">parameter_id</span><span class="p">,</span> <span class="n">param_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_hidden_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter_id</span><span class="p">):</span>
        <span class="n">self_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_cplex_engine</span><span class="p">(</span><span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.get_hidden_parameter&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self_engine</span><span class="o">.</span><span class="n">get_parameter_from_id</span><span class="p">(</span><span class="n">parameter_id</span><span class="p">)</span>


    <span class="c1"># with protocol</span>
    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">atype</span><span class="p">,</span> <span class="n">avalue</span><span class="p">,</span> <span class="n">atraceback</span><span class="p">):</span>
        <span class="c1"># terminate the model upon exiting a &#39;with&#39; block.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="c1"># implements the &quot;+=&quot; dialect a la PulP</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">_resync</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">resync_whole_model</span><span class="p">()</span>

<div class="viewcode-block" id="Model.add_sos1"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_sos1">[docs]</a>    <span class="k">def</span> <span class="nf">add_sos1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Adds  an SOS of type 1 to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            dvars: The variables in the special ordered set.</span>
<span class="sd">                This method only accepts ordered sequences of variables or iterators.</span>
<span class="sd">                Unordered iterables (e.g. dictionaries or sets) are not accepted.</span>

<span class="sd">            name: An optional name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly added SOS.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_sos</span><span class="p">(</span><span class="n">dvars</span><span class="p">,</span> <span class="n">sos_arg</span><span class="o">=</span><span class="n">SOSType</span><span class="o">.</span><span class="n">SOS1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.add_sos2"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_sos2">[docs]</a>    <span class="k">def</span> <span class="nf">add_sos2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Adds  an SOS of type 2 to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">           dvars: The variables in the specially ordered set.</span>
<span class="sd">                This method only accepts ordered sequences of variables or iterators.</span>
<span class="sd">                Unordered iterables (e.g. dictionaries or sets) are not accepted.</span>
<span class="sd">           name: An optional name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly added SOS.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_sos</span><span class="p">(</span><span class="n">dvars</span><span class="p">,</span> <span class="n">sos_arg</span><span class="o">=</span><span class="n">SOSType</span><span class="o">.</span><span class="n">SOS2</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.add_sos"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_sos">[docs]</a>    <span class="k">def</span> <span class="nf">add_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">,</span> <span class="n">sos_arg</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Adds  an SOS to the model.</span>

<span class="sd">        Args:</span>
<span class="sd">           sos_arg: The SOS type. Valid values are numerical (1 and 2) or enumerated (`SOSType.SOS1` and</span>
<span class="sd">              `SOSType.SOS2`).</span>
<span class="sd">           dvars: The variables in the special ordered set.</span>
<span class="sd">                This method only accepts ordered sequences of variables or iterators,</span>
<span class="sd">                e.g. lists, numpy arrays, pandas Series.</span>
<span class="sd">                Unordered iterables (e.g. dictionaries or sets) are not accepted.</span>
<span class="sd">           name: An optional name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly added SOS.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">sos_type</span> <span class="o">=</span> <span class="n">SOSType</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">sos_arg</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Model.add_</span><span class="si">%s</span><span class="s1">() expects an ordered sequence (or iterator) of variables&#39;</span> <span class="o">%</span> <span class="n">sos_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">check_ordered_sequence</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">dvars</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">var_seq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_var_seq</span><span class="p">(</span><span class="n">dvars</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.add_sos&quot;</span><span class="p">)</span>
        <span class="n">var_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">var_seq</span><span class="p">)</span>  <span class="c1"># we need len here.</span>
        <span class="n">nb_vars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">var_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nb_vars</span> <span class="o">&lt;</span> <span class="n">sos_type</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;A </span><span class="si">{0:s}</span><span class="s2"> variable set must contain at least </span><span class="si">{1:d}</span><span class="s2"> variables, got: </span><span class="si">{2:d}</span><span class="s2">&quot;</span><span class="p">,</span>
                       <span class="n">sos_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">sos_type</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">nb_vars</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">nb_vars</span> <span class="o">==</span> <span class="n">sos_type</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0:s}</span><span class="s2"> variable is trivial, conrtains </span><span class="si">{1}</span><span class="s2"> variable(s): all variables set to 1&quot;</span><span class="p">,</span>
                       <span class="n">sos_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">sos_type</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_sos</span><span class="p">(</span><span class="n">dvars</span><span class="p">,</span> <span class="n">sos_type</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_add_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dvars</span><span class="p">,</span> <span class="n">sos_type</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">new_sos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_sos</span><span class="p">(</span><span class="n">dvars</span><span class="p">,</span> <span class="n">sos_type</span><span class="o">=</span><span class="n">sos_type</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="n">sos_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">create_sos</span><span class="p">(</span><span class="n">new_sos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_sos</span><span class="p">(</span><span class="n">new_sos</span><span class="p">)</span>
        <span class="n">new_sos</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">sos_index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_sos</span>

    <span class="k">def</span> <span class="nf">_create_engine_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_sos</span><span class="p">):</span>
        <span class="c1"># internal</span>
        <span class="n">sos_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">create_sos</span><span class="p">(</span><span class="n">new_sos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_sos</span><span class="p">(</span><span class="n">new_sos</span><span class="p">)</span>
        <span class="n">new_sos</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">sos_index</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_register_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_sos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allsos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_sos</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_sos_by_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sos_idx</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allsos</span><span class="p">[</span><span class="n">sos_idx</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="Model.iter_sos"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_sos">[docs]</a>    <span class="k">def</span> <span class="nf">iter_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Iterates over all SOS sets in the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allsos</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; This property returns the total number of SOS sets in the model.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allsos</span><span class="p">)</span>

<div class="viewcode-block" id="Model.clear_sos"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear_sos">[docs]</a>    <span class="k">def</span> <span class="nf">clear_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Clears all SOS sets in the model.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allsos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">clear_all_sos</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_generate_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sos_type</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">for</span> <span class="n">sos_set</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_sos</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">sos_set</span><span class="o">.</span><span class="n">sos_type</span> <span class="o">==</span> <span class="n">sos_type</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">sos_set</span>

<div class="viewcode-block" id="Model.iter_sos1"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_sos1">[docs]</a>    <span class="k">def</span> <span class="nf">iter_sos1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Iterates over all SOS1 sets in the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_sos</span><span class="p">(</span><span class="n">SOSType</span><span class="o">.</span><span class="n">SOS1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.iter_sos2"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_sos2">[docs]</a>    <span class="k">def</span> <span class="nf">iter_sos2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Iterates over all SOS2 sets in the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_sos</span><span class="p">(</span><span class="n">SOSType</span><span class="o">.</span><span class="n">SOS2</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_sos1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; This property returns the total number of SOS1 sets in the model.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_sos1</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_sos2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; This property returns the total number of SOS2 sets in the model.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_sos2</span><span class="p">())</span>

<div class="viewcode-block" id="Model.piecewise"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.piecewise">[docs]</a>    <span class="k">def</span> <span class="nf">piecewise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preslope</span><span class="p">,</span> <span class="n">breaksxy</span><span class="p">,</span> <span class="n">postslope</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Adds a piecewise linear function (PWL) to the model, using breakpoints to specify the function.</span>

<span class="sd">        Args:</span>
<span class="sd">            preslope: Before the first segment of the PWL function there is a half-line; its slope is specified by</span>
<span class="sd">                        this argument.</span>
<span class="sd">            breaksxy: A list `(x[i], y[i])` of coordinate pairs defining segments of the PWL function.</span>
<span class="sd">            postslope: After the last segment of the the PWL function there is a half-line; its slope is specified by</span>
<span class="sd">                        this argument.</span>
<span class="sd">            name: An optional name.</span>

<span class="sd">        Example::</span>

<span class="sd">            # Creates a piecewise linear function whose value if &#39;0&#39; if the `x_value` is `0`, with a slope</span>
<span class="sd">            # of -1 for negative values and +1 for positive value</span>
<span class="sd">            model = Model(&#39;my model&#39;)</span>
<span class="sd">            model.piecewise(-1, [(0, 0)], 1)</span>

<span class="sd">            # Note that a PWL function may be discontinuous. Here is an example of a step function:</span>
<span class="sd">            model.piecewise(0, [(0, 0), (0, 1)], 0)</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly added piecewise linear function.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">breaksxy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s2">&quot;argument &#39;breaksxy&#39; must be defined&quot;</span><span class="p">)</span>

        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_num_nan_inf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preslope</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.piecewise.preslope&#39;</span><span class="p">)</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_num_nan_inf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">postslope</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.piecewise.postslope&#39;</span><span class="p">)</span>
        <span class="n">PwlFunction</span><span class="o">.</span><span class="n">check_list_pair_breaksxy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="p">,</span> <span class="n">breaksxy</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_piecewise</span><span class="p">(</span><span class="n">PwlFunction</span><span class="o">.</span><span class="n">_PwlAsBreaks</span><span class="p">(</span><span class="n">preslope</span><span class="p">,</span> <span class="n">breaksxy</span><span class="p">,</span> <span class="n">postslope</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.piecewise_as_slopes"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.piecewise_as_slopes">[docs]</a>    <span class="k">def</span> <span class="nf">piecewise_as_slopes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slopebreaksx</span><span class="p">,</span> <span class="n">lastslope</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Adds a piecewise linear function (PWL) to the model, using a list of slopes and x-coordinates.</span>

<span class="sd">        Args:</span>
<span class="sd">            slopebreaksx: A list of tuple pairs `(slope[i], breakx[i])` of slopes and x-coordinates defining the slope of</span>
<span class="sd">                        the piecewise function between the previous breakpoint (or minus infinity if there is none)</span>
<span class="sd">                        and the breakpoint with x-coordinate `breakx[i]`.</span>
<span class="sd">                        For representing a discontinuity, two consecutive pairs with the same value for `breakx[i]`</span>
<span class="sd">                        are used. The value of `slope[i]` in the second pair is the discontinuity gap.</span>
<span class="sd">            lastslope: The slope after the last specified breakpoint.</span>
<span class="sd">            anchor: The coordinates of the &#39;anchor point&#39;. The purpose of the anchor point is to ground the piecewise</span>
<span class="sd">                        linear function specified by the list of slopes and breakpoints.</span>
<span class="sd">            name: An optional name.</span>
<span class="sd">        Example::</span>

<span class="sd">            # Creates a piecewise linear function whose value if &#39;0&#39; if the `x_value` is `0`, with a slope</span>
<span class="sd">            # of -1 for negative values and +1 for positive value</span>
<span class="sd">            model = Model(&#39;my model&#39;)</span>
<span class="sd">            model.piecewise_as_slopes([(-1, 0)], 1, (0, 0))</span>

<span class="sd">            # Here is the definition of a step function to illustrate the case of a discontinuous PWL function:</span>
<span class="sd">            model.piecewise_as_slopes([(0, 0), (0, 1)], 0, (0, 0))</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly added piecewise linear function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">typecheck_num_nan_inf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lastslope</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.piecewise_as_slopes.lastslope&quot;</span><span class="p">)</span>
        <span class="n">StaticTypeChecker</span><span class="o">.</span><span class="n">check_number_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s2">&quot;Model.piecewise_as_slopes.anchor&quot;</span><span class="p">)</span>
        <span class="n">PwlFunction</span><span class="o">.</span><span class="n">check_list_pair_slope_breakx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slopebreaksx</span><span class="p">,</span> <span class="n">anchor</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_piecewise</span><span class="p">(</span><span class="n">PwlFunction</span><span class="o">.</span><span class="n">_PwlAsSlopes</span><span class="p">(</span><span class="n">slopebreaksx</span><span class="p">,</span> <span class="n">lastslope</span><span class="p">,</span> <span class="n">anchor</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">add_piecewise_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">pwlf</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_continuous_var</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_continuous_var</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_pwl_function</span><span class="p">(</span><span class="n">pwlf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">y</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;Piecewise-linear constraint requires two different variables, only one wa passed: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>

        <span class="n">pwl_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_pwl_expr</span><span class="p">(</span><span class="n">pwlf</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">yvar</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">resolve</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># will be resolved later</span>
        <span class="n">pwl_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_pwl_constraint</span><span class="p">(</span><span class="n">pwl_expr</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_pwl_constraint_internal</span><span class="p">(</span><span class="n">pwl_ct</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_piecewise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pwl_def</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">pwl_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_piecewise</span><span class="p">(</span><span class="n">pwl_def</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allpwlfuncs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pwl_func</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pwl_func</span>

    <span class="k">def</span> <span class="nf">_add_pwl_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pwl_func</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">yvar</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resolve</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">pwl_func_usage_counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwl_counter</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pwl_func</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">pwl_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lfactory</span><span class="o">.</span><span class="n">new_pwl_expr</span><span class="p">(</span><span class="n">pwl_func</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">pwl_func_usage_counter</span><span class="p">,</span> <span class="n">y_var</span><span class="o">=</span><span class="n">yvar</span><span class="p">,</span> <span class="n">resolve</span><span class="o">=</span><span class="n">resolve</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pwl_expr</span>

    <span class="k">def</span> <span class="nf">_add_pwl_constraint_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pwlct</span><span class="p">):</span>
        <span class="n">ct_engine_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">create_pwl_constraint</span><span class="p">(</span><span class="n">pwlct</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_one_pwl_constraint</span><span class="p">(</span><span class="n">pwlct</span><span class="p">,</span> <span class="n">ct_engine_index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pwlct</span>

    <span class="k">def</span> <span class="nf">_register_one_pwl_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_pwl_ct</span><span class="p">,</span> <span class="n">ct_index</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__notify_new_model_object</span><span class="p">(</span>
            <span class="s2">&quot;pwl&quot;</span><span class="p">,</span> <span class="n">new_pwl_ct</span><span class="p">,</span> <span class="n">ct_index</span><span class="p">,</span> <span class="n">mobj_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">idx_scope</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pwl_scope</span><span class="p">,</span> <span class="n">is_name_safe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Maintain the number of constraints associated to each piecewise function definition.</span>
        <span class="c1"># This counter is used when naming PWL constraints.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwl_counter</span><span class="p">[</span><span class="n">new_pwl_ct</span><span class="o">.</span><span class="n">pwl_func</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pwl_ct</span><span class="o">.</span><span class="n">usage_counter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__allcts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_pwl_ct</span><span class="p">)</span>

<div class="viewcode-block" id="Model.iter_pwl_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_pwl_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_pwl_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterates over all PWL constraints in the model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterator object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gen_constraints_with_type</span><span class="p">(</span><span class="n">PwlConstraint</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_pwl_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This property returns the total number of PWL constraints in the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_constraints_with_type</span><span class="p">(</span><span class="n">PwlConstraint</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_ensure_benders_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span>

    <span class="k">def</span> <span class="nf">set_benders_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">group</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">group</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">self_benders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span>
            <span class="k">if</span> <span class="n">self_benders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">self_benders</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">self_benders</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">typecheck_int</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">accept_negative</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.set_benders_annotation&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_benders_annotations</span><span class="p">()[</span><span class="n">obj</span><span class="p">]</span> <span class="o">=</span> <span class="n">group</span>

    <span class="k">def</span> <span class="nf">remove_benders_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">self_benders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span>
        <span class="k">if</span> <span class="n">self_benders</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">self_benders</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_benders_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">self_benders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span>
        <span class="k">return</span> <span class="n">self_benders</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">if</span> <span class="n">self_benders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">iter_benders_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">self_benders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span>
        <span class="k">return</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">self_benders</span><span class="p">)</span> <span class="k">if</span> <span class="n">self_benders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">iter</span><span class="p">([])</span>

    <span class="k">def</span> <span class="nf">clear_benders_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_annotations_by_scope</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">defaultdict</span>
        <span class="n">annotated_by_scope</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_benders_annotations</span><span class="p">():</span>
            <span class="n">annotated_by_scope</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">cplex_scope</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">obj</span><span class="p">,</span> <span class="n">group</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">annotated_by_scope</span>

    <span class="k">def</span> <span class="nf">has_benders_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">self_benders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benders_annotations</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">self_benders</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_annotation_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">Counter</span>
        <span class="n">annotated_by_scope</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">obj</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_benders_annotations</span><span class="p">():</span>
            <span class="n">annotated_by_scope</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">cplex_scope</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">annotated_by_scope</span>

    <span class="k">def</span> <span class="nf">register_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cb_type</span><span class="p">):</span>
        <span class="c1"># Registers a callback with the model.</span>
        <span class="c1">#</span>
        <span class="c1"># Assumes the type has a `model` setter property. Use a subclass of `ModelCallbackMixin` mixin class</span>
        <span class="c1"># as a parent class to ensure this.</span>
        <span class="c1">#</span>
        <span class="c1"># :param cb_type: a callback type; the type must be a subtype of some cplex callback type</span>
        <span class="c1">#</span>
        <span class="c1"># :return: an instance of the callback</span>
        <span class="c1">#</span>
        <span class="c1"># See Also:</span>
        <span class="c1">#     :class: `docplex.mp.callbacks.ModelcallbackMixin`</span>
        <span class="n">cplex_cb</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">register_callback</span><span class="p">(</span><span class="n">cb_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cplex_cb</span><span class="p">:</span>
            <span class="n">cplex_cb</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">return</span> <span class="n">cplex_cb</span>

    <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objective_expr</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_constraints</span><span class="p">():</span>
            <span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_constraint_priority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraint_priority_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>  <span class="c1"># return None if not found</span>

    <span class="k">def</span> <span class="nf">set_constraint_priority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">prio</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_constraint_priority_dict</span><span class="p">[</span><span class="n">ct</span><span class="p">]</span> <span class="o">=</span> <span class="n">prio</span>

    <span class="k">def</span> <span class="nf">_extend_constraint_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collector</span><span class="p">,</span> <span class="n">extra_cts</span><span class="p">,</span> <span class="n">ctnames</span><span class="p">,</span> <span class="n">caller</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span>
        <span class="n">new_cts</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_constraint_seq</span><span class="p">(</span><span class="n">extra_cts</span><span class="p">,</span> <span class="n">check_linear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_range</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ctnames</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_iterable</span><span class="p">(</span><span class="n">ctnames</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ct</span><span class="p">,</span> <span class="n">ctn</span> <span class="ow">in</span> <span class="n">izip2_filled</span><span class="p">(</span><span class="n">new_cts</span><span class="p">,</span> <span class="n">ctnames</span><span class="p">):</span>
                <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_string</span><span class="p">(</span><span class="n">ctn</span><span class="p">,</span> <span class="n">accept_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ctn</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_register_ct_name</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">ctn</span><span class="p">,</span> <span class="n">checker</span><span class="p">)</span>

        <span class="c1"># extend</span>
        <span class="n">lncts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">new_cts</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">nc</span> <span class="ow">in</span> <span class="n">lncts</span><span class="p">:</span>
            <span class="n">checker</span><span class="o">.</span><span class="n">typecheck_ct_not_added</span><span class="p">(</span><span class="n">nc</span><span class="p">,</span> <span class="n">do_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="n">caller</span><span class="p">)</span>

        <span class="n">collector</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new_cts</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_cts</span>

<div class="viewcode-block" id="Model.add_lazy_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_lazy_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">add_lazy_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lazy_cts</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds lazy constraints to the problem.</span>

<span class="sd">        This method expects an iterable returning linear constraints (ranges are not accepted).</span>

<span class="sd">        :param lazy_cts: an iterable returning linear constraints (not ranges)</span>
<span class="sd">        :param names: an optional iterable returning strings, used to set names for lazy constraints.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_lazy_cts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extend_constraint_section</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lazy_constraints</span><span class="p">,</span> <span class="n">lazy_cts</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.add_lazy_constraints&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">nc</span> <span class="ow">in</span> <span class="n">new_lazy_cts</span><span class="p">:</span>
            <span class="n">nc</span><span class="o">.</span><span class="n">notify_used_as_lazy_constraint</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">add_lazy_constraints</span><span class="p">(</span><span class="n">new_lazy_cts</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.add_lazy_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_lazy_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">add_lazy_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lazy_ct</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds one lazy constraint to the problem.</span>

<span class="sd">        This method expects a linear constraint.</span>

<span class="sd">        :param lazy_ct: a linear constraints (ranges are not accepted)</span>
<span class="sd">        :param name: an optional string, used to set the name of the lazy constraint.</span>

<span class="sd">        *New in version 2.10*</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_lazy_constraints</span><span class="p">((</span><span class="n">lazy_ct</span><span class="p">,),</span> <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="n">name</span><span class="p">,))</span></div>

<div class="viewcode-block" id="Model.clear_lazy_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear_lazy_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">clear_lazy_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears all lazy constraints from the model.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_lazy_cts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_constraints</span>
        <span class="k">for</span> <span class="n">lz</span> <span class="ow">in</span> <span class="n">old_lazy_cts</span><span class="p">:</span>
            <span class="n">lz</span><span class="o">.</span><span class="n">notify_unused_as_lazy_constraint</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_constraints</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">clear_lazy_constraints</span><span class="p">()</span></div>

<div class="viewcode-block" id="Model.iter_lazy_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_lazy_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_lazy_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator on the model&#39;s lazy constraints</span>

<span class="sd">        :return: an iterator on lazy constraints.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lazy_constraints</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_lazy_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of lazy constraints present in the model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lazy_constraints</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_is_lazy_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lineart_ct</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">lc</span> <span class="ow">is</span> <span class="n">lineart_ct</span> <span class="k">for</span> <span class="n">lc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_lazy_constraints</span><span class="p">())</span>

<div class="viewcode-block" id="Model.add_user_cut_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_user_cut_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">add_user_cut_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cut_cts</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds user cut constraints to the problem.</span>

<span class="sd">        This method expects an iterable returning linear constraints (ranges are not accepted).</span>

<span class="sd">        :param cut_cts: an iterable returning linear constraints (not ranges)</span>
<span class="sd">        :param names: an optional iterable returning strings, used to set names for user cut constraints.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_user_cuts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extend_constraint_section</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_cuts</span><span class="p">,</span> <span class="n">cut_cts</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;Model.add_user_cut_constraints&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">nc</span> <span class="ow">in</span> <span class="n">new_user_cuts</span><span class="p">:</span>
            <span class="n">nc</span><span class="o">.</span><span class="n">notify_used_as_user_cut</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">add_user_cuts</span><span class="p">(</span><span class="n">new_user_cuts</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.add_user_cut_constraint"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.add_user_cut_constraint">[docs]</a>    <span class="k">def</span> <span class="nf">add_user_cut_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cut_ct</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds one user cut constraint to the problem.</span>

<span class="sd">        This method expects a linear constraint.</span>

<span class="sd">        :param cut_ct: a linear constraints (ranges are not accepted)</span>
<span class="sd">        :param name: an optional string, used to set the name for the cut constraint.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_user_cut_constraints</span><span class="p">((</span><span class="n">cut_ct</span><span class="p">,),</span> <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="n">name</span><span class="p">,))</span></div>

<div class="viewcode-block" id="Model.clear_user_cut_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.clear_user_cut_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">clear_user_cut_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears all user cut ocnstraints from the model.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_user_cuts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_cuts</span>
        <span class="k">for</span> <span class="n">uc</span> <span class="ow">in</span> <span class="n">old_user_cuts</span><span class="p">:</span>
            <span class="n">uc</span><span class="o">.</span><span class="n">notify_unused_as_user_cut</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_user_cuts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">clear_user_cuts</span><span class="p">()</span></div>

<div class="viewcode-block" id="Model.iter_user_cut_constraints"><a class="viewcode-back" href="../../../docplex.mp.model.html#docplex.mp.model.Model.iter_user_cut_constraints">[docs]</a>    <span class="k">def</span> <span class="nf">iter_user_cut_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator on the model&#39;s user cut constraints</span>

<span class="sd">        :return: an iterator on user cut constraints.</span>

<span class="sd">        *New in version 2.10*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_cuts</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number_of_user_cut_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of user cut constraints present in the model</span>

<span class="sd">        *New in version 2.10*</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_cuts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_is_user_cut_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lineart_ct</span><span class="p">):</span>
        <span class="c1"># INTERNAL</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">lc</span> <span class="ow">is</span> <span class="n">lineart_ct</span> <span class="k">for</span> <span class="n">lc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_user_cut_constraints</span><span class="p">())</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">DOcplex.MP: Mathematical Programming Modeling for Python V2.15 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2019, IBM&reg;.
    </div>
  </body>
</html>