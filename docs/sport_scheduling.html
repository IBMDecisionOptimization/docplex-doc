<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sport_scheduling.py &mdash; DOcplex Preview 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="DOcplex Preview 1.0 documentation" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DOcplex Preview 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sport-scheduling-py">
<h1>sport_scheduling.py<a class="headerlink" href="#sport-scheduling-py" title="Permalink to this headline">Â¶</a></h1>
<p>How can a sports league schedule matches between teams in different divisions such that the teams play each other
the appropriate number of times and maximize the objective of scheduling intradivision matches as late
as possible in the season?</p>
<p>A sports league with two divisions needs to schedule games such that each team plays every team within its division a specified
number of times and plays every team in the other division a specified number of times. Each week, a team plays exactly one game.
The preference is for intradivisional matches to be held as late as possible in the season. To model this preference, there is an
incentive for intradivisional matches; this incentive increases in a non-linear manner by week.
The problem consists of assigning an opponent to each team each week in order to maximize the total of the incentives.</p>
<p>This example works only with the DOcloud optimizer as it exceeds the limits of the Community Edition of
IBM ILOG CPLEX Optimization Studio.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="kn">from</span> <span class="nn">docplex.mp.model</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="kn">from</span> <span class="nn">docplex.mp.context</span> <span class="kn">import</span> <span class="n">DOcloudContext</span>

<span class="n">nbs</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>

<span class="n">team_div1</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;Baltimore Ravens&quot;</span><span class="p">,</span> <span class="s">&quot;Cincinnati Bengals&quot;</span><span class="p">,</span> <span class="s">&quot;Cleveland Browns&quot;</span><span class="p">,</span>
             <span class="s">&quot;Pittsburgh Steelers&quot;</span><span class="p">,</span> <span class="s">&quot;Houston Texans&quot;</span><span class="p">,</span> <span class="s">&quot;Indianapolis Colts&quot;</span><span class="p">,</span>
             <span class="s">&quot;Jacksonville Jaguars&quot;</span><span class="p">,</span> <span class="s">&quot;Tennessee Titans&quot;</span><span class="p">,</span> <span class="s">&quot;Buffalo Bills&quot;</span><span class="p">,</span>
             <span class="s">&quot;Miami Dolphins&quot;</span><span class="p">,</span> <span class="s">&quot;New England Patriots&quot;</span><span class="p">,</span> <span class="s">&quot;New York Jets&quot;</span><span class="p">,</span>
             <span class="s">&quot;Denver Broncos&quot;</span><span class="p">,</span> <span class="s">&quot;Kansas City Chiefs&quot;</span><span class="p">,</span> <span class="s">&quot;Oakland Raiders&quot;</span><span class="p">,</span>
             <span class="s">&quot;San Diego Chargers&quot;</span><span class="p">}</span>

<span class="n">team_div2</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;Chicago Bears&quot;</span><span class="p">,</span> <span class="s">&quot;Detroit Lions&quot;</span><span class="p">,</span> <span class="s">&quot;Green Bay Packers&quot;</span><span class="p">,</span>
             <span class="s">&quot;Minnesota Vikings&quot;</span><span class="p">,</span> <span class="s">&quot;Atlanta Falcons&quot;</span><span class="p">,</span> <span class="s">&quot;Carolina Panthers&quot;</span><span class="p">,</span>
             <span class="s">&quot;New Orleans Saints&quot;</span><span class="p">,</span> <span class="s">&quot;Tampa Bay Buccaneers&quot;</span><span class="p">,</span> <span class="s">&quot;Dallas Cowboys&quot;</span><span class="p">,</span>
             <span class="s">&quot;New York Giants&quot;</span><span class="p">,</span> <span class="s">&quot;Philadelphia Eagles&quot;</span><span class="p">,</span> <span class="s">&quot;Washington Redskins&quot;</span><span class="p">,</span>
             <span class="s">&quot;Arizona Cardinals&quot;</span><span class="p">,</span> <span class="s">&quot;San Francisco 49ers&quot;</span><span class="p">,</span> <span class="s">&quot;Seattle Seahawks&quot;</span><span class="p">,</span>
             <span class="s">&quot;St. Louis Rams&quot;</span><span class="p">}</span>

<span class="n">Match</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&quot;Matches&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;team1&quot;</span><span class="p">,</span> <span class="s">&quot;team2&quot;</span><span class="p">,</span> <span class="s">&quot;is_divisional&quot;</span><span class="p">])</span>


<span class="k">def</span> <span class="nf">build_sports</span><span class="p">(</span><span class="n">docloud_context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;* building sport scheduling model instance&quot;</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="s">&#39;sportSchedCPLEX&#39;</span><span class="p">,</span> <span class="n">docloud_context</span><span class="o">=</span><span class="n">docloud_context</span><span class="p">)</span>

    <span class="n">nb_teams_in_division</span> <span class="o">=</span> <span class="n">nbs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">nb_intra_divisional</span> <span class="o">=</span> <span class="n">nbs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">nb_inter_divisional</span> <span class="o">=</span> <span class="n">nbs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">team_div1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">team_div2</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">teams</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">team_div1</span> <span class="o">|</span> <span class="n">team_div2</span><span class="p">)</span>
    <span class="c"># team index ranges from 1 to 2N</span>
    <span class="n">team_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">nb_teams_in_division</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c"># Calculate the number of weeks necessary.</span>
    <span class="n">nb_weeks</span> <span class="o">=</span> <span class="p">(</span><span class="n">nb_teams_in_division</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">nb_intra_divisional</span> <span class="o">+</span> <span class="n">nb_teams_in_division</span> <span class="o">*</span> <span class="n">nb_inter_divisional</span>
    <span class="n">weeks</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nb_weeks</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">weeks</span> <span class="o">=</span> <span class="n">weeks</span>

    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} games, {1} intradivisional, {2} interdivisional&quot;</span>
          <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nb_weeks</span><span class="p">,</span> <span class="p">(</span><span class="n">nb_teams_in_division</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">nb_intra_divisional</span><span class="p">,</span>
                  <span class="n">nb_teams_in_division</span> <span class="o">*</span> <span class="n">nb_inter_divisional</span><span class="p">))</span>

    <span class="c"># Season is split into two halves.</span>
    <span class="n">first_half_weeks</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nb_weeks</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">nb_first_half_games</span> <span class="o">=</span> <span class="n">nb_weeks</span> <span class="o">//</span> <span class="mi">3</span>

    <span class="c"># All possible matches (pairings) and whether of not each is intradivisional.</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">Match</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="mi">1</span> <span class="k">if</span> <span class="p">(</span><span class="n">t2</span> <span class="o">&lt;=</span> <span class="n">nb_teams_in_division</span> <span class="ow">or</span> <span class="n">t1</span> <span class="o">&gt;</span> <span class="n">nb_teams_in_division</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
               <span class="k">for</span> <span class="n">t1</span> <span class="ow">in</span> <span class="n">team_range</span> <span class="k">for</span> <span class="n">t2</span> <span class="ow">in</span> <span class="n">team_range</span> <span class="k">if</span> <span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">]</span>
    <span class="n">model</span><span class="o">.</span><span class="n">matches</span> <span class="o">=</span> <span class="n">matches</span>
    <span class="c"># Number of games to play between pairs depends on</span>
    <span class="c"># whether the pairing is intradivisional or not.</span>
    <span class="n">nb_play</span> <span class="o">=</span> <span class="p">{</span><span class="n">m</span><span class="p">:</span> <span class="n">nb_intra_divisional</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">is_divisional</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">nb_inter_divisional</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">}</span>

    <span class="n">plays</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">binary_var_matrix</span><span class="p">(</span><span class="n">keys1</span><span class="o">=</span><span class="n">matches</span><span class="p">,</span> <span class="n">keys2</span><span class="o">=</span><span class="n">weeks</span><span class="p">,</span>
                                    <span class="n">name</span><span class="o">=</span><span class="k">lambda</span> <span class="n">mw</span><span class="p">:</span> <span class="s">&quot;play_</span><span class="si">%d</span><span class="s">_</span><span class="si">%d</span><span class="s">_w</span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">team1</span><span class="p">,</span> <span class="n">mw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">team2</span><span class="p">,</span> <span class="n">mw</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">model</span><span class="o">.</span><span class="n">plays</span> <span class="o">=</span> <span class="n">plays</span>

    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
        <span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">plays</span><span class="p">[</span><span class="n">m</span><span class="p">,</span> <span class="n">w</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weeks</span><span class="p">)</span> <span class="o">==</span> <span class="n">nb_play</span><span class="p">[</span><span class="n">m</span><span class="p">],</span>
                             <span class="s">&quot;correct_nb_games_</span><span class="si">%d</span><span class="s">_</span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">team1</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">team2</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weeks</span><span class="p">:</span>
        <span class="c"># Each team must play exactly once in a week.</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">team_range</span><span class="p">:</span>
            <span class="n">max_teams_in_division</span> <span class="o">=</span> <span class="p">(</span><span class="n">plays</span><span class="p">[</span><span class="n">m</span><span class="p">,</span> <span class="n">w</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">matches</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">team1</span> <span class="o">==</span> <span class="n">t</span> <span class="ow">or</span> <span class="n">m</span><span class="o">.</span><span class="n">team2</span> <span class="o">==</span> <span class="n">t</span><span class="p">)</span>
            <span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">max_teams_in_division</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span>
                                 <span class="s">&quot;plays_exactly_once_</span><span class="si">%d</span><span class="s">_</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span>

        <span class="c"># Games between the same teams cannot be on successive weeks.</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">w</span> <span class="o">&lt;</span> <span class="n">nb_weeks</span><span class="p">:</span>
                <span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">plays</span><span class="p">[</span><span class="n">m</span><span class="p">,</span> <span class="n">w</span><span class="p">]</span> <span class="o">+</span> <span class="n">plays</span><span class="p">[</span><span class="n">m</span><span class="p">,</span> <span class="n">w</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c"># Some intradivisional games should be in the first half.</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">team_range</span><span class="p">:</span>
        <span class="n">max_teams_in_division</span> <span class="o">=</span> <span class="p">[</span><span class="n">plays</span><span class="p">[</span><span class="n">m</span><span class="p">,</span> <span class="n">w</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">first_half_weeks</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">matches</span> <span class="k">if</span>
                                 <span class="n">m</span><span class="o">.</span><span class="n">is_divisional</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">team1</span> <span class="o">==</span> <span class="n">t</span> <span class="ow">or</span> <span class="n">m</span><span class="o">.</span><span class="n">team2</span> <span class="o">==</span> <span class="n">t</span><span class="p">)]</span>

        <span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">max_teams_in_division</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">nb_first_half_games</span><span class="p">,</span>
                             <span class="s">&quot;in_division_first_half_</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">t</span><span class="p">)</span>

    <span class="c"># postpone divisional matches as much as possible</span>
    <span class="c"># we weight each play variable with the square of w.</span>
    <span class="n">model</span><span class="o">.</span><span class="n">maximize</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">plays</span><span class="p">[</span><span class="n">m</span><span class="p">,</span> <span class="n">w</span><span class="p">]</span> <span class="o">*</span> <span class="n">w</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weeks</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">matches</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">is_divisional</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">model</span>


<span class="k">def</span> <span class="nf">solve_sports</span><span class="p">(</span><span class="n">docloud_context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">build_sports</span><span class="p">(</span><span class="n">docloud_context</span><span class="o">=</span><span class="n">docloud_context</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">print_information</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">export_as_lp</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">report</span><span class="p">()</span>
    <span class="n">TSolution</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&quot;TSolution&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;week&quot;</span><span class="p">,</span> <span class="s">&quot;is_divisional&quot;</span><span class="p">,</span> <span class="s">&quot;team1&quot;</span><span class="p">,</span> <span class="s">&quot;team2&quot;</span><span class="p">])</span>

    <span class="c"># iterate with weeks first</span>
    <span class="n">solution</span> <span class="o">=</span> <span class="p">[</span><span class="n">TSolution</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">is_divisional</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">team1</span><span class="p">],</span> <span class="n">model</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">team2</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">weeks</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">matches</span>
                <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">plays</span><span class="p">[</span><span class="n">m</span><span class="p">,</span> <span class="n">w</span><span class="p">]</span><span class="o">.</span><span class="n">to_bool</span><span class="p">()]</span>

    <span class="n">currweek</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Intradivisional games are marked with a *&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">solution</span><span class="p">:</span>
        <span class="c"># assume records are sorted by increasing week indices.</span>
        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">week</span> <span class="o">!=</span> <span class="n">currweek</span><span class="p">:</span>
            <span class="n">currweek</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">week</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&quot; == == == == == == == == == == == == == == == == &quot;</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&quot;On week </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">currweek</span><span class="p">)</span>

        <span class="k">print</span><span class="p">(</span><span class="s">&quot;    {0:s}{1} will meet the {2}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;*&quot;</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">is_divisional</span> <span class="k">else</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">team1</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">team2</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">objective_value</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;DOcloud credentials can be specified here with url and api_key in the code block below.</span>

<span class="sd">    Alternatively, if api_key is None, DOcloudContext.make_default_context()</span>
<span class="sd">    looks for a .docplexrc file in your home directory on unix ($HOME)</span>
<span class="sd">    or user profile directory on windows (%UserProfile%). That file contains the</span>
<span class="sd">    credential and other properties. For example, something similar to::</span>

<span class="sd">       url = &quot;https://docloud.service.com/job_manager/rest/v1&quot;</span>
<span class="sd">       api_key = &quot;example api_key&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;This example hits the limits of CPLEX Optimization Studio and will work only the DOcloud solve.&quot;</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;YOUR_URL_HERE&quot;</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">DOcloudContext</span><span class="o">.</span><span class="n">make_default_context</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">api_key</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">print_information</span><span class="p">()</span>

    <span class="kn">from</span> <span class="nn">docplex.mp.environment</span> <span class="kn">import</span> <span class="n">Environment</span>

    <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>
    <span class="n">env</span><span class="o">.</span><span class="n">print_information</span><span class="p">()</span>

    <span class="n">solve_sports</span><span class="p">(</span><span class="n">docloud_context</span><span class="o">=</span><span class="n">ctx</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DOcplex Preview 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, IBM CPLEX.
    </div>
  </body>
</html>