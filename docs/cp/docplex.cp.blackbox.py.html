

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Module docplex.cp.blackbox &#8212; DOcplex.CP: Constraint Programming Modeling for Python V2.23 documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Module docplex.cp.fzn.fzn_parser" href="docplex.cp.fzn.fzn_parser.py.html" />
    <link rel="prev" title="Module docplex.cp.solver.cpo_callback" href="docplex.cp.solver.cpo_callback.py.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="docplex.cp.fzn.fzn_parser.py.html" title="Module docplex.cp.fzn.fzn_parser"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="docplex.cp.solver.cpo_callback.py.html" title="Module docplex.cp.solver.cpo_callback"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DOcplex.CP: Constraint Programming Modeling for Python V2.23 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="refman.html" accesskey="U"><strong>docplex.cp</strong> reference manual</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Module <strong>docplex.cp.blackbox</strong></a><ul>
<li><a class="reference internal" href="#defining-a-blackbox-function">Defining a blackbox function</a></li>
<li><a class="reference internal" href="#evaluating-a-blackbox-function">Evaluating a blackbox function</a></li>
<li><a class="reference internal" href="#using-a-blackbox-function-in-a-model">Using a blackbox function in a model</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed description</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="docplex.cp.solver.cpo_callback.py.html"
                        title="previous chapter">Module <strong>docplex.cp.solver.cpo_callback</strong></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="docplex.cp.fzn.fzn_parser.py.html"
                        title="next chapter">Module <strong>docplex.cp.fzn.fzn_parser</strong></a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-docplex-cp-blackbox">
<h1>Module <strong>docplex.cp.blackbox</strong><a class="headerlink" href="#module-docplex-cp-blackbox" title="Permalink to this headline">&para;</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-docplex.cp.blackbox"></span><p>A blackbox expression is a numerical expression for which the analytical form is not known or cannot be
formulated using CP Optimizer&#8217;s classical expressions.
A blackbox expression is specified by giving a function that evaluates the expression at given points.</p>
<p>This feature is accessible from Python only for COS solver releases strictly greater than 20.X.</p>
<div class="section" id="defining-a-blackbox-function">
<h2>Defining a blackbox function<a class="headerlink" href="#defining-a-blackbox-function" title="Permalink to this headline">&para;</a></h2>
<p>A blackbox function is defined by an instance of the class <a class="reference internal" href="#docplex.cp.blackbox.CpoBlackboxFunction" title="docplex.cp.blackbox.CpoBlackboxFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoBlackboxFunction</span></code></a>
that contains:</p>
<blockquote>
<div><ul class="simple">
<li>the name of the blackbox function, auto-allocated if not given,</li>
<li>the number of values that are returned by the evaluation of the function, one by default,</li>
<li>the list of argument types, auto-determined if not given,</li>
<li>the implementation of the function,</li>
<li>optionally an argument to pass known result bounds when evaluating the function,</li>
<li>an indicator allowing parallel evaluation of the blackbox function, False by default.</li>
</ul>
</div></blockquote>
<p>Each argument type can be given using its symbolic name string, or using its corresponding
type descriptor constant object of class <code class="xref py py-class docutils literal notranslate"><span class="pre">CpoType</span></code> listed in module
<code class="xref py py-mod docutils literal notranslate"><span class="pre">catalog</span></code>. Allowed argument types are:</p>
<blockquote>
<div><ul class="simple">
<li>&#8216;Int&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_Int</span></code></li>
<li>&#8216;IntVar&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntVar</span></code></li>
<li>&#8216;IntExpr&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntExpr</span></code></li>
<li>&#8216;Float&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_Float</span></code></li>
<li>&#8216;FloatExpr&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_FloatExpr</span></code></li>
<li>&#8216;IntervalVar&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntervalVar</span></code></li>
<li>&#8216;SequenceVar&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_SequenceVar</span></code></li>
<li>&#8216;IntArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntArray</span></code></li>
<li>&#8216;IntVarArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntVarArray</span></code></li>
<li>&#8216;IntExprArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntExprArray</span></code></li>
<li>&#8216;FloatArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_FloatArray</span></code></li>
<li>&#8216;FloatExprArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_FloatExprArray</span></code></li>
<li>&#8216;IntervalVarArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntervalVarArray</span></code></li>
<li>&#8216;SequenceVarArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_SequenceVarArray</span></code></li>
</ul>
</div></blockquote>
<p>If not given, the list of argument types is automatically computed as the smallest list of types
that are common to all the references to the blackbox function in the model.</p>
</div>
<div class="section" id="evaluating-a-blackbox-function">
<h2>Evaluating a blackbox function<a class="headerlink" href="#evaluating-a-blackbox-function" title="Permalink to this headline">&para;</a></h2>
<p>The implementation of the function is a function or a lambda expression that takes as many parameters as declared
in the list of argument types.
If the blackbox definition parameter <em>args_with_vars</em> is not set to True (default value is False), the
arguments are limited to their values.
If it is set to True, then the argument is an object of class CpoXxxVarSolution every time the argument type explicitly
refers to a variable. This allows to access to the model variable, that constitute the argument, if available.
In such case:</p>
<blockquote>
<div><ul class="simple">
<li>argument variable can be accessed with method <em>get_var()</em>,</li>
<li>argument value can be accessed with method <em>get_value()</em>.</li>
</ul>
</div></blockquote>
<p>Here is what is given as argument value for each argument type if <em>args_with_vars</em> is set to False (default):</p>
<blockquote>
<div><ul class="simple">
<li>&#8216;Int&#8217;: integer constant.</li>
<li>&#8216;IntVar&#8217;: integer constant.</li>
<li>&#8216;IntExpr&#8217;: integer constant.</li>
<li>&#8216;Float&#8217;: float constant.</li>
<li>&#8216;FloatExpr&#8217;: float constant.</li>
<li>&#8216;IntervalVar&#8217;: interval variable solution value, named tuple containing start, end and size of the variable.</li>
<li>&#8216;SequenceVar&#8217;: sequence variable solution value, ordered list of model interval variables in the sequence.</li>
<li>&#8216;IntArray&#8217;: list of integer constants.</li>
<li>&#8216;IntVarArray&#8217;: list of integer constants.</li>
<li>&#8216;IntExprArray&#8217;: list of integer constants.</li>
<li>&#8216;FloatArray&#8217;: list of float constants.</li>
<li>&#8216;FloatExprArray&#8217;: list of float constants.</li>
<li>&#8216;IntervalVarArray&#8217;: list of interval variable solution value (see &#8216;IntervalVar&#8217;).</li>
<li>&#8216;SequenceVarArray&#8217;: list of sequence variable solution value (see &#8216;SequenceVar&#8217;).</li>
</ul>
</div></blockquote>
<p>Here is what is given as argument value for each argument type if <em>args_with_vars</em> is explicitly set to True:</p>
<blockquote>
<div><ul class="simple">
<li>&#8216;Int&#8217;: integer constant.</li>
<li>&#8216;IntVar&#8217;: object of <a class="reference internal" href="docplex.cp.solution.py.html#docplex.cp.solution.CpoIntVarSolution" title="docplex.cp.solution.CpoIntVarSolution"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoIntVarSolution</span></code></a>.</li>
<li>&#8216;IntExpr&#8217;: integer constant.</li>
<li>&#8216;Float&#8217;: float constant.</li>
<li>&#8216;FloatExpr&#8217;: float constant.</li>
<li>&#8216;IntervalVar&#8217;: object of <a class="reference internal" href="docplex.cp.solution.py.html#docplex.cp.solution.CpoIntervalVarSolution" title="docplex.cp.solution.CpoIntervalVarSolution"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoIntervalVarSolution</span></code></a>.</li>
<li>&#8216;SequenceVar&#8217;: object of <a class="reference internal" href="docplex.cp.solution.py.html#docplex.cp.solution.CpoSequenceVarSolution" title="docplex.cp.solution.CpoSequenceVarSolution"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoSequenceVarSolution</span></code></a>.</li>
<li>&#8216;IntArray&#8217;: list of integer constants.</li>
<li>&#8216;IntVarArray&#8217;: list of objects of <a class="reference internal" href="docplex.cp.solution.py.html#docplex.cp.solution.CpoIntVarSolution" title="docplex.cp.solution.CpoIntVarSolution"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoIntVarSolution</span></code></a>.</li>
<li>&#8216;IntExprArray&#8217;: list of integer constants.</li>
<li>&#8216;FloatArray&#8217;: list of float constants.</li>
<li>&#8216;FloatExprArray&#8217;: list of float constants.</li>
<li>&#8216;IntervalVarArray&#8217;: list of objects of class <a class="reference internal" href="docplex.cp.solution.py.html#docplex.cp.solution.CpoIntervalVarSolution" title="docplex.cp.solution.CpoIntervalVarSolution"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoIntervalVarSolution</span></code></a>.</li>
<li>&#8216;SequenceVarArray&#8217;: list of objects of class <a class="reference internal" href="docplex.cp.solution.py.html#docplex.cp.solution.CpoSequenceVarSolution" title="docplex.cp.solution.CpoSequenceVarSolution"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoSequenceVarSolution</span></code></a>, with value as list of objects of class <a class="reference internal" href="docplex.cp.expression.py.html#docplex.cp.expression.CpoSequenceVar" title="docplex.cp.expression.CpoSequenceVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoSequenceVar</span></code></a>.</li>
</ul>
</div></blockquote>
<p>The function may return:</p>
<blockquote>
<div><ul class="simple">
<li>one or several float results in a list,</li>
<li>a single number value, automatically converted in a list with this single value,</li>
<li>a boolean value, converted as an integer 0 or 1 put in a single value list,</li>
<li><em>None</em>, if the function has no solution for these arguments.</li>
</ul>
</div></blockquote>
<p>If an error occurs during the function evaluation, the exception is forwarded to the solver that will fail with this error.</p>
<p>If an exception is thrown, it is propagated to the solver that rethrow an exception to exit from the solve.</p>
<p>As the evaluation of the blackbox function is required by the different CPO workers, multiple evaluation requests
may happen concurrently.
As Python does not support real multi-threading (see Global Interpreter Lock here: <a class="reference external" href="https://wiki.python.org/moin/GlobalInterpreterLock">https://wiki.python.org/moin/GlobalInterpreterLock</a>),
concurrent processing may introduce overhead, or computation problems if the blackbox evaluation uses services of
libraries that are not designed to run concurrently.
By default, blackbox function evaluation is then executed in mutual exclusion, but this can be changed by setting
the parameter <em>parallel</em> to True, or using method <a class="reference internal" href="#docplex.cp.blackbox.CpoBlackboxFunction.set_parallel_eval" title="docplex.cp.blackbox.CpoBlackboxFunction.set_parallel_eval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_parallel_eval()</span></code></a></p>
<p>To avoid calling the blackbox function multiple times with the same parameters, the solver can use a cache that may be
configured at the declaration of the blackbox.
This cache is by default local to each call instance of the blackbox function in the model, in case the evaluation
of the function depends on the calling context and may return different results with the same parameters depending
where the call is placed in the model.</p>
</div>
<div class="section" id="using-a-blackbox-function-in-a-model">
<h2>Using a blackbox function in a model<a class="headerlink" href="#using-a-blackbox-function-in-a-model" title="Permalink to this headline">&para;</a></h2>
<p>Once defined, the blackbox function can be used in a model simply by calling the blackbox function descriptor
with appropriate model expressions as arguments.
Following is a simple example that shows how to use a blackbox function with 2 parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bbf</span> <span class="o">=</span> <span class="n">CpoBlackboxFunction</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>
<span class="n">mdl</span> <span class="o">=</span> <span class="n">CpoModel</span><span class="p">()</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">integer_var</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;V1&quot;</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">integer_var</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;V2&quot;</span><span class="p">)</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bbf</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>If the blackbox function returns multiple values, using the function in a model is done in two steps, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bbf</span> <span class="o">=</span> <span class="n">CpoBlackboxFunction</span><span class="p">(</span><span class="n">impl</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">),</span> <span class="n">dimension</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">mdl</span> <span class="o">=</span> <span class="n">CpoModel</span><span class="p">()</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">integer_var</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;V1&quot;</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">integer_var</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;V2&quot;</span><span class="p">)</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">bbf</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that not all returned expressions need to be used in the model.</p>
</div>
<div class="section" id="detailed-description">
<h2>Detailed description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">&para;</a></h2>
<dl class="class">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction">
<em class="property">class </em><code class="descclassname">docplex.cp.blackbox.</code><code class="descname">CpoBlackboxFunction</code><span class="sig-paren">(</span><em>impl=None</em>, <em>dimension=1</em>, <em>argtypes=None</em>, <em>name=None</em>, <em>parallel=False</em>, <em>bounds_parameter=None</em>, <em>args_with_vars=False</em>, <em>cachesize=-1</em>, <em>globalcache=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction" title="Permalink to this definition">&para;</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class represents the descriptor of a blackbox function.</p>
<p>A blackbox function is defined by:</p>
<blockquote>
<div><ul class="simple">
<li>a name, that must not be equal to an existing modeling operation,</li>
<li>the number of float values it returns (the dimension),</li>
<li>the list argument types,</li>
<li>the implementation of the function, that evaluates the result from a list of
fully evaluated arguments.</li>
<li>a parameter allowing to pass the known bounds of the result.</li>
</ul>
</div></blockquote>
<p>Each argument type can be given using its symbolic name string, or using its corresponding
type descriptor constant object of class <code class="xref py py-class docutils literal notranslate"><span class="pre">CpoType</span></code> listed in module
<code class="xref py py-mod docutils literal notranslate"><span class="pre">catalog</span></code>.</p>
<p>Allowed argument types are:</p>
<blockquote>
<div><ul class="simple">
<li>&#8216;Int&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_Int</span></code></li>
<li>&#8216;IntVar&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntVar</span></code></li>
<li>&#8216;IntExpr&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntExpr</span></code></li>
<li>&#8216;Float&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_Float</span></code></li>
<li>&#8216;FloatExpr&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_FloatExpr</span></code></li>
<li>&#8216;IntervalVar&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntervalVar</span></code></li>
<li>&#8216;SequenceVar&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_SequenceVar</span></code></li>
<li>&#8216;IntArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntArray</span></code></li>
<li>&#8216;IntVarArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntVarArray</span></code></li>
<li>&#8216;IntExprArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntExprArray</span></code></li>
<li>&#8216;FloatArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_FloatArray</span></code></li>
<li>&#8216;FloatExprArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_FloatExprArray</span></code></li>
<li>&#8216;IntervalVarArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_IntervalVarArray</span></code></li>
<li>&#8216;SequenceVarArray&#8217; or <code class="xref py py-const docutils literal notranslate"><span class="pre">Type_SequenceVarArray</span></code></li>
</ul>
</div></blockquote>
<p><strong>Constructor</strong></p>
<p>The list of function argument types is optional.
If not given, it is automatically determined as the most common types of the expression arguments used
in its different references in the model.</p>
<p>Function implementation is optional.
This allows to parse a CPO file that contains references to blackbox functions(s), which requires
to register them in the model prior to parse it.
However, the model will not be able to be solved.</p>
<p>The name of the function is optional.
If not given, a name is automatically allocated when solving the model.
If given, the name of the function must be a symbol (only letters and digits, starting by a letter)
that is not already used as the name of an existing modeling function.</p>
<p>Bound parameter is optional.
If defined, the known bounds of the function result is passed to the function implementation using this named
parameter.
If the dimension of the function is 1, the bounds is a simple tuple containing lower and upper bounds.
Otherwise, the bounds is a list of tuples, one for each returned value.
If unknown, bounds are set to -inf or inf (float(&#8220;inf&#8221;) in Python).</p>
<p>By default, arguments passed when evaluating the function are only values.
If the parameter <em>include_vars</em> is set to True, when arguments are variables, an object of type
CpoXxxVarSolution, that include reference to the model variable, is used instead.</p>
<p>A cache can be used by the solver to avoid calling the blackbox function multiple times with the same values.
By default (cachesize=-1), the size of the cache is automatically determined by the solver, but it can be
forced to a given value, or zero for no cache at all.</p>
<p>By default, this cache is local to each call instance of the blackbox function in the model, in case the
evaluation of the function depends on the calling context and may return different results with the same
parameters depending where the call is placed in the model.
The parameter <em>globalcache</em> can be set to <em>True</em> if the same cache can be used for all call instances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>impl</strong> &#8211; (Optional) Implementation of the function</li>
<li><strong>dimension</strong> &#8211; (Optional) Number of float values that are returned by the function. Default is 1.</li>
<li><strong>argtypes</strong> &#8211; (Optional) List of argument types or type names.</li>
<li><strong>name</strong> &#8211; (Optional) Name of the function, restricted to symbol.</li>
<li><strong>parallel</strong> &#8211; (Optional) Indicates that the blackbox function evaluation is allowed concurrently.
Default is False.</li>
<li><strong>bounds_parameter</strong> &#8211; (Optional) Name of the parameter in which known return values bounds can be set.
Default is None.</li>
<li><strong>args_with_vars</strong> &#8211; (Optional) Enable passing an object of type CpoXxxVarSolution instead of value only.
Default is False.</li>
<li><strong>cachesize</strong> &#8211; (Optional) Indicates that the blackbox function evaluation is allowed concurrently.
Default value is -1, indicating that the cache is managed by the solver with default settings.</li>
<li><strong>globalcache</strong> &#8211; (Optional) Indicates that the same cache can be used for all blackbox function call instances
in the model.
Default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.build_model_call">
<code class="descname">build_model_call</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.build_model_call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.build_model_call" title="Permalink to this definition">&para;</a></dt>
<dd><p>Build a model expression representing a call to this blackbox function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>*args</strong> &#8211; List of expressions that are arguments of the function</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List model expressions representing access to the unitary result values,
or single result if dimension is 1.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.eval">
<code class="descname">eval</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.eval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.eval" title="Permalink to this definition">&para;</a></dt>
<dd><p>Evaluate the function from the list of parameter values</p>
<p>This function evaluates the blackbox function without providing bounds.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>*args</strong> &#8211; List of parameter values</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of result float values</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.get_arg_types">
<code class="descname">get_arg_types</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.get_arg_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.get_arg_types" title="Permalink to this definition">&para;</a></dt>
<dd><p>Get the list of argument types</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of argument types, objects of class <code class="xref py py-class docutils literal notranslate"><span class="pre">CpoType</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.get_cache_size">
<code class="descname">get_cache_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.get_cache_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.get_cache_size" title="Permalink to this definition">&para;</a></dt>
<dd><p>Get the size of the evaluation cache</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Evaluation cache size, -1 for default, 0 for none.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.get_dimension">
<code class="descname">get_dimension</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.get_dimension"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.get_dimension" title="Permalink to this definition">&para;</a></dt>
<dd><p>Get the dimension of this blackbox function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Number of result values (size of the result list or array)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.get_eval_count">
<code class="descname">get_eval_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.get_eval_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.get_eval_count" title="Permalink to this definition">&para;</a></dt>
<dd><p>Get the number of times this blackbox function has been evaluated</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">number of times this blackbox function has been evaluated</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.get_implementation">
<code class="descname">get_implementation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.get_implementation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.get_implementation" title="Permalink to this definition">&para;</a></dt>
<dd><p>Get the blackbox function implementation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Blackbox function implementation</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.get_name">
<code class="descname">get_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.get_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.get_name" title="Permalink to this definition">&para;</a></dt>
<dd><p>Get the name of the blackbox function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Name of the blackbox function</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.has_implementation">
<code class="descname">has_implementation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.has_implementation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.has_implementation" title="Permalink to this definition">&para;</a></dt>
<dd><p>Get if the blackbox function has an implementation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if the blackbox function has an implementation</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.is_global_cache">
<code class="descname">is_global_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.is_global_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.is_global_cache" title="Permalink to this definition">&para;</a></dt>
<dd><p>Check if a global cache has been set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if there is a global cache for this function.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.is_parallel_eval">
<code class="descname">is_parallel_eval</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.is_parallel_eval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.is_parallel_eval" title="Permalink to this definition">&para;</a></dt>
<dd><p>Check if parallel evaluation is allowed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if parallel evaluation is allowed, false oherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.reset_eval_count">
<code class="descname">reset_eval_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.reset_eval_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.reset_eval_count" title="Permalink to this definition">&para;</a></dt>
<dd><p>Reset the number of times this blackbox function has been evaluated</p>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.set_cache_size">
<code class="descname">set_cache_size</code><span class="sig-paren">(</span><em>size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.set_cache_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.set_cache_size" title="Permalink to this definition">&para;</a></dt>
<dd><p>Set the size of evaluation cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>size</strong> &#8211; Cache size, -1 for default, 0 for none.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.set_dimension">
<code class="descname">set_dimension</code><span class="sig-paren">(</span><em>dim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.set_dimension"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.set_dimension" title="Permalink to this definition">&para;</a></dt>
<dd><p>Set the dimension of this blackbox function, i.e. the number of values that it returns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dim</strong> &#8211; Number of result values (size of the result list or array)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.set_global_cache">
<code class="descname">set_global_cache</code><span class="sig-paren">(</span><em>glob</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.set_global_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.set_global_cache" title="Permalink to this definition">&para;</a></dt>
<dd><p>Set the global cache indicator.</p>
<p>When set, there is a single evaluation cache for all the blackbox function call instances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>glob</strong> &#8211; Global cache indicator</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.set_implementation">
<code class="descname">set_implementation</code><span class="sig-paren">(</span><em>impl</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.set_implementation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.set_implementation" title="Permalink to this definition">&para;</a></dt>
<dd><p>Set the blackbox function implementation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>impl</strong> &#8211; Blackbox function implementation</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.set_name">
<code class="descname">set_name</code><span class="sig-paren">(</span><em>nm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.set_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.set_name" title="Permalink to this definition">&para;</a></dt>
<dd><p>Set the name of the blackbox function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nm</strong> &#8211; Name of the blackbox function</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="docplex.cp.blackbox.CpoBlackboxFunction.set_parallel_eval">
<code class="descname">set_parallel_eval</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunction.set_parallel_eval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunction.set_parallel_eval" title="Permalink to this definition">&para;</a></dt>
<dd><p>Set parallel evaluation enablement indicator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>par</strong> &#8211; Parallel evaluation indicator.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="docplex.cp.blackbox.CpoBlackboxFunctionCall">
<em class="property">class </em><code class="descclassname">docplex.cp.blackbox.</code><code class="descname">CpoBlackboxFunctionCall</code><span class="sig-paren">(</span><em>bbf</em>, <em>oprnds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/blackbox.html#CpoBlackboxFunctionCall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.blackbox.CpoBlackboxFunctionCall" title="Permalink to this definition">&para;</a></dt>
<dd><p>Bases: <a class="reference internal" href="docplex.cp.expression.py.html#docplex.cp.expression.CpoFunctionCall" title="docplex.cp.expression.CpoFunctionCall"><code class="xref py py-class docutils literal notranslate"><span class="pre">docplex.cp.expression.CpoFunctionCall</span></code></a></p>
<p>This class represent all model expression nodes that call a blackbox function.</p>
<p><strong>Constructor</strong>
:param bbf: Blackbox function descriptor
:param oprnds: List of operand expressions.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="docplex.cp.fzn.fzn_parser.py.html" title="Module docplex.cp.fzn.fzn_parser"
             >next</a> |</li>
        <li class="right" >
          <a href="docplex.cp.solver.cpo_callback.py.html" title="Module docplex.cp.solver.cpo_callback"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DOcplex.CP: Constraint Programming Modeling for Python V2.23 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="refman.html" ><strong>docplex.cp</strong> reference manual</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, IBM.
    </div>
  </body>
</html>