

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Module docplex.cp.config &#8212; DOcplex.CP: Constraint Programming Modeling for Python V2.15 documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Module docplex.cp.solver.solver" href="docplex.cp.solver.solver.py.html" />
    <link rel="prev" title="Module docplex.cp.solution" href="docplex.cp.solution.py.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="docplex.cp.solver.solver.py.html" title="Module docplex.cp.solver.solver"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="docplex.cp.solution.py.html" title="Module docplex.cp.solution"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DOcplex.CP: Constraint Programming Modeling for Python V2.15 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="refman.html" accesskey="U"><strong>docplex.cp</strong> reference manual</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Module <strong>docplex.cp.config</strong></a><ul>
<li><a class="reference internal" href="#general-parameters">General parameters</a></li>
<li><a class="reference internal" href="#configuration-of-the-model-solving">Configuration of the model solving</a></li>
<li><a class="reference internal" href="#configuration-of-the-local-solving-agent">Configuration of the <cite>local</cite> solving agent</a></li>
<li><a class="reference internal" href="#configuration-of-the-docloud-solving-agent">Configuration of the <cite>docloud</cite> solving agent</a></li>
<li><a class="reference internal" href="#configuration-for-best-performances">Configuration for best performances</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed description</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="docplex.cp.solution.py.html"
                        title="previous chapter">Module <strong>docplex.cp.solution</strong></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="docplex.cp.solver.solver.py.html"
                        title="next chapter">Module <strong>docplex.cp.solver.solver</strong></a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-docplex-cp-config">
<h1>Module <strong>docplex.cp.config</strong><a class="headerlink" href="#module-docplex-cp-config" title="Permalink to this headline">&para;</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-docplex.cp.config"></span><p>Configuration of the CP Optimizer Python API</p>
<p>This module is the top-level handler of the configuration parameters for
the CP Optimizer Python API. It contains the default values of the different
configuration parameters.</p>
<p>It should NOT be changed directly.
The preferable way is to add at least one of the following files that contain the changes
to be performed:</p>
<blockquote>
<div><ul class="simple">
<li><em>cpo_config.py</em>, a local set of changes on these parameters,</li>
<li><em>cpo_config_&lt;hostname&gt;.py</em>, a hostname dependent set of changes.</li>
<li><em>docloud_config.py</em> (for DOcloud url and key, file shared with docplex.mp package).</li>
</ul>
</div></blockquote>
<p>Final set of parameters is obtained by reading first this module, and then those
listed above.
These modules should be visible from the <em>PYTHONPATH</em> and are loaded in
this order to overwrite default values.</p>
<p>This module also defines two global variables:</p>
<blockquote>
<div><ul>
<li><p class="first"><em>LOCAL_CONTEXT</em>, that contains the configuration appropriate to solve a model with a local
installation of the CPO solver.
This configuration is available for solver with version number greater or equal to 12.7.0.</p>
<p>This context is the context by default, referenced by the global variable &#8216;context&#8217;.</p>
</li>
<li><p class="first"><em>DOCLOUD_CONTEXT</em>, that contains the configuration necessary to solve a model on DOcloud.</p>
</li>
</ul>
</div></blockquote>
<p>The method <a class="reference internal" href="#docplex.cp.config.set_default" title="docplex.cp.config.set_default"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default()</span></code></a> allows to set the default configuration to one that is predefined,
or another that has been totally customized.</p>
<p>If called as main, this module prints the actual configuration on standard output, including
all customizations made using the mechanism described above.</p>
<p>Following sections describe the most important parameters that can be easily modified to customize
the behavior of the Python API.
All available parameters are available by consulting the source code of this module.</p>
<div class="section" id="general-parameters">
<h2>General parameters<a class="headerlink" href="#general-parameters" title="Permalink to this headline">&para;</a></h2>
<p><em>context.log_output = sys.stdout</em></p>
<blockquote>
<div>This parameter contains the default log stream.
By default it is set to the standard output.
A value of <em>None</em> can be used to disable all logs.</div></blockquote>
<p><em>context.verbose = 0</em></p>
<blockquote>
<div>This parameter controls the verbosity level of the log, between 0 and 9, if <em>log_output</em> is not None.
The default value of 0 means no log.</div></blockquote>
<p><em>context.model.add_source_location = True</em></p>
<blockquote>
<div>This parameter indicates that when the model is transformed into CPO format, additional information is added
to correlate expressions with the Python file and line where it has been generated.
If any error is raised by the solver during the solve, this information is provided in the
error description, which allows for easier debugging.</div></blockquote>
<p><em>context.model.length_for_alias = None</em></p>
<blockquote>
<div><p>This parameter allows to associate a shorter alias to variables whose name is longer than the given length.
In the CPO representation of the model, variable is declared with its original name and an alias is created
to use it with a shorter name in model expressions, allowing to reduce the size of the generated CPO format.</p>
<p>In the returned solution, variable can be still retrieved with their original names.</p>
<p>By default, the value is None, which indicates to always keep original variable names.</p>
</div></blockquote>
<p><em>context.model.name_all_constraints = False</em></p>
<blockquote>
<div>This parameter enables the naming of all constraints when the model is generated in CPO format.
It is mandatory only if the <em>refine conflict</em> function is called.
Anyway, if the <em>refine conflict</em> function is called, and if the CPO format of the model has already been generated,
it is generated again with this option set in order to allow proper completion of the request.
Setting it to <em>True</em> is preferable only if <em>refine conflict</em> function is called on a big model.</div></blockquote>
<p><em>context.model.dump_directory = None</em></p>
<blockquote>
<div><p>This parameter gives the name of a directory where the CPO files that are generated for solving models are stored
for logging purpose.</p>
<p>If not None, the directory is created and generated models are stored in files named <cite>&lt;model_name&gt;.cpo</cite>.</p>
</div></blockquote>
<p><em>context.model.cache.size = 10000</em></p>
<blockquote>
<div>This parameter gives the maximum capacity of the internal cache used to speed-up conversion of Python expressions
into CPO expressions.</div></blockquote>
<p><em>context.model.cache.active = True</em></p>
<blockquote>
<div>This parameter allows to enable or disable the expression cache mechanism.
Value os a boolean (True or False). Default value is True.</div></blockquote>
<p><em>context.params.*</em></p>
<blockquote>
<div>The parameter <cite>context.params</cite> is an instance of the class
<a class="reference internal" href="docplex.cp.parameters.py.html#docplex.cp.parameters.CpoParameters" title="docplex.cp.parameters.CpoParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoParameters</span></code></a> (in <a class="reference internal" href="docplex.cp.parameters.py.html"><span class="doc">parameters.py</span></a>)
which describes all of the public solver parameters as properties.</div></blockquote>
</div>
<div class="section" id="configuration-of-the-model-solving">
<h2>Configuration of the model solving<a class="headerlink" href="#configuration-of-the-model-solving" title="Permalink to this headline">&para;</a></h2>
<p><em>context.solver.trace_cpo = False</em></p>
<blockquote>
<div>This parameter indicates to trace the CPO model that is generated before submitting it for solving.
The model is printed on the <cite>context.log_output stream</cite>, if given.</div></blockquote>
<p><em>context.solver.trace_log = False</em></p>
<blockquote>
<div><p>This parameter indicates to trace the log generated by the solver when solving the CPO model.
The log is printed on the <cite>context.log_output stream</cite>, if given.</p>
<p>The default value of this parameter is False for a solve on the cloud, and True for a local solve.</p>
</div></blockquote>
<p><em>context.solver.enable_undocumented_params = False</em></p>
<blockquote>
<div>This parameter allows to enable the possibility to set solving parameters that are not in the public parameters
detailed in the class
<a class="reference internal" href="docplex.cp.parameters.py.html#docplex.cp.parameters.CpoParameters" title="docplex.cp.parameters.CpoParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">CpoParameters</span></code></a> (in <a class="reference internal" href="docplex.cp.parameters.py.html"><span class="doc">parameters.py</span></a>).</div></blockquote>
<p><em>context.solver.add_log_to_solution = True</em></p>
<blockquote>
<div>This parameter indicates to add the solver log content to the solution object.
By default, this parameter is True but it can be set to False if the log is very big or of no interest.</div></blockquote>
<p><em>context.solver.add_conflict_as_cpo = True</em></p>
<blockquote>
<div>This parameter indicates to include the conflict in CPO format in the conflict refiner result
By default, this parameter is True.</div></blockquote>
<p><em>context.solver.agent = &#8216;local&#8217;</em></p>
<blockquote>
<div><p>This parameter specifies the name of the solver agent that is used to solve the model.
The value of this parameter is the name of a child context of <cite>context.solver</cite>, which contains necessary attributes
that allow to create and run the required agent.</p>
<p>There are two different agents described in the default configuration file:</p>
<blockquote>
<div><ul class="simple">
<li><cite>local</cite>, the default agent, allowing to solve models locally using the CP Optimizer Interactive coming with
versions of COS greater or equal to 12.7.0.</li>
<li><cite>docloud</cite>, the agent for solving a CPO model using the DOcplexcloud service.</li>
</ul>
</div></blockquote>
<p>If the CP Optimizer Interactive program <em>cpoptimizer(.exe)</em> is <strong>NOT</strong> detected in the system path,
the default solver agent is automatically set to <em>docloud</em> instead of <em>local</em>.</p>
</div></blockquote>
<p><em>context.solver.log_prefix = &#8220;[Solver] &#8220;</em></p>
<blockquote>
<div>Prefix that is added to every message that is logged by the solver component.</div></blockquote>
</div>
<div class="section" id="configuration-of-the-local-solving-agent">
<h2>Configuration of the <cite>local</cite> solving agent<a class="headerlink" href="#configuration-of-the-local-solving-agent" title="Permalink to this headline">&para;</a></h2>
<p><em>context.solver.local.execfile</em></p>
<blockquote>
<div>Name or full path of the CP Optimizer Interactive executable file.
By default, it is set to <em>cpoptimizer(.exe)</em>, which supposes that the program is visible from the system path.</div></blockquote>
</div>
<div class="section" id="configuration-of-the-docloud-solving-agent">
<h2>Configuration of the <cite>docloud</cite> solving agent<a class="headerlink" href="#configuration-of-the-docloud-solving-agent" title="Permalink to this headline">&para;</a></h2>
<p><em>context.solver.docloud.url = &#8220;https://api-oaas.docloud.ibmcloud.com/job_manager/rest/v1/&#8221;</em></p>
<blockquote>
<div>This parameter is used to specify the URL of the <em>DOcplexcloud</em> service.</div></blockquote>
<p><em>context.solver.docloud.key = &#8220;&#8216;Set your key in docloud_config.py&#8217;&#8221;</em></p>
<blockquote>
<div>This parameter contains the personal key for authorizing access to the <em>DOcplexcloud</em> service.
Access credentials (base URL and access key) can be retrieved after registration from <a class="reference external" href="http://developer.ibm.com/docloud/docs/api-key/">http://developer.ibm.com/docloud/docs/api-key/</a>.</div></blockquote>
<p><em>context.solver.docloud.verify_ssl = True</em></p>
<blockquote>
<div>This parameter allows to enable/disable the verification of SSL certificates.</div></blockquote>
<p><em>context.solver.docloud.proxies = None</em></p>
<blockquote>
<div>This parameter allows to optionally define proxies to be used in the connection with <em>DOcplexcloud</em>.
It is a Python dictionary protocol_name / endpoint, as described in <a class="reference external" href="http://docs.python-requests.org/en/master/user/advanced/#proxies">http://docs.python-requests.org/en/master/user/advanced/#proxies</a>.</div></blockquote>
<p><em>context.solver.docloud.request_timeout = 30</em></p>
<blockquote>
<div>This parameter contains the maximum time, in seconds, that a response is waited for after a unitary request to <em>DOcplexcloud</em> server.</div></blockquote>
<p><em>context.solver.docloud.result_wait_extra_time = 60</em></p>
<blockquote>
<div>This parameter is a time in seconds added to the expected solve time to compute the total result waiting timeout.</div></blockquote>
<p><em>context.solver.docloud.clean_job_after_solve = True</em></p>
<blockquote>
<div>This parameter indicates whether the job is automatically cleaned after the model is solved.
If not set to True, the model stays on the <em>DOcplexcloud</em> server and is visible from its <em>DropSolve</em> interface.
Note that the server may block future solving requests if there are too many jobs waiting.</div></blockquote>
<p><em>context.solver.docloud.polling = Context(min=1, max=3, incr=0.2)</em></p>
<blockquote>
<div>This parameter describes how the Python client polls the result of the solve on <em>DOcplexcloud</em>.
Polling delay is inside an interval [min, max], starting by min, growing to max with the given increment.</div></blockquote>
</div>
<div class="section" id="configuration-for-best-performances">
<h2>Configuration for best performances<a class="headerlink" href="#configuration-for-best-performances" title="Permalink to this headline">&para;</a></h2>
<p>To configure the CP Python API for best performances, the following configuration settings may be used.
Obviously, this performance is won at the cost of the loss of some features that may be useful in other cases.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">context</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">context</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">add_source_location</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">context</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">length_for_alias</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">context</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_all_constraints</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">context</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">dump_directory</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">trace_cpo</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">trace_log</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">context</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">add_log_to_solution</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
<div class="section" id="detailed-description">
<h2>Detailed description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">&para;</a></h2>
<dl class="function">
<dt id="docplex.cp.config.get_default">
<code class="descclassname">docplex.cp.config.</code><code class="descname">get_default</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/config.html#get_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.config.get_default" title="Permalink to this definition">&para;</a></dt>
<dd><p>Get the default context</p>
<p>Default context is also accessible with the global variable &#8216;context&#8217; in this module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Current default context</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="docplex.cp.config.set_default">
<code class="descclassname">docplex.cp.config.</code><code class="descname">set_default</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/docplex/cp/config.html#set_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#docplex.cp.config.set_default" title="Permalink to this definition">&para;</a></dt>
<dd><p>Set the default context.</p>
<p>Default context becomes accessible in the global variable &#8216;context&#8217; in this module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ctx</strong> &#8211; New default context</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="docplex.cp.solver.solver.py.html" title="Module docplex.cp.solver.solver"
             >next</a> |</li>
        <li class="right" >
          <a href="docplex.cp.solution.py.html" title="Module docplex.cp.solution"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DOcplex.CP: Constraint Programming Modeling for Python V2.15 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="refman.html" ><strong>docplex.cp</strong> reference manual</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, IBM.
    </div>
  </body>
</html>